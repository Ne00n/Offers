{"id": "9137", "post": "<div class=\"post-9137 post type-post status-publish format-standard hentry category-tutorials tag-dm-crypt tag-encrypted tag-ubuntu tag-vps\" id=\"post-9137\"><h2 class=\"storytitle\"><a href=\"https://lowendbox.com/blog/setting-up-an-encrypted-volume-on-your-ubuvps/\" rel=\"bookmark\">Setting Up An Encrypted Volume on your Ubuntu VPS</a></h2><div class=\"meta\"><img data-lazyloaded=\"1\" src=\"data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=\" data-src=\"/media/icons/tag_green.png\" alt=\"Tags: \"> <a href=\"https://lowendbox.com/tag/dm-crypt/\" rel=\"tag\">dm-crypt</a>, <a href=\"https://lowendbox.com/tag/encrypted/\" rel=\"tag\">encrypted</a>, <a href=\"https://lowendbox.com/tag/ubuntu/\" rel=\"tag\">ubuntu</a>, <a href=\"https://lowendbox.com/tag/vps/\" rel=\"tag\">VPS</a> <img data-lazyloaded=\"1\" src=\"data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=\" data-src=\"https://lowendbox.com/media/icons/calendar.png\" alt=\"Date/Time: \"> October 16, 2016 @ 12:18 pm, by Jon Biloh</div><div class=\"storycontent tablelook\"><p style=\"text-align: center;\"><a href=\"https://lowendbox.com/wp-content/uploads/2013/05/lowendtutorial.png\"><img data-lazyloaded=\"1\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNzEiIGhlaWdodD0iNzAiIHZpZXdCb3g9IjAgMCAyNzEgNzAiPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9IiNjZmQ0ZGIiLz48L3N2Zz4=\" loading=\"lazy\" class=\"alignnone size-full wp-image-3957\" data-src=\"https://lowendbox.com/wp-content/uploads/2013/05/lowendtutorial.png.webp\" alt=\"lowendtutorial\" width=\"271\" height=\"70\"></a></p><p>Developers commonly use virtual private servers to build applications for their clients. Securing the data stored on your VPS can help protect against the accidental exposure of your data in case of a breach.</p><p>Linux distros such as Ubuntu can assist you in creating an encrypted volume on your VPS. Best of all, this can all be done from the command line interface (SSH).</p><p><span id=\"more-9137\"></span></p><p><strong>How Encrypted Volumes Work</strong></p><p>When you\u2019re working with a low end box, creating an encrypted volume may prove to be a more versatile option than encrypting the entire disk.</p><p>Using an encrypted volume allows you to easily move your data across platforms, since an encrypted volume is essentially a large file that ends with the IMG file extension.</p><p><strong>Before You Start</strong></p><p>A few things should be noted before you begin creating encrypted volumes for your VPS. You should:</p><ul><li>Always keep your encryption password in a safe place</li><li>Be aware that encryption could hurt system performance</li><li>Stop any services that may be using the data you want to encrypt</li><li>Always backup your data</li></ul><p>Concerning the last bullet point, if the headers or meta-date of your encrypted files become corrupt, you risk losing the entire volume.</p><p><strong>Installing DM-Crypt on Ubuntu</strong></p><p>For the sake of this tutorial, we will assume that your VPS is Ubuntu based. To get started with encrypted volumes, we will use DM-Crypt. The directions may be slightly different for other flavors of Linux.</p><p>To install DM-Crypt using SSH, execute the following commands as Root:</p><pre class=\"code\">&gt; sudo apt-get update\n\n&gt; sudo apt-get install cryptsetup\n</pre><p>Once this install is complete, you\u2019re ready to begin creating encrypted volumes. The first step is to allocate space to the volume. Here\u2019s an example:</p><pre class=\"code\">&gt; sudo fallocate -l 2GB /root/folder/volume1.img\n</pre><p>Please note that this volume is not dynamic. It cannot be expanded. This command gives you an encrypted volume of 2GB.</p><p>Next, we\u2019ll encrypt the allocated space. You\u2019ll be required to create a password.</p><pre class=\"code\">&gt; sudo cryptsetup luksFormat /root/folder/volume1.img\n</pre><p>Next, we must create a name for the encrypted volume. Let\u2019s keep it simple and call it \u201cvolume1\u201d</p><pre class=\"code\">&gt; sudo cryptsetup luksOpen /root/folder/volume1.img volume1\n</pre><p>We\u2019ve allocated the space, we\u2019ve encrypted the space, we\u2019ve created a label for the encrypted volume, now we must create a file system. It is best to use XFS. Do this by typing:</p><pre class=\"code\">&gt; sudo mkfs.xfs -m crc=1 /dev/mapper/volume1\n</pre><p>Start Moving Data to the Encrypted Volume</p><p>You completed all of the prerequisites for creating the encrypted volume, now it\u2019s time to start utilizing this secured space. Do this by executing these commands at the SSH prompt.</p><pre class=\"code\">&gt; sudo mkdir -p /root/folder/volume1\n\n&gt; sudo mount /dev/mapper/volume1 /root/folder/volume1\n\n&gt; sudo rsync -azv --progress /root/originating/datafolder/ /root/folder/volume1\n</pre><p><strong>Final Thoughts</strong></p><p>Once you are done moving files the to the new encrypted volume, you can restart any services associated with the data that was being encrypted. You could easily move the hypothetical volume1.img file and remount it onto another VPS, should you need to transfer your data onto a production box.<br>\n<strong>*Special Note*</strong></p><p><a href=\"https://www.lowendtalk.com/profile/400/joepie91\">JoePie91</a>, an astute member of Low End Talk, points out the following extra precaution/note:</p><p><em>\u201cSecuring the data stored on your VPS can help protect against the accidental exposure of your data in case of a breach.\u201d</em></p><p><em>No, it probably won\u2019t. There are precisely two cases in which this has any use *whatsoever*:</em></p><p><em>* The attacker is dumb and doesn\u2019t know how to dump RAM.</em><br>\n<em>* The server is turned off and *physically* stolen.</em></p><p><em>Disk encryption does absolutely nothing to protect you from any vaguely competent attacker while the system is running.&nbsp;</em></p><p class=\"dpsp-share-text\"></p><div id=\"dpsp-content-bottom\" class=\"dpsp-content-wrapper dpsp-shape-rounded dpsp-column-auto dpsp-has-spacing dpsp-no-labels dpsp-show-on-mobile dpsp-button-style-1 dpsp-has-icon-background dpsp-has-button-background dpsp-show-total-share-count dpsp-show-total-share-count-after\"><ul class=\"dpsp-networks-btns-wrapper dpsp-networks-btns-content dpsp-has-button-icon-animation\"><li><a rel=\"nofollow\" href=\"https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Flowendbox.com%2Fblog%2Fsetting-up-an-encrypted-volume-on-your-ubuvps%2F&amp;t=Setting%20Up%20An%20Encrypted%20Volume%20on%20your%20Ubuntu%20VPS\" class=\"dpsp-network-btn dpsp-facebook dpsp-no-label dpsp-first\" title=\"Share on Facebook\"><span class=\"dpsp-network-icon\"></span><span class=\"dpsp-network-label-wrapper\"></span></a></li><li><a rel=\"nofollow\" href=\"https://twitter.com/intent/tweet?text=Setting%20Up%20An%20Encrypted%20Volume%20on%20your%20Ubuntu%20VPS&amp;url=https%3A%2F%2Flowendbox.com%2Fblog%2Fsetting-up-an-encrypted-volume-on-your-ubuvps%2F&amp;via=LowEndNetwork\" class=\"dpsp-network-btn dpsp-twitter dpsp-no-label\" title=\"Share on Twitter\"><span class=\"dpsp-network-icon\"></span><span class=\"dpsp-network-label-wrapper\"></span></a></li><li><a rel=\"nofollow\" href=\"https://www.linkedin.com/shareArticle?url=https%3A%2F%2Flowendbox.com%2Fblog%2Fsetting-up-an-encrypted-volume-on-your-ubuvps%2F&amp;title=Setting%20Up%20An%20Encrypted%20Volume%20on%20your%20Ubuntu%20VPS&amp;mini=true\" class=\"dpsp-network-btn dpsp-linkedin dpsp-no-label dpsp-last\" title=\"Share on LinkedIn\"><span class=\"dpsp-network-icon\"></span><span class=\"dpsp-network-label-wrapper\"></span></a></li></ul><div class=\"dpsp-total-share-wrapper\"><span class=\"dpsp-icon-total-share\"></span><span class=\"dpsp-total-share-count\">0</span><span>shares</span></div></div><div class=\"relpost-thumb-wrapper\"><div class=\"relpost-thumb-container\"><h3>Related posts:</h3><div style=\"clear: both\"></div><div style=\"clear: both\"></div><div class=\"relpost-block-container\"><a class=\"relpost-block-single\" href=\"https://lowendbox.com/blog/how-to-set-up-nameservers-on-a-vps/\"><div style=\"width: 150px; height: 215px;\"><div class=\"relpost-block-single-image\" alt=\"How to Set Up Nameservers on a VPS\" style=\"background: transparent url(https://lowendbox.com/wp-content/uploads/2020/04/how-to-setup-nameservers-on-a-vps-150x150.png) no-repeat scroll 0% 0%; width: 150px; height: 150px;\"></div><div class=\"relpost-block-single-text\" style=\"font-family: Arial;  font-size: 12px;  color: #333333;\">How to Set Up Nameservers on a VPS</div></div></a><a class=\"relpost-block-single\" href=\"https://lowendbox.com/blog/top-ten-ways-to-save-on-vps-hosting-and-a-bonus-eleventh-way/\"><div style=\"width: 150px; height: 215px;\"><div class=\"relpost-block-single-image\" alt=\"LowEndBox - The best place for hosting and cheap VPS deals!\" style=\"background: transparent url(https://lowendbox.com/wp-content/uploads/2020/03/leb-banner-150x150.png) no-repeat scroll 0% 0%; width: 150px; height: 150px;\"></div><div class=\"relpost-block-single-text\" style=\"font-family: Arial;  font-size: 12px;  color: #333333;\">Top Ten Ways to Save on VPS Hosting (and a Bonus Eleventh Way)</div></div></a><a class=\"relpost-block-single\" href=\"https://lowendbox.com/blog/signs-that-youve-outgrown-shared-hosting-and-should-upgrade-to-a-vps/\"><div style=\"width: 150px; height: 215px;\"><div class=\"relpost-block-single-image\" alt=\"Signs That You've Outgrown Shared Hosting and Should Upgrade to a VPS\" style=\"background: transparent url(https://lowendbox.com/wp-content/uploads/2020/04/signs-you-have-outgrown-shared-hosting-150x150.png) no-repeat scroll 0% 0%; width: 150px; height: 150px;\"></div><div class=\"relpost-block-single-text\" style=\"font-family: Arial;  font-size: 12px;  color: #333333;\">Signs That You've Outgrown Shared Hosting and Should Upgrade to a VPS</div></div></a><a class=\"relpost-block-single\" href=\"https://lowendbox.com/blog/how-to-disable-ipv6-on-ubuntu/\"><div style=\"width: 150px; height: 215px;\"><div class=\"relpost-block-single-image\" alt=\"how to disable ipv6 on your ubuntu\" style=\"background: transparent url(https://lowendbox.com/wp-content/uploads/2020/05/how-to-disable-ipv6-ubuntu-150x150.jpg) no-repeat scroll 0% 0%; width: 150px; height: 150px;\"></div><div class=\"relpost-block-single-text\" style=\"font-family: Arial;  font-size: 12px;  color: #333333;\">How to Disable IPv6 on Ubuntu</div></div></a></div><div style=\"clear: both\"></div></div></div><div id=\"author-bio-box\" style=\"background: #f8f8f8; border-top: 2px solid #cccccc; border-bottom: 2px solid #cccccc; color: #333333\"><h3><a style=\"color: #555555;\" href=\"https://lowendbox.com/blog/author/jbiloh/\" title=\"All posts by Jon Biloh\" rel=\"author\">Jon Biloh</a></h3><div class=\"bio-gravatar\"><img data-lazyloaded=\"1\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3MCIgaGVpZ2h0PSI3MCIgdmlld0JveD0iMCAwIDcwIDcwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjY2ZkNGRiIi8+PC9zdmc+\" alt=\"\" data-src=\"https://secure.gravatar.com/avatar/f766d6dc4b5f406b9f3cb0339d48de95?s=70&amp;d=retro&amp;r=pg\" data-srcset=\"https://secure.gravatar.com/avatar/f766d6dc4b5f406b9f3cb0339d48de95?s=140&amp;d=retro&amp;r=pg 2x\" class=\"avatar avatar-70 photo\" height=\"70\" width=\"70\" loading=\"lazy\"></div><a target=\"_blank\" rel=\"nofollow noopener noreferrer\" href=\"https://www.lowendtalk.com/profile/jbiloh\" class=\"bio-icon bio-icon-website\"></a><a target=\"_blank\" rel=\"nofollow noopener noreferrer\" href=\"http://Jbiloh\" class=\"bio-icon bio-icon-twitter\"></a><a target=\"_blank\" rel=\"nofollow noopener noreferrer\" href=\"https://www.linkedin.com/in/jon-biloh-4b32598/\" class=\"bio-icon bio-icon-linkedin\"></a><p class=\"bio-description\">I'm Jon Biloh and I own LowEndBox and LowEndTalk. I've spent my nearly 20 year career in IT building companies and now I'm excited to focus on building and enhancing the community at LowEndBox and LowEndTalk.</p></div></div><div class=\"feedback\"></div></div>"}