{"id": "5759", "post": "<div class=\"post-5759 post type-post status-publish format-standard hentry category-tutorials tag-tutorials-2\" id=\"post-5759\"><h2 class=\"storytitle\"><a href=\"https://lowendbox.com/blog/setup-for-streaming-live-events-to-browser-clients-using-nginx-fmle-and-flowplayer/\" rel=\"bookmark\">Setup for streaming live events to browser clients using Nginx, FMLE, and FlowPlayer</a></h2><div class=\"meta\"><img data-lazyloaded=\"1\" src=\"/media/icons/tag_green.png\" data-src=\"/media/icons/tag_green.png\" alt=\"Tags: \" class=\"litespeed-loaded\" data-was-processed=\"true\"> <a href=\"https://lowendbox.com/tag/tutorials-2/\" rel=\"tag\">tutorials</a> <img data-lazyloaded=\"1\" src=\"https://lowendbox.com/media/icons/calendar.png\" data-src=\"https://lowendbox.com/media/icons/calendar.png\" alt=\"Date/Time: \" class=\"litespeed-loaded\" data-was-processed=\"true\"> September 15, 2014 @ 1:00 pm, by Jonathan Tan</div><div class=\"storycontent tablelook\"><p><em>Editorial note: this is Jonathan\u2019s first tutorial on LowEndBox. I hope you enjoy it and more are to follow in the future! If all goes well, he will be writing tutorials occasionally alongside me. MPK</em></p><p>Have you been into a situation where you wanted to stream live events such as school graduation or teaching seminar? There are already many companies offering ready made solution for such purpose. But for budget conscious people, doing it the LEB way is surely cheaper!</p><p>This tutorial will guide you step by step on how to setup and use the different components that needs to work together.</p><p><span id=\"more-5759\"></span></p><h3>Real Time Messaging Protocol (RTMP)</h3><p>I chose the RTMP protocol for simplicity. It was developed by Macromedia/Adobe and can be played on any machine with Adobe Flash player.</p><h3>Server Setup</h3><p>The server requirements is minimal:</p><ul><li>Any virtualization. OpenVZ, Xen, KVM are all fine.</li><li>64MB RAM</li><li>Ubuntu OS \u2013 steps are tested on 12.04</li></ul><p>Nginx has a nice module to support the RTMP protocol. But using it means we need to compile Nginx from source! Log into your box as root and follow the steps below:</p><p>Install required packages to compile Nginx</p><pre class=\"terminal\">apt-get install build-essential libpcre3 libpcre3-dev libssl-dev\n</pre><p>Create a temporary folder</p><pre class=\"terminal\">mkdir -p ~/temp/nginx-install\ncd ~/temp/nginx-install\n</pre><p>Download and extract the source of NGINX and the RTMP module.</p><pre class=\"terminal\">wget http://nginx.org/download/nginx-1.6.1.tar.gz\ntar -xvf nginx-1.6.1.tar.gz\nwget https://github.com/arut/nginx-rtmp-module/archive/master.zip\nunzip master.zip\n</pre><p>This is my directory structure after:</p><pre class=\"terminal\">root@default:~/temp/nginx-install# ls -l \ntotal 1332\n-rw-r--r-- 1 root root 545036 Sep  7 20:27 master.zip\ndrwxr-xr-x 8 1001 1001   4096 Aug  5 19:18 nginx-1.6.1\n-rw-r--r-- 1 root root 803301 Aug  5 21:55 nginx-1.6.1.tar.gz\ndrwxr-xr-x 6 root root   4096 Sep  2 02:44 nginx-rtmp-module-master\n</pre><p>Go to the NGINX extracted source</p><pre class=\"terminal\">cd nginx-1.6.1/\n</pre><p>Configure with the RTMP module</p><pre class=\"terminal\">./configure --with-http_ssl_module --add-module=../nginx-rtmp-module-master\n</pre><p>If you wish to add the other supported modules, you can freely add them. For example:</p><pre class=\"terminal\">./configure --with-http_ssl_module --with-http_realip_module --with-http_addition_module --with-http_sub_module --with-http_dav_module --with-http_flv_module --with-http_mp4_module --with-http_gunzip_module --with-http_gzip_static_module --with-http_random_index_module --with-http_secure_link_module --with-http_stub_status_module --with-mail --with-mail_ssl_module --with-file-aio --with-ipv6 --add-module=../nginx-rtmp-module-master\n</pre><p>Then continue to compile and install. By default, Nginx will be installed at: /usr/local/nginx</p><pre class=\"terminal\">make\nsudo make install\n</pre><p>It will be more convenient to create init scripts for the service.</p><pre class=\"terminal\">wget https://raw.github.com/JasonGiedymin/nginx-init-ubuntu/master/nginx -O /etc/init.d/nginx\nchmod +x /etc/init.d/nginx\nsudo update-rc.d -f nginx defaults\n</pre><p>After that, we can start and stop NGINX using the commands:</p><pre class=\"terminal\">service nginx start\nservice nginx stop\n</pre><p>Open the file: /usr/local/nginx/conf/nginx.conf and add the following contents at the bottom:</p><pre class=\"code\">rtmp {\n        server {\n                listen 1935;\n                chunk_size 4096;\n\n                application live {\n                        live on;\n                        record off;\n                }\n        }\n}\n</pre><p>Restart the server after this.</p><h3>Flash Media Live Encoder (FMLE)</h3><p>FMLE is a free live encoding software made by Adobe. You can use this capture video and audio input from different devices and stream it to your server configured above. You can get it from http://www.adobe.com/products/flash-media-encoder.html.</p><p>Here is a walkthrough on downloading the product:</p><p><a href=\"https://lowendbox.com/wp-content/uploads/2014/09/fmle1.jpg\"><img data-lazyloaded=\"1\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMDAiIGhlaWdodD0iMTg0IiB2aWV3Qm94PSIwIDAgMzAwIDE4NCI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iI2NmZDRkYiIvPjwvc3ZnPg==\" loading=\"lazy\" class=\"alignleft wp-image-5761 size-medium\" data-src=\"https://lowendbox.com/wp-content/uploads/2014/09/fmle1-300x184.jpg.webp\" alt=\"fmle1\" width=\"300\" height=\"184\" data-srcset=\"https://lowendbox.com/wp-content/uploads/2014/09/fmle1-300x184.jpg.webp 300w, https://lowendbox.com/wp-content/uploads/2014/09/fmle1.jpg.webp 962w\" data-sizes=\"(max-width: 300px) 100vw, 300px\"></a></p><p><a href=\"https://lowendbox.com/wp-content/uploads/2014/09/fmle2.jpg\"><img data-lazyloaded=\"1\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMDAiIGhlaWdodD0iMTM0IiB2aWV3Qm94PSIwIDAgMzAwIDEzNCI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iI2NmZDRkYiIvPjwvc3ZnPg==\" loading=\"lazy\" class=\"alignleft wp-image-5763 size-medium\" data-src=\"https://lowendbox.com/wp-content/uploads/2014/09/fmle2-300x134.jpg.webp\" alt=\"fmle2\" width=\"300\" height=\"134\" data-srcset=\"https://lowendbox.com/wp-content/uploads/2014/09/fmle2-300x134.jpg.webp 300w, https://lowendbox.com/wp-content/uploads/2014/09/fmle2.jpg.webp 769w\" data-sizes=\"(max-width: 300px) 100vw, 300px\"></a></p><p><a href=\"https://lowendbox.com/wp-content/uploads/2014/09/fmle3.jpg\"><img data-lazyloaded=\"1\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyOTciIGhlaWdodD0iMzAwIiB2aWV3Qm94PSIwIDAgMjk3IDMwMCI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iI2NmZDRkYiIvPjwvc3ZnPg==\" loading=\"lazy\" class=\"alignleft wp-image-5765 size-medium\" data-src=\"https://lowendbox.com/wp-content/uploads/2014/09/fmle3-297x300.jpg.webp\" alt=\"fmle3\" width=\"297\" height=\"300\" data-srcset=\"https://lowendbox.com/wp-content/uploads/2014/09/fmle3-297x300.jpg.webp 297w, https://lowendbox.com/wp-content/uploads/2014/09/fmle3.jpg.webp 762w\" data-sizes=\"(max-width: 297px) 100vw, 297px\"></a></p><p>Install the software and open it. It should look like this:</p><p><a href=\"https://lowendbox.com/wp-content/uploads/2014/09/fmle4.jpg\"><img data-lazyloaded=\"1\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMDAiIGhlaWdodD0iMjI1IiB2aWV3Qm94PSIwIDAgMzAwIDIyNSI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iI2NmZDRkYiIvPjwvc3ZnPg==\" loading=\"lazy\" class=\"alignleft size-medium wp-image-5767\" data-src=\"https://lowendbox.com/wp-content/uploads/2014/09/fmle4-300x225.jpg.webp\" alt=\"fmle4\" width=\"300\" height=\"225\" data-srcset=\"https://lowendbox.com/wp-content/uploads/2014/09/fmle4-300x225.jpg.webp 300w, https://lowendbox.com/wp-content/uploads/2014/09/fmle4-1024x768.jpg.webp 1024w, https://lowendbox.com/wp-content/uploads/2014/09/fmle4.jpg.webp 1026w\" data-sizes=\"(max-width: 300px) 100vw, 300px\"></a></p><p><a href=\"https://lowendbox.com/wp-content/uploads/2014/09/fmle5.jpg\"><img data-lazyloaded=\"1\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMDAiIGhlaWdodD0iMjI3IiB2aWV3Qm94PSIwIDAgMzAwIDIyNyI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iI2NmZDRkYiIvPjwvc3ZnPg==\" loading=\"lazy\" class=\"alignleft size-medium wp-image-5769\" data-src=\"https://lowendbox.com/wp-content/uploads/2014/09/fmle5-300x227.jpg.webp\" alt=\"fmle5\" width=\"300\" height=\"227\" data-srcset=\"https://lowendbox.com/wp-content/uploads/2014/09/fmle5-300x227.jpg.webp 300w, https://lowendbox.com/wp-content/uploads/2014/09/fmle5-1024x776.jpg.webp 1024w, https://lowendbox.com/wp-content/uploads/2014/09/fmle5.jpg.webp 1026w\" data-sizes=\"(max-width: 300px) 100vw, 300px\"></a></p><p>You can choose and configure your video and audio device on the left. Feel free to play around. The right side contains the details of your server.<br>\nI blotted out my IP address from the screen capture. But do note of the values rtmp://xx.xx.xx.xx/live and livestream in the text boxes. You will need these in your HTML.</p><p>Click connect to connect FMLE to the server and click start to begin the streaming session</p><h3>FlowPlayer</h3><p>I have found good success using FlowPlayer for rendering my video streams on a browser.</p><p>Here is the relevant HTML/Javascript code that shows the stream from the broadcast made by FMLE above:</p><pre class=\"code\">$f(\"wowza\", \"http://releases.flowplayer.org/swf/flowplayer-3.2.15.swf\", {\n    clip: {\n\turl: 'livestream',\n\tscaling: 'fit',\n\tlive: true,\n\tautoPlay: true,\n\tprovider: 'hddn'\n    },\n    plugins: {\n\thddn: {\n\t    url: \"flowplayer.rtmp-3.2.11.swf\",\n\t\tnetConnectionUrl: 'rtmp://xx.xx.xx.xxx/live'\n\t}\n    },\n    canvas: {\n\tbackgroundGradient: 'none'\n    }\n});\n$f(\"wowza\").play();\n</pre><p>And this is output when the HTML page was opened on a browser:</p><p><a href=\"https://lowendbox.com/wp-content/uploads/2014/09/fmle6.jpg\"><img data-lazyloaded=\"1\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMDAiIGhlaWdodD0iMjM0IiB2aWV3Qm94PSIwIDAgMzAwIDIzNCI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iI2NmZDRkYiIvPjwvc3ZnPg==\" loading=\"lazy\" class=\"alignleft wp-image-5771 size-medium\" data-src=\"https://lowendbox.com/wp-content/uploads/2014/09/fmle6-300x234.jpg.webp\" alt=\"\" width=\"300\" height=\"234\" data-srcset=\"https://lowendbox.com/wp-content/uploads/2014/09/fmle6-300x234.jpg.webp 300w, https://lowendbox.com/wp-content/uploads/2014/09/fmle6.jpg.webp 681w\" data-sizes=\"(max-width: 300px) 100vw, 300px\"></a></p><p>To save you the trouble of finding the right combination of swf files and HTML code, here is the complete zipped <a href=\"https://lowendbox.com/wp-content/uploads/2014/09/live.zip\">html client package</a>.</p><h3>Final notes</h3><p>I want to thank <a href=\"http://lowendtalk.com/profile/239/ihatetonyy\">@ihatetonyy</a> of LET who helped me a lot with my research on video streaming.</p><p class=\"dpsp-share-text\"></p><div id=\"dpsp-content-bottom\" class=\"dpsp-content-wrapper dpsp-shape-rounded dpsp-column-auto dpsp-has-spacing dpsp-no-labels dpsp-show-on-mobile dpsp-button-style-1 dpsp-has-icon-background dpsp-has-button-background dpsp-show-total-share-count dpsp-show-total-share-count-after\"><ul class=\"dpsp-networks-btns-wrapper dpsp-networks-btns-content dpsp-has-button-icon-animation\"><li><a rel=\"nofollow\" href=\"https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Flowendbox.com%2Fblog%2Fsetup-for-streaming-live-events-to-browser-clients-using-nginx-fmle-and-flowplayer%2F&amp;t=Setup%20for%20streaming%20live%20events%20to%20browser%20clients%20using%20Nginx%2C%20FMLE%2C%20and%20FlowPlayer\" class=\"dpsp-network-btn dpsp-facebook dpsp-no-label dpsp-first\" title=\"Share on Facebook\"><span class=\"dpsp-network-icon\"></span><span class=\"dpsp-network-label-wrapper\"></span></a></li><li><a rel=\"nofollow\" href=\"https://twitter.com/intent/tweet?text=Setup%20for%20streaming%20live%20events%20to%20browser%20clients%20using%20Nginx%2C%20FMLE%2C%20and%20FlowPlayer&amp;url=https%3A%2F%2Flowendbox.com%2Fblog%2Fsetup-for-streaming-live-events-to-browser-clients-using-nginx-fmle-and-flowplayer%2F&amp;via=LowEndNetwork\" class=\"dpsp-network-btn dpsp-twitter dpsp-no-label\" title=\"Share on Twitter\"><span class=\"dpsp-network-icon\"></span><span class=\"dpsp-network-label-wrapper\"></span></a></li><li><a rel=\"nofollow\" href=\"https://www.linkedin.com/shareArticle?url=https%3A%2F%2Flowendbox.com%2Fblog%2Fsetup-for-streaming-live-events-to-browser-clients-using-nginx-fmle-and-flowplayer%2F&amp;title=Setup%20for%20streaming%20live%20events%20to%20browser%20clients%20using%20Nginx%2C%20FMLE%2C%20and%20FlowPlayer&amp;mini=true\" class=\"dpsp-network-btn dpsp-linkedin dpsp-no-label dpsp-last\" title=\"Share on LinkedIn\"><span class=\"dpsp-network-icon\"></span><span class=\"dpsp-network-label-wrapper\"></span></a></li></ul><div class=\"dpsp-total-share-wrapper\"><span class=\"dpsp-icon-total-share\"></span><span class=\"dpsp-total-share-count\">0</span><span>shares</span></div></div><div class=\"relpost-thumb-wrapper\"><div class=\"relpost-thumb-container\"><h3>Related posts:</h3><div style=\"clear: both\"></div><div style=\"clear: both\"></div><div class=\"relpost-block-container\"><a class=\"relpost-block-single\" href=\"https://lowendbox.com/blog/centos-6-end-of-life-is-coming-upgrade-to-a-new-centos-7-vps-now/\"><div style=\"width: 150px; height: 215px;\"><div class=\"relpost-block-single-image\" alt=\"CentOS 6 End of Life is Coming! Upgrade to a new CentOS 7 VPS Now\" style=\"background: transparent url(https://lowendbox.com/wp-content/uploads/2020/04/centos-6-150x150.png) no-repeat scroll 0% 0%; width: 150px; height: 150px;\"></div><div class=\"relpost-block-single-text\" style=\"font-family: Arial;  font-size: 12px;  color: #333333;\">CentOS 6 End of Life is Coming! Upgrade to a new CentOS 7 VPS Now</div></div></a><a class=\"relpost-block-single\" href=\"https://lowendbox.com/blog/best-web-hosting-control-panels-after-the-cpanel-price-hike/\"><div style=\"width: 150px; height: 215px;\"><div class=\"relpost-block-single-image\" alt=\"Best Web Hosting Control Panels after the cPanel Price Hike\" style=\"background: transparent url(https://lowendbox.com/wp-content/uploads/2020/03/leb-banner-150x150.png) no-repeat scroll 0% 0%; width: 150px; height: 150px;\"></div><div class=\"relpost-block-single-text\" style=\"font-family: Arial;  font-size: 12px;  color: #333333;\">Best Web Hosting Control Panels after the cPanel Price Hike</div></div></a><a class=\"relpost-block-single\" href=\"https://lowendbox.com/blog/how-to-set-up-plex-media-server-on-your-vps/\"><div style=\"width: 150px; height: 215px;\"><div class=\"relpost-block-single-image\" alt=\"How to Set Up Plex Media Server on Your Cheap VPS\" style=\"background: transparent url(https://lowendbox.com/wp-content/uploads/2020/04/how-to-set-up-plex-media-server-on-vps-2-150x150.png) no-repeat scroll 0% 0%; width: 150px; height: 150px;\"></div><div class=\"relpost-block-single-text\" style=\"font-family: Arial;  font-size: 12px;  color: #333333;\">How to Set Up Plex Media Server on Your Cheap VPS</div></div></a><a class=\"relpost-block-single\" href=\"https://lowendbox.com/blog/how-to-create-a-dns-server-on-debian-stretch/\"><div style=\"width: 150px; height: 215px;\"><div class=\"relpost-block-single-image\" alt=\"How To Create a DNS Server On Debian Stretch\" style=\"background: transparent url(https://lowendbox.com/wp-content/uploads/2020/04/leb-centered-small.jpg) no-repeat scroll 0% 0%; width: 150px; height: 150px;\"></div><div class=\"relpost-block-single-text\" style=\"font-family: Arial;  font-size: 12px;  color: #333333;\">How To Create a DNS Server On Debian Stretch</div></div></a></div><div style=\"clear: both\"></div></div></div><div id=\"author-bio-box\" style=\"background: #f8f8f8; border-top: 2px solid #cccccc; border-bottom: 2px solid #cccccc; color: #333333\"><h3><a style=\"color: #555555;\" href=\"https://lowendbox.com/blog/author/jcaleb/\" title=\"All posts by Jonathan Tan\" rel=\"author\">Jonathan Tan</a></h3><div class=\"bio-gravatar\"><img data-lazyloaded=\"1\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3MCIgaGVpZ2h0PSI3MCIgdmlld0JveD0iMCAwIDcwIDcwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjY2ZkNGRiIi8+PC9zdmc+\" alt=\"\" data-src=\"https://secure.gravatar.com/avatar/006e04734ea8babe0ec9790b77a1f8a1?s=70&amp;d=retro&amp;r=pg\" data-srcset=\"https://secure.gravatar.com/avatar/006e04734ea8babe0ec9790b77a1f8a1?s=140&amp;d=retro&amp;r=pg 2x\" class=\"avatar avatar-70 photo\" height=\"70\" width=\"70\" loading=\"lazy\"></div><p class=\"bio-description\"></p></div></div><div class=\"feedback\"></div></div>"}