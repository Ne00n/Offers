{"id": "6810", "post": "<div class=\"post-6810 post type-post status-publish format-standard hentry category-tutorials tag-tutorial\" id=\"post-6810\"><h2 class=\"storytitle\"><a href=\"https://lowendbox.com/blog/tutorial-the-lowendcluster-part-1/\" rel=\"bookmark\">Tutorial \u2013 The LowEndCluster \u2013 Part 1</a></h2><div class=\"meta\"><img data-lazyloaded=\"1\" src=\"data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=\" data-src=\"/media/icons/tag_green.png\" alt=\"Tags: \"> <a href=\"https://lowendbox.com/tag/tutorial/\" rel=\"tag\">tutorial</a> <img data-lazyloaded=\"1\" src=\"data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=\" data-src=\"https://lowendbox.com/media/icons/calendar.png\" alt=\"Date/Time: \"> April 18, 2015 @ 1:00 am, by Maarten Kossen</div><div class=\"storycontent tablelook\"><p style=\"text-align: center;\"><img data-lazyloaded=\"1\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNzEiIGhlaWdodD0iNzAiIHZpZXdCb3g9IjAgMCAyNzEgNzAiPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9IiNjZmQ0ZGIiLz48L3N2Zz4=\" loading=\"lazy\" class=\"alignnone size-full wp-image-3957\" data-src=\"https://lowendbox.com/wp-content/uploads/2013/05/lowendtutorial.png.webp\" alt=\"lowendtutorial\" width=\"271\" height=\"70\"></p><p>The tutorials are back! After a period of absence it\u2019s time to get the tutorials back on track and I\u2019m going to start of with a great series, and a challenging one on that.</p><p>With all these LowEndSpirit-style offers these days it\u2019s extremely cheap to get a whole bunch of servers quite quickly. For less than $50 a year you can have at least 10 servers in two continents across 10 different cities. That\u2019s pretty awesome, right? But what do you do with all those servers?</p><p>That\u2019s where my (*cough*) brilliant idea comes in: we\u2019re going to create a cluster out of them! And not just any cluster, a <em>redundant</em> cluster! Oh well, if we make it anyway. Let\u2019s first get somewhere before I start bragging. So, up to part 1 of N parts\u2026</p><p><span id=\"more-6810\"></span></p><h2>The ingredients</h2><p>From what I can think of right now, this is what kind of servers you need for this cluster (taking into account redundancy):</p><ul><li>2x VPS with IPv4 and IPv6 (BudgetVZ offers these for a low fee) for load balancers</li><li>2x VPS with just IPv6 for MySQL</li><li>2x VPS with just IPv6 for Web Nodes</li><li>3x VPS with just IPv6 for a filesystem</li></ul><p>The above is just an indication, I may need to adapt as we go along. More is always possible, less is making it problematic. We need the IPv4 on the load balancers in order to get dual stack easy access to whatever you\u2019re going to host on there.</p><p>For now, my plan is as follows:</p><ul><li>Host a WordPress site on the cluster</li><li>Use MariaDB as a database server</li><li>Use Apache as an application server on the web nodes</li><li>Use NGINX as a load balancer and eventually to server/cache static files</li><li>Use MooseFS or CEPH as a filesystem (depending on which one I can get to work)</li></ul><p>So, if you\u2019re in for the challenge, let\u2019s get those servers (if you don\u2019t have them already) and get cracking!</p><p>Oh, one more thing: you may want to get KVM machines or OpenVZ machines with FUSE for those filesystem nodes. I\u2019d go for KVM as that broadens your options in case you\u2019d like to switch in the future (to say, GlusterFS once they finally support IPv6\u2026).</p><h2>The MariaDB cluster</h2><p>This is the easiest step\u2026 for me! As I\u2019ve already written this tutorial and only had to make some tweaks. So, fire up a new tab and go to <a title=\"Getting started with MySQL Master-Slave replication\" href=\"https://lowendbox.com/blog/getting-started-with-mysql-master-slave-replication/\">my original tutorial</a>!</p><p>Follow this tutorial step-by-step, taking the following notes and changes into account:</p><p><span style=\"text-decoration: underline;\">bind-address</span></p><p>The bind-address should listen to any interface, not just to IPv4. So instead of this:</p><blockquote><p>bind_address = 0.0.0.0</p></blockquote><p>Use this:</p><blockquote><p>bind_address = ::</p></blockquote><p>As strange as this may look, but that will make the server listen on all interfaces. After having made that change, be sure to restart MariaDB:</p><blockquote><p>sudo service mysql restart</p></blockquote><p><span style=\"text-decoration: underline;\">IPv6 instead of IPv4</span></p><p>Wherever I\u2019ve used an IPv4 address, use the corresponding IPv6 address of the server(s). Make sure they stay within the quotes, otherwise you\u2019ll break stuff.</p><p>If you\u2019re running these commands after the fact, flush the privileges to make sure it\u2019s all set up correctly. From within MariaDB:</p><blockquote><p>FLUSH PRIVILEGES;</p></blockquote><p>And you\u2019re good!</p><hr><p>That was it for this week. Next time (in about two weeks) I want to focus on the web nodes and how we\u2019re going to set those up.</p><p>Any feedback thus far, or suggestions, feel free to let me know!</p><p class=\"dpsp-share-text\"></p><div id=\"dpsp-content-bottom\" class=\"dpsp-content-wrapper dpsp-shape-rounded dpsp-column-auto dpsp-has-spacing dpsp-no-labels dpsp-show-on-mobile dpsp-button-style-1 dpsp-has-icon-background dpsp-has-button-background dpsp-show-total-share-count dpsp-show-total-share-count-after\"><ul class=\"dpsp-networks-btns-wrapper dpsp-networks-btns-content dpsp-has-button-icon-animation\"><li><a rel=\"nofollow\" href=\"https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Flowendbox.com%2Fblog%2Ftutorial-the-lowendcluster-part-1%2F&amp;t=Tutorial%20-%20The%20LowEndCluster%20-%20Part%201\" class=\"dpsp-network-btn dpsp-facebook dpsp-no-label dpsp-first\" title=\"Share on Facebook\"><span class=\"dpsp-network-icon\"></span><span class=\"dpsp-network-label-wrapper\"></span></a></li><li><a rel=\"nofollow\" href=\"https://twitter.com/intent/tweet?text=Tutorial%20-%20The%20LowEndCluster%20-%20Part%201&amp;url=https%3A%2F%2Flowendbox.com%2Fblog%2Ftutorial-the-lowendcluster-part-1%2F&amp;via=LowEndNetwork\" class=\"dpsp-network-btn dpsp-twitter dpsp-no-label\" title=\"Share on Twitter\"><span class=\"dpsp-network-icon\"></span><span class=\"dpsp-network-label-wrapper\"></span></a></li><li><a rel=\"nofollow\" href=\"https://www.linkedin.com/shareArticle?url=https%3A%2F%2Flowendbox.com%2Fblog%2Ftutorial-the-lowendcluster-part-1%2F&amp;title=Tutorial%20-%20The%20LowEndCluster%20-%20Part%201&amp;mini=true\" class=\"dpsp-network-btn dpsp-linkedin dpsp-no-label dpsp-last\" title=\"Share on LinkedIn\"><span class=\"dpsp-network-icon\"></span><span class=\"dpsp-network-label-wrapper\"></span></a></li></ul><div class=\"dpsp-total-share-wrapper\"><span class=\"dpsp-icon-total-share\"></span><span class=\"dpsp-total-share-count\">0</span><span>shares</span></div></div><div class=\"relpost-thumb-wrapper\"><div class=\"relpost-thumb-container\"><h3>Related posts:</h3><div style=\"clear: both\"></div><div style=\"clear: both\"></div><div class=\"relpost-block-container\"><a class=\"relpost-block-single\" href=\"https://lowendbox.com/blog/managing-your-lowendempire-with-ansible-part-1/\"><div style=\"width: 150px; height: 215px;\"><div class=\"relpost-block-single-image\" alt=\"Managing Your LowEndEmpire With Ansible, Part 1\" style=\"background: transparent url(https://lowendbox.com/wp-content/uploads/2020/03/leb-banner-150x150.png) no-repeat scroll 0% 0%; width: 150px; height: 150px;\"></div><div class=\"relpost-block-single-text\" style=\"font-family: Arial;  font-size: 12px;  color: #333333;\">Managing Your LowEndEmpire With Ansible, Part 1</div></div></a><a class=\"relpost-block-single\" href=\"https://lowendbox.com/blog/setup-a-dns-nameserver-using-nsd/\"><div style=\"width: 150px; height: 215px;\"><div class=\"relpost-block-single-image\" alt=\"Setup a DNS Nameserver Using NSD\" style=\"background: transparent url(https://lowendbox.com/wp-content/uploads/2020/03/leb-banner-150x150.png) no-repeat scroll 0% 0%; width: 150px; height: 150px;\"></div><div class=\"relpost-block-single-text\" style=\"font-family: Arial;  font-size: 12px;  color: #333333;\">Setup a DNS Nameserver Using NSD</div></div></a><a class=\"relpost-block-single\" href=\"https://lowendbox.com/blog/keeping-a-logwatchful-eye-on-your-vps-with-logwatch/\"><div style=\"width: 150px; height: 215px;\"><div class=\"relpost-block-single-image\" alt=\"Keeping A (log)Watchful Eye on Your VPS With logwatch\" style=\"background: transparent url(https://lowendbox.com/wp-content/uploads/2020/04/logwatch-150x150.png) no-repeat scroll 0% 0%; width: 150px; height: 150px;\"></div><div class=\"relpost-block-single-text\" style=\"font-family: Arial;  font-size: 12px;  color: #333333;\">Keeping A (log)Watchful Eye on Your VPS With logwatch</div></div></a><a class=\"relpost-block-single\" href=\"https://lowendbox.com/blog/nginx-vs-openlitespeed-vs-apache/\"><div style=\"width: 150px; height: 215px;\"><div class=\"relpost-block-single-image\" alt=\"Nginx vs. OpenLiteSpeed vs. Apache\" style=\"background: transparent url(https://lowendbox.com/wp-content/uploads/2020/04/nginx-vs-openlitespeed-vs-apache-150x150.png) no-repeat scroll 0% 0%; width: 150px; height: 150px;\"></div><div class=\"relpost-block-single-text\" style=\"font-family: Arial;  font-size: 12px;  color: #333333;\">Nginx vs. OpenLiteSpeed vs. Apache</div></div></a></div><div style=\"clear: both\"></div></div></div><div id=\"author-bio-box\" style=\"background: #f8f8f8; border-top: 2px solid #cccccc; border-bottom: 2px solid #cccccc; color: #333333\"><h3><a style=\"color: #555555;\" href=\"https://lowendbox.com/blog/author/mpkossen/\" title=\"All posts by Maarten Kossen\" rel=\"author\">Maarten Kossen</a></h3><div class=\"bio-gravatar\"><img data-lazyloaded=\"1\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3MCIgaGVpZ2h0PSI3MCIgdmlld0JveD0iMCAwIDcwIDcwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjY2ZkNGRiIi8+PC9zdmc+\" alt=\"\" data-src=\"https://secure.gravatar.com/avatar/67eeccea1ee5a1ce2f93adc061f69a5f?s=70&amp;d=retro&amp;r=pg\" data-srcset=\"https://secure.gravatar.com/avatar/67eeccea1ee5a1ce2f93adc061f69a5f?s=140&amp;d=retro&amp;r=pg 2x\" class=\"avatar avatar-70 photo\" height=\"70\" width=\"70\" loading=\"lazy\"></div><p class=\"bio-description\">Maarten Kossen was the administrator of LowEndBox from 2013 to 2015, and brought many ideas and improvements to the website during his leadership. Today he is member of our community and LowEndTalk.</p></div></div><div class=\"feedback\"></div></div>"}