{"id": "19099", "post": "<div class=\"post-19099 post type-post status-publish format-standard hentry category-virtual-servers category-tutorials tag-security tag-ssh-key tag-ubuntu\" id=\"post-19099\"><h2 class=\"storytitle\"><a href=\"https://lowendbox.com/blog/setup-ssh-keys-on-ubuntu-18-04/\" rel=\"bookmark\">Setup SSH Keys on Ubuntu 18.04</a></h2><div class=\"meta\"><img data-lazyloaded=\"1\" src=\"/media/icons/tag_green.png\" data-src=\"/media/icons/tag_green.png\" alt=\"Tags: \" class=\"litespeed-loaded\" data-was-processed=\"true\"> <a href=\"https://lowendbox.com/tag/security/\" rel=\"tag\">Security</a>, <a href=\"https://lowendbox.com/tag/ssh-key/\" rel=\"tag\">ssh key</a>, <a href=\"https://lowendbox.com/tag/ubuntu/\" rel=\"tag\">ubuntu</a> <img data-lazyloaded=\"1\" src=\"https://lowendbox.com/media/icons/calendar.png\" data-src=\"https://lowendbox.com/media/icons/calendar.png\" alt=\"Date/Time: \" class=\"litespeed-loaded\" data-was-processed=\"true\"> May 13, 2019 @ 1:43 pm, by Sean Richards</div><div class=\"storycontent tablelook\"><h2>Who should read this?</h2><p>This tutorial is for novice to intermediate linux users who want to go beyond basic password security.&nbsp; Security professionals recommend using ssh keys to make authentication into ssh sessions faster, easier and more secure.&nbsp; &nbsp;As passwords become longer and more complex they become more difficult to use and manage.</p><p>Key based access is more secure and easier to manage for individuals.&nbsp; For teams and organizations key based access has some challenges around rotation and user hygiene that are outside of the scope of this tutorial.</p><h2>What are we talking about ?</h2><p>This tutorial will walk you through the basic procedures on setting up and utilizing SSH keys on your servers and how to use those keys with common windows ssh tools like putty or on OSX, or Linux.</p><p>SSH is a client server protocol originally developed to replace the insecure and unencrypted telnet protocol.&nbsp; SSh1 was originally developed in 1995 by Tatu Ylonen, a researcher at the Helsinki University of Technology.&nbsp; &nbsp;Tatu went on to found ssh.com.&nbsp; SSH went on to become one of the most widely used security and administration tools in modern technology.</p><p>OpenSSH was a derivative work forked (by the OpenBSD project) from earlier versions of the SSH server application that had less restrictive licensing.</p><h2>Why</h2><p>Using SSH keys makes system access fast, easy, secure and scalable.&nbsp; &nbsp;It\u2019s pretty much the only way to fly if you\u2019re serious about being a linux administrator.</p><p><span id=\"more-19099\"></span></p><h2>What are SSH Keys?</h2><p>SSH keys are a public and private key pair used for authenticating users whom are trying to remotely login to systems to perform administrative tasks and actions.&nbsp; The public key is placed on the remote server and the private key is held as a secret on the&nbsp; user\u2019s local machine.</p><h3>Pre-requisites</h3><p>This tutorial is based on Ubuntu 18.04 running the latest</p><p>$ sudo apt-get update &amp;&amp; apt-get upgrade</p><p>If you are using windows you\u2019ll need:<br>\n<strong>Putty</strong>&nbsp;&nbsp;https://www.chiark.greenend.org.uk/~sgtatham/putty/latest.html&nbsp; &nbsp; ### You need at least putty v0.70 to use ED25519</p><p><strong>WinSCP&nbsp;</strong>https://winscp.net/eng/download.php</p><p><strong>Puttygen&nbsp;&nbsp;</strong>https://winscp.net/eng/download.php&nbsp; This is included in the WinSCP installer</p><h3>Step 1</h3><pre>$ mkdir -p ~/.ssh\n$ chmod 0700 ~/.ssh\n$ ssh-keygen -t ed25519 -C \"VPS server #101\"    ### https://ed25519.cr.yp.to/ if you are wondering what ED25519 is \nGenerating public/private ed25519 key pair.\nEnter file in which to save the key (/root/.ssh/id_ed25519):\nEnter passphrase (empty for no passphrase):   #haha I can't type \nEnter same passphrase again:\nPassphrases do not match.  Try again.\nEnter passphrase (empty for no passphrase):  #still can't type\nDEnter same passphrase again:\nYour identification has been saved in /root/.ssh/id_ed25519.\nYour public key has been saved in /root/.ssh/id_ed25519.pub.\nThe key fingerprint is:\nSHA256:+EgRgp7QUWicc/vjjYfl8iW/HW1E5PkzOYY7TmCMlYU VPS server #101\nThe key's randomart image is:  \n+--[ED25519 256]--+\n| o.*o .     ...  |\n|. O ..     Eoo . |\n| + + ...   o  +  |\n|  o .  O  +  .+..|\n|     .o S. + ..*.|\n|     .oo. . .oo +|\n|     ..Bo . .+o  |\n|      = ++ .oo.  |\n|       +. o...   |\n+----[SHA256]-----+\n$ ls -al ~/.ssh\ntotal 16\ndrwx------ 2 root root 4096 Apr 30 04:12 .            ### Agree to pretend that I didn't run this as root\ndrwx------ 7 root root 4096 Apr 30 04:11 ..\n-rw------- 1 root root  411 Apr 30 04:12 id_ed25519    ### THIS IS YOUR PRIVATE KEY DO NOT SHARE\n-rw-r--r-- 1 root root   97 Apr 30 04:12 id_ed25519.pub ### THIS IS YOUR PUBLIC KEY - GOES ON REMOTE DEVICES \n\n</pre><h3>Step 2</h3><p>You need to add your public key to the ~/.ssh/authorized_keys file on any server you want to login to.</p><pre>$ cat id_ed25519.pub &gt;&gt; ~/.ssh/authorized_keys&nbsp; &nbsp;#APPENDS THE CONTENTS OF FILE_1 to FILE_2</pre><p>Use WinSCP or SCP to download your private key to your workstation.</p><h3>On Windows</h3><p>Open PuttyGen&nbsp;and load the private key that you downloaded from the VPS.&nbsp; Make sure you select the ED25519 parameter if that is the key type that you generated!</p><p><img data-lazyloaded=\"1\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMDAiIGhlaWdodD0iMjk4IiB2aWV3Qm94PSIwIDAgMzAwIDI5OCI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iI2NmZDRkYiIvPjwvc3ZnPg==\" loading=\"lazy\" class=\"size-medium wp-image-19113 alignnone\" data-src=\"http://lowendbox.com/wp-content/uploads/2019/05/puttygen-300x298.png.webp\" alt=\"\" width=\"300\" height=\"298\" data-srcset=\"https://lowendbox.com/wp-content/uploads/2019/05/puttygen-300x298.png.webp 300w, https://lowendbox.com/wp-content/uploads/2019/05/puttygen-150x150.png.webp 150w, https://lowendbox.com/wp-content/uploads/2019/05/puttygen.png 718w\" data-sizes=\"(max-width: 300px) 100vw, 300px\"><img data-lazyloaded=\"1\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMDAiIGhlaWdodD0iMjk4IiB2aWV3Qm94PSIwIDAgMzAwIDI5OCI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iI2NmZDRkYiIvPjwvc3ZnPg==\" loading=\"lazy\" class=\"alignnone size-medium wp-image-19265\" data-src=\"http://lowendbox.com/wp-content/uploads/2019/05/select-the-right-encryption-algorythm-300x298.png.webp\" alt=\"\" width=\"300\" height=\"298\" data-srcset=\"https://lowendbox.com/wp-content/uploads/2019/05/select-the-right-encryption-algorythm-300x298.png.webp 300w, https://lowendbox.com/wp-content/uploads/2019/05/select-the-right-encryption-algorythm-150x150.png.webp 150w, https://lowendbox.com/wp-content/uploads/2019/05/select-the-right-encryption-algorythm.png 718w\" data-sizes=\"(max-width: 300px) 100vw, 300px\"><img data-lazyloaded=\"1\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMDAiIGhlaWdodD0iMTk3IiB2aWV3Qm94PSIwIDAgMzAwIDE5NyI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iI2NmZDRkYiIvPjwvc3ZnPg==\" loading=\"lazy\" class=\"alignnone size-medium wp-image-19266\" data-src=\"http://lowendbox.com/wp-content/uploads/2019/05/successful-import-300x197.png.webp\" alt=\"\" width=\"300\" height=\"197\" data-srcset=\"https://lowendbox.com/wp-content/uploads/2019/05/successful-import-300x197.png.webp 300w, https://lowendbox.com/wp-content/uploads/2019/05/successful-import.png 468w\" data-sizes=\"(max-width: 300px) 100vw, 300px\"></p><p>Then hit <strong>Save Private Key</strong>, save the id_ed25519.ppk key file somewhere smart.</p><p>Open Putty and navigate to SSH &gt; Auth in the left hand menu, browse to and load your private key file</p><p><img data-lazyloaded=\"1\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMDAiIGhlaWdodD0iMjk2IiB2aWV3Qm94PSIwIDAgMzAwIDI5NiI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iI2NmZDRkYiIvPjwvc3ZnPg==\" loading=\"lazy\" class=\"alignnone size-medium wp-image-19264\" data-src=\"http://lowendbox.com/wp-content/uploads/2019/05/putty-load-private-key-300x296.png.webp\" alt=\"\" width=\"300\" height=\"296\" data-srcset=\"https://lowendbox.com/wp-content/uploads/2019/05/putty-load-private-key-300x296.png.webp 300w, https://lowendbox.com/wp-content/uploads/2019/05/putty-load-private-key.png 677w\" data-sizes=\"(max-width: 300px) 100vw, 300px\"></p><p>Go back to Session and save the session so that you don\u2019t have to specify the key file over and over again like a robot.</p><p class=\"grid--cell fs-headline1 fl1 ow-break-word\">If your session throws an error \u201cUnable to load private key file .ppk (file format error)\u201d your version of putty probably is too old and doesn\u2019t support ED25519.</p><p>&nbsp;</p><h3>On Linux / OSX</h3><p>Downloading your keys on your linux workstation is pretty simple.</p><p>user@workstation:~$ scp user@192.168.1.101~/.ssh/id_ed25519 ~/.ssh/<br>\nuser@192.168.1.101\u2019s password:<br>\nid_ed25519 100% 411 15.4KB/s 00:00<br>\nuser@workstation:~$ ssh root@192.168.1.101&nbsp; &nbsp; #type your passphrase and boom you are in<br>\nWelcome to Ubuntu 18.04.2 LTS (GNU/Linux 4.15.0-38-generic x86_64)</p><h2></h2><h2>References</h2><ul><li>https://www.openssh.com/history.html</li><li>https://www.ssh.com/ssh/</li><li>https://ed25519.cr.yp.to/ if you are wondering what ED25519 is</li></ul><div id=\"post-19017\" class=\"post-19017 post type-post status-publish format-standard hentry category-tutorials\"><div class=\"storycontent tablelook\"><h3>About the Author</h3><p>Sean Richards, CISSP, &nbsp;is a 20 year&nbsp; Technology enthusiast and security practitioner.&nbsp; &nbsp;Loves family, animals, BBQ, and bicycles.<br>\n<a href=\"https://www.linkedin.com/in/seangrichards/\">https://www.linkedin.com/in/seangrichards/</a><br>\n<a href=\"https://github.com/seangrichards/\">https://github.com/seangrichards/</a><br>\n<a href=\"https://twitter.com/seangrichards\">https://twitter.com/seangrichards</a></p></div><div class=\"feedback\"></div></div>"}