{"id": "39", "post": "<div class=\"post-39 post type-post status-publish format-standard hentry category-tutorials tag-mysql\" id=\"post-39\"><h2 class=\"storytitle\"><a href=\"https://lowendbox.com/blog/reducing-mysql-memory-usage-for-low-end-boxes/\" rel=\"bookmark\">Reducing MySQL Memory Usage for Low End Boxes</a></h2><div class=\"meta\"><img data-lazyloaded=\"1\" src=\"/media/icons/tag_green.png\" data-src=\"/media/icons/tag_green.png\" alt=\"Tags: \" class=\"litespeed-loaded\" data-was-processed=\"true\"> <a href=\"https://lowendbox.com/tag/mysql/\" rel=\"tag\">mysql</a> <img data-lazyloaded=\"1\" src=\"https://lowendbox.com/media/icons/calendar.png\" data-src=\"https://lowendbox.com/media/icons/calendar.png\" alt=\"Date/Time: \" class=\"litespeed-loaded\" data-was-processed=\"true\"> April 15, 2008 @ 1:46 am, by LowEndAdmin</div><div class=\"storycontent tablelook\"><p><a href=\"http://www.mysql.com/\">MySQL</a> is pretty much the <em>de facto</em> database engine for most open source scripts, and it is almost-always installed on hosted servers. However the default MySQL installation on Debian/Ubuntu takes around 25MB RSS on a cold-start. Well, not too bad I guess, <em>unless</em> you are running a tight ship with only 64MB of total memory. Depending on how important MySQL is to your stack, you might wish to bring the memory usage down so you can fit other applications in memory.</p><p>The easiest way is to start from an existing configuration file to bring down the memory usage, and then tune it to bring back adequate performance. On Debian/Ubuntu you might wish to replace your installed <code>/etc/mysql/my.cnf</code> with <code>my-small.cnf</code> that can be found in <code>/usr/share/doc/my-server-5.0/examples</code>. I am also attaching a <a href=\"/media/mysql/my-lxadmin-centos.cnf\">my.cnf here</a> that is taken out from CentOS 4 installation of <a href=\"http://lxlabs.com/software/lxadmin-sse/\">LxAdmin</a> (which has been famous for its low-memory foot print). It is pretty much based on <code>my-small.cnf</code>. Some important notes:</p><ul><li><code>skip-bdb</code> and <code>skip-innodb</code> are added, so you don\u2019t get BSD DB nor InnoDB support. BSD DB support in MySQL is pretty much obsolete, and many open source scripts don\u2019t rely on the presence of InnoDB. A low end VPS is not likely to enjoy the concurrency InnoDB is offering anyway. Transaction and referential integrity? Real Programmers<sup>TM</sup> write their own rollback routines :)</li><li><code>key_buffer</code> is <em>only</em> 16K which is far from enough. <code>key_buffer</code> is pretty much one of the most important parameter for MyISAM tables and I usually bump it up to at least 1MB. The same can be said about <code>table_cache</code> \u2014 4 is way too small. A WordPress page will likely touch 10 tables, and much more for apps like Drupal or MediaWiki.</li><li>Query cache <em>might</em> be a good thing if you intend to run a busy site on such a low end VPS (provided that it has small data set, mostly read, like blogs, news sites, etc). I have my <code>query_cache_limit</code> set to 256K and <code>query_cache_size</code> set to 4M here.</li></ul><p>After a few adjustment you should be able to start mysqld at around 5-6MB RSS. You might need to check the runtime variables to monitor the performance and how everything works out.</p><p class=\"dpsp-share-text\"></p><div id=\"dpsp-content-bottom\" class=\"dpsp-content-wrapper dpsp-shape-rounded dpsp-column-auto dpsp-has-spacing dpsp-no-labels dpsp-show-on-mobile dpsp-button-style-1 dpsp-has-icon-background dpsp-has-button-background dpsp-show-total-share-count dpsp-show-total-share-count-after\"><ul class=\"dpsp-networks-btns-wrapper dpsp-networks-btns-content dpsp-has-button-icon-animation\"><li><a rel=\"nofollow\" href=\"https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Flowendbox.com%2Fblog%2Freducing-mysql-memory-usage-for-low-end-boxes%2F&amp;t=Reducing%20MySQL%20Memory%20Usage%20for%20Low%20End%20Boxes\" class=\"dpsp-network-btn dpsp-facebook dpsp-no-label dpsp-first\" title=\"Share on Facebook\"><span class=\"dpsp-network-icon\"></span><span class=\"dpsp-network-label-wrapper\"></span></a></li><li><a rel=\"nofollow\" href=\"https://twitter.com/intent/tweet?text=Reducing%20MySQL%20Memory%20Usage%20for%20Low%20End%20Boxes&amp;url=https%3A%2F%2Flowendbox.com%2Fblog%2Freducing-mysql-memory-usage-for-low-end-boxes%2F&amp;via=LowEndNetwork\" class=\"dpsp-network-btn dpsp-twitter dpsp-no-label\" title=\"Share on Twitter\"><span class=\"dpsp-network-icon\"></span><span class=\"dpsp-network-label-wrapper\"></span></a></li><li><a rel=\"nofollow\" href=\"https://www.linkedin.com/shareArticle?url=https%3A%2F%2Flowendbox.com%2Fblog%2Freducing-mysql-memory-usage-for-low-end-boxes%2F&amp;title=Reducing%20MySQL%20Memory%20Usage%20for%20Low%20End%20Boxes&amp;mini=true\" class=\"dpsp-network-btn dpsp-linkedin dpsp-no-label dpsp-last\" title=\"Share on LinkedIn\"><span class=\"dpsp-network-icon\"></span><span class=\"dpsp-network-label-wrapper\"></span></a></li></ul><div class=\"dpsp-total-share-wrapper\"><span class=\"dpsp-icon-total-share\"></span><span class=\"dpsp-total-share-count\">0</span><span>shares</span></div></div><div class=\"relpost-thumb-wrapper\"><div class=\"relpost-thumb-container\"><h3>Related posts:</h3><div style=\"clear: both\"></div><div style=\"clear: both\"></div><div class=\"relpost-block-container\"><a class=\"relpost-block-single\" href=\"https://lowendbox.com/blog/limitless-hosting-amazing-discounts-on-cpanel-directadmin-web-hosting-and-reseller-hosting/\"><div style=\"width: 150px; height: 215px;\"><div class=\"relpost-block-single-image\" alt=\"Limitless Hosting - Amazing discounts on cPanel/DirectAdmin Web Hosting and Reseller Hosting\" style=\"background: transparent url(https://lowendbox.com/wp-content/uploads/2020/04/leb-centered-small.jpg) no-repeat scroll 0% 0%; width: 150px; height: 150px;\"></div><div class=\"relpost-block-single-text\" style=\"font-family: Arial;  font-size: 12px;  color: #333333;\">Limitless Hosting - Amazing discounts on cPanel/DirectAdmin Web Hosting and Reseller Hosting</div></div></a><a class=\"relpost-block-single\" href=\"https://lowendbox.com/blog/centos-7-lamp-server-tutorial-part-6-moving-to-nginx/\"><div style=\"width: 150px; height: 215px;\"><div class=\"relpost-block-single-image\" alt=\"CentOS 7 LAMP Server Tutorial Part 6: Moving to NGINX\" style=\"background: transparent url(https://lowendbox.com/wp-content/uploads/2019/07/nginx-150x150.jpg) no-repeat scroll 0% 0%; width: 150px; height: 150px;\"></div><div class=\"relpost-block-single-text\" style=\"font-family: Arial;  font-size: 12px;  color: #333333;\">CentOS 7 LAMP Server Tutorial Part 6: Moving to NGINX</div></div></a><a class=\"relpost-block-single\" href=\"https://lowendbox.com/blog/lemp-stack-installation-on-debian-9/\"><div style=\"width: 150px; height: 215px;\"><div class=\"relpost-block-single-image\" alt=\"LEMP Stack Installation on Debian 9\" style=\"background: transparent url(https://lowendbox.com/wp-content/uploads/2020/04/leb-centered-small.jpg) no-repeat scroll 0% 0%; width: 150px; height: 150px;\"></div><div class=\"relpost-block-single-text\" style=\"font-family: Arial;  font-size: 12px;  color: #333333;\">LEMP Stack Installation on Debian 9</div></div></a><a class=\"relpost-block-single\" href=\"https://lowendbox.com/blog/how-to-install-moodle-on-ubuntu-18-04/\"><div style=\"width: 150px; height: 215px;\"><div class=\"relpost-block-single-image\" alt=\"How to Install Moodle on Ubuntu 18.04\" style=\"background: transparent url(https://lowendbox.com/wp-content/uploads/2019/07/moodle-vector-logo-150x150.png) no-repeat scroll 0% 0%; width: 150px; height: 150px;\"></div><div class=\"relpost-block-single-text\" style=\"font-family: Arial;  font-size: 12px;  color: #333333;\">How to Install Moodle on Ubuntu 18.04</div></div></a></div><div style=\"clear: both\"></div></div></div><div id=\"author-bio-box\" style=\"background: #f8f8f8; border-top: 2px solid #cccccc; border-bottom: 2px solid #cccccc; color: #333333\"><h3><a style=\"color: #555555;\" href=\"https://lowendbox.com/blog/author/admin/\" title=\"All posts by LowEndAdmin\" rel=\"author\">LowEndAdmin</a></h3><div class=\"bio-gravatar\"><img data-lazyloaded=\"1\" src=\"https://secure.gravatar.com/avatar/11a4d9191634a9374eeca7d0e8982ba2?s=70&amp;d=retro&amp;r=pg\" alt=\"\" data-src=\"https://secure.gravatar.com/avatar/11a4d9191634a9374eeca7d0e8982ba2?s=70&amp;d=retro&amp;r=pg\" data-srcset=\"https://secure.gravatar.com/avatar/11a4d9191634a9374eeca7d0e8982ba2?s=140&amp;d=retro&amp;r=pg 2x\" class=\"avatar avatar-70 photo litespeed-loaded\" height=\"70\" width=\"70\" loading=\"lazy\" srcset=\"https://secure.gravatar.com/avatar/11a4d9191634a9374eeca7d0e8982ba2?s=140&amp;d=retro&amp;r=pg 2x\" data-was-processed=\"true\"></div><p class=\"bio-description\">The original owner of LowEndBox known as \"LowEndAdmin\" or \"LEA\" for short founded LowEndBox in 2008 and created the concept of hosting applications on low resource \"Low End Boxes\". After creating the roots of the community that we know today, \"LEA\" stepped aside and allowed others to carry the torch forward.</p></div></div><div class=\"feedback\"></div></div>"}