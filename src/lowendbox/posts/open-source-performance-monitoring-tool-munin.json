{"id": "4345", "post": "<div class=\"post-4345 post type-post status-publish format-standard hentry category-tutorials tag-tutorials-2\" id=\"post-4345\"><h2 class=\"storytitle\"><a href=\"https://lowendbox.com/blog/open-source-performance-monitoring-tool-munin/\" rel=\"bookmark\">Open source server performance monitoring tool: Munin</a></h2><div class=\"meta\"><img data-lazyloaded=\"1\" src=\"/media/icons/tag_green.png\" data-src=\"/media/icons/tag_green.png\" alt=\"Tags: \" class=\"litespeed-loaded\" data-was-processed=\"true\"> <a href=\"https://lowendbox.com/tag/tutorials-2/\" rel=\"tag\">tutorials</a> <img data-lazyloaded=\"1\" src=\"https://lowendbox.com/media/icons/calendar.png\" data-src=\"https://lowendbox.com/media/icons/calendar.png\" alt=\"Date/Time: \" class=\"litespeed-loaded\" data-was-processed=\"true\"> September 14, 2013 @ 7:10 pm, by Maarten Kossen</div><div class=\"storycontent tablelook\"><p style=\"text-align: center;\"><img data-lazyloaded=\"1\" src=\"https://lowendbox.com/wp-content/uploads/2013/05/lowendtutorial.png.webp\" loading=\"lazy\" class=\"alignnone size-full wp-image-3957 litespeed-loaded\" data-src=\"https://lowendbox.com/wp-content/uploads/2013/05/lowendtutorial.png.webp\" alt=\"lowendtutorial\" width=\"271\" height=\"70\" data-was-processed=\"true\"></p><p>Have you ever wished you could monitor the performance of your server <em>after the fact</em>? Or did you ever want to get some statistics of your server, about it\u2019s performance and the amount of resources used? Look no further: Munin is here!</p><p>Munin is a resource monitoring tool that helps you monitor server performance and analyze problems after they happened. Munin uses RRDtools, a data logging and graphing system, for storing and displaying logged data. It\u2019s plug and play and has over 500 plugins available. It\u2019s open source and freely available. In addition to all that, it has networking capabilities so a monitoring master can hold the data for all nodes in a cluster (more on that next week).</p><p><span id=\"more-4345\"></span><br>\nSo, I\u2019m going to show you how to set up and configure <a href=\"http://munin-monitoring.org/\">Munin</a> on a single node and check those graphs. As usual, written for and tested on both CentOS and Ubuntu.</p><h2>Installing Munin on CentOS</h2><p>I\u2019ve assumed the EPEL repository is present.</p><p>To install Munin, simply run:</p><blockquote><p>sudo yum install munin</p></blockquote><p>Depending on what you already have installed, this could pull in a bunch of dependencies, one of them being munin-node. Once the install is complete, Munin is already running and collecting data.</p><p>To have Munin automatically run when CentOS boots, run:</p><blockquote><p>sudo chkconfig munin-node on</p></blockquote><p>And you should be good. Go to the \u2018Configure Munin\u2019 section to check out how to tweak the configuration.</p><h2>Installing Munin on Ubuntu</h2><p>To install Munin, simple run:</p><blockquote><p>sudo apt-get install munin</p></blockquote><p>Depending on what you already have installed, this could pull in a bunch of dependencies, one of them being munin-node. Once the install is complete, Munin is already running and collecting data. Go to the \u2018Configure Munin\u2019 section to check out how to tweak the configuration.</p><h2>Configuring Munin</h2><p>So, with Munin already up and running, what is there to configure? Well, I usually change just one thing: the hostname in the munin configuration. Open up /etc/munin/munin.conf and look for a line like this:</p><blockquote><p>[localhost.localdomain]</p></blockquote><p>Change that line to match your hostname:</p><blockquote><p>[hostname.example.net]</p></blockquote><p>And restart <em>munin-node</em>:</p><p><strong>CentOS</strong></p><blockquote><p>sudo /etc/init.d/munin-node restart</p></blockquote><p><strong>Ubuntu</strong></p><blockquote><p>sudo service munin-node restart</p></blockquote><p>Munin should now write the proper hostname in the logs.</p><p>There\u2019s a lot more configuration options here, amongst which those needed to get a clustered configuration (one node containing all the data and charts for all your servers). If Munin is chewing up too much resources, edit the following setting:</p><blockquote><p>#max_processes 16</p></blockquote><p>Enable it by removing the comment and change the value to 8 or 4 (or even 2):</p><blockquote><p>max_processes 8</p></blockquote><p>Then, restart munin-node again.</p><p>Basically, that\u2019s all that\u2019s needed for a working Munin installation! Easy, wasn\u2019t it?</p><h2>See the results</h2><p>When you\u2019ve just installed Munin, there\u2019s not too much data to see yet. So let it be for at least a day, preferably more, before you check the results. When you\u2019ve done so ( you\u2019re probably still reading, so chances are you\u2019re going to try this anyway ;-) ), there\u2019s two options to see the munin results:</p><ol><li>From your browser</li><li>SFTP to the server with a file browser and open the file</li></ol><h3>1. Browser</h3><p>Munin has one nasty habbit: it pulls in Apache as a dependency. For die-hards out there, just replace it with nginx. I\u2019ve not done so for this example. Munin is available at http://hostname.example.net/munin. On CentOS, it requires a username and password. On Ubuntu, it requires an IP whitelist (or username and password). I\u2019m going to show you how to enable browser access for both.</p><h4>CentOS</h4><p>On CentOS, all you need to do it generate a username and password. To do that, run:</p><blockquote><p>sudo htpasswd /etc/munin/munin-htpasswd mpkossen</p></blockquote><p>Your username is the second argument (mpkossen is my case). This <em>could</em> first ask you for your sudo password and then for a new password (twice). As usual, pick a strong password here.</p><p>If you now surf to http://hostname.example.net/munin you can fill in that username and password and you should be able to see the Munin interface. Click on your hostname and you should see stats and graphs.</p><h4>Ubuntu</h4><p>On Ubuntu, it\u2019s a tad more complicated. You need to disable the IP limit and enable Basic Auth before creating a username and password. Open up /etc/munin/apache.conf (sudo vim&nbsp;/etc/munin/apache.conf) and look for this block (at the top of the file):</p><blockquote><p>Order allow,deny<br>\nAllow from localhost 127.0.0.0/8 ::1<br>\nOptions None</p><p># This file can be used as a .htaccess file, or a part of your apache<br>\n# config file.<br>\n#<br>\n# For the .htaccess file option to work the munin www directory<br>\n# (/var/cache/munin/www) must have \u201cAllowOverride all\u201d or something<br>\n# close to that set.<br>\n#</p><p># AuthUserFile /etc/munin/munin-htpasswd<br>\n# AuthName \u201cMunin\u201d<br>\n# AuthType Basic<br>\n# require valid-user</p></blockquote><p>Change that block to match the following:</p><blockquote><p># Order allow,deny<br>\n# Allow from localhost 127.0.0.0/8 ::1<br>\nOptions None</p><p># This file can be used as a .htaccess file, or a part of your apache<br>\n# config file.<br>\n#<br>\n# For the .htaccess file option to work the munin www directory<br>\n# (/var/cache/munin/www) must have \u201cAllowOverride all\u201d or something<br>\n# close to that set.<br>\n#</p><p>AuthUserFile /etc/munin/munin-htpasswd<br>\nAuthName \u201cMunin\u201d<br>\nAuthType Basic<br>\nrequire valid-user</p></blockquote><p>As you can see, I commented the \u2018Order\u2019 and \u2018Allow\u2019 statements so the IP limit has been lifted. I enabled Basic Auth, so you should be asked for a username and password from now on. Restart Apache to apply these settings:</p><blockquote><p>sudo service apache2 restart</p></blockquote><p>Finally, let\u2019s generate that username and password:</p><blockquote><p>sudo htpasswd -c /etc/munin/munin-htpasswd mpkossen</p></blockquote><p>Your username is the second argument (mpkossen is my case). The -c indicates the htpasswd file needs to be created. Contrary to CentOS, the file doesn\u2019t exist on Ubuntu be default. This <em>could</em> first ask you for your sudo password and then for a new password (twice). As usual, pick a strong password here.</p><p>If you now surf to http://hostname.example.net/munin you can fill in that username and password and you should be able to see the Munin interface. Click on your hostname and you should see stats and graphs.</p><h3>2. SFTP</h3><p>I\u2019m not sure how to do this on Windows or OS X, but on Ubuntu you can just SFTP into a server from Nautilus and browse everything. Munin stores it\u2019s HTML in /var/cache/munin/www. If you open your server in Nautilus (type CTRL + L and put sftp://hostname.example.net in you location bar) and go to that location, you can just double click the \u2018index.html\u2019 and it should pop up in your browser. Depending on the network speed, the browser can hang for a second or so. Once it\u2019s loaded, you should see a whole bunch of graphs for various parts of your system.</p><p>If you can\u2019t go there with your browser, a poor man\u2019s solution is to SFTP the files back to your PC and open them there. Then again, you would need to do that every time you want updated charts.</p><p>For example, this is the memory graph of one of my machines:</p><p><a href=\"https://lowendbox.com/wp-content/uploads/2013/09/memory-month.png\"><img data-lazyloaded=\"1\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0OTciIGhlaWdodD0iMzY0IiB2aWV3Qm94PSIwIDAgNDk3IDM2NCI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iI2NmZDRkYiIvPjwvc3ZnPg==\" loading=\"lazy\" class=\"alignnone size-full wp-image-4347\" data-src=\"https://lowendbox.com/wp-content/uploads/2013/09/memory-month.png\" alt=\"memory-month\" width=\"497\" height=\"364\" data-srcset=\"https://lowendbox.com/wp-content/uploads/2013/09/memory-month.png 497w, https://lowendbox.com/wp-content/uploads/2013/09/memory-month-300x219.png.webp 300w\" data-sizes=\"(max-width: 497px) 100vw, 497px\"></a></p><p>Well, that\u2019s it! You can now monitor your server performance <em>after the fact</em> and keep an eye on things even when you\u2019re not at your PC!</p><h2>Final notes on Munin</h2><p>That\u2019s it for Munin this week. Next week, I\u2019ll show you how to set up one master node where all your other node\u2019s data is being pulled to. In a future guide, I may dive into Munin\u2019s plugin system so you can unleash the full power of Munin on your server park!</p><p><span style=\"text-decoration: underline;\">Up next week</span>: Munin amass, all your server charts in one place!</p><p class=\"dpsp-share-text\"></p><div id=\"dpsp-content-bottom\" class=\"dpsp-content-wrapper dpsp-shape-rounded dpsp-column-auto dpsp-has-spacing dpsp-no-labels dpsp-show-on-mobile dpsp-button-style-1 dpsp-has-icon-background dpsp-has-button-background dpsp-show-total-share-count dpsp-show-total-share-count-after\"><ul class=\"dpsp-networks-btns-wrapper dpsp-networks-btns-content dpsp-has-button-icon-animation\"><li><a rel=\"nofollow\" href=\"https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Flowendbox.com%2Fblog%2Fopen-source-performance-monitoring-tool-munin%2F&amp;t=Open%20source%20server%20performance%20monitoring%20tool%3A%20Munin\" class=\"dpsp-network-btn dpsp-facebook dpsp-no-label dpsp-first\" title=\"Share on Facebook\"><span class=\"dpsp-network-icon\"></span><span class=\"dpsp-network-label-wrapper\"></span></a></li><li><a rel=\"nofollow\" href=\"https://twitter.com/intent/tweet?text=Open%20source%20server%20performance%20monitoring%20tool%3A%20Munin&amp;url=https%3A%2F%2Flowendbox.com%2Fblog%2Fopen-source-performance-monitoring-tool-munin%2F&amp;via=LowEndNetwork\" class=\"dpsp-network-btn dpsp-twitter dpsp-no-label\" title=\"Share on Twitter\"><span class=\"dpsp-network-icon\"></span><span class=\"dpsp-network-label-wrapper\"></span></a></li><li><a rel=\"nofollow\" href=\"https://www.linkedin.com/shareArticle?url=https%3A%2F%2Flowendbox.com%2Fblog%2Fopen-source-performance-monitoring-tool-munin%2F&amp;title=Open%20source%20server%20performance%20monitoring%20tool%3A%20Munin&amp;mini=true\" class=\"dpsp-network-btn dpsp-linkedin dpsp-no-label dpsp-last\" title=\"Share on LinkedIn\"><span class=\"dpsp-network-icon\"></span><span class=\"dpsp-network-label-wrapper\"></span></a></li></ul><div class=\"dpsp-total-share-wrapper\"><span class=\"dpsp-icon-total-share\"></span><span class=\"dpsp-total-share-count\">0</span><span>shares</span></div></div><div class=\"relpost-thumb-wrapper\"><div class=\"relpost-thumb-container\"><h3>Related posts:</h3><div style=\"clear: both\"></div><div style=\"clear: both\"></div><div class=\"relpost-block-container\"><a class=\"relpost-block-single\" href=\"https://lowendbox.com/blog/centos-6-end-of-life-is-coming-upgrade-to-a-new-centos-7-vps-now/\"><div style=\"width: 150px; height: 215px;\"><div class=\"relpost-block-single-image\" alt=\"CentOS 6 End of Life is Coming! Upgrade to a new CentOS 7 VPS Now\" style=\"background: transparent url(https://lowendbox.com/wp-content/uploads/2020/04/centos-6-150x150.png) no-repeat scroll 0% 0%; width: 150px; height: 150px;\"></div><div class=\"relpost-block-single-text\" style=\"font-family: Arial;  font-size: 12px;  color: #333333;\">CentOS 6 End of Life is Coming! Upgrade to a new CentOS 7 VPS Now</div></div></a><a class=\"relpost-block-single\" href=\"https://lowendbox.com/blog/best-web-hosting-control-panels-after-the-cpanel-price-hike/\"><div style=\"width: 150px; height: 215px;\"><div class=\"relpost-block-single-image\" alt=\"Best Web Hosting Control Panels after the cPanel Price Hike\" style=\"background: transparent url(https://lowendbox.com/wp-content/uploads/2020/03/leb-banner-150x150.png) no-repeat scroll 0% 0%; width: 150px; height: 150px;\"></div><div class=\"relpost-block-single-text\" style=\"font-family: Arial;  font-size: 12px;  color: #333333;\">Best Web Hosting Control Panels after the cPanel Price Hike</div></div></a><a class=\"relpost-block-single\" href=\"https://lowendbox.com/blog/how-to-set-up-plex-media-server-on-your-vps/\"><div style=\"width: 150px; height: 215px;\"><div class=\"relpost-block-single-image\" alt=\"How to Set Up Plex Media Server on Your Cheap VPS\" style=\"background: transparent url(https://lowendbox.com/wp-content/uploads/2020/04/how-to-set-up-plex-media-server-on-vps-2-150x150.png) no-repeat scroll 0% 0%; width: 150px; height: 150px;\"></div><div class=\"relpost-block-single-text\" style=\"font-family: Arial;  font-size: 12px;  color: #333333;\">How to Set Up Plex Media Server on Your Cheap VPS</div></div></a><a class=\"relpost-block-single\" href=\"https://lowendbox.com/blog/how-to-create-a-dns-server-on-debian-stretch/\"><div style=\"width: 150px; height: 215px;\"><div class=\"relpost-block-single-image\" alt=\"How To Create a DNS Server On Debian Stretch\" style=\"background: transparent url(https://lowendbox.com/wp-content/uploads/2020/04/leb-centered-small.jpg) no-repeat scroll 0% 0%; width: 150px; height: 150px;\"></div><div class=\"relpost-block-single-text\" style=\"font-family: Arial;  font-size: 12px;  color: #333333;\">How To Create a DNS Server On Debian Stretch</div></div></a></div><div style=\"clear: both\"></div></div></div><div id=\"author-bio-box\" style=\"background: #f8f8f8; border-top: 2px solid #cccccc; border-bottom: 2px solid #cccccc; color: #333333\"><h3><a style=\"color: #555555;\" href=\"https://lowendbox.com/blog/author/mpkossen/\" title=\"All posts by Maarten Kossen\" rel=\"author\">Maarten Kossen</a></h3><div class=\"bio-gravatar\"><img data-lazyloaded=\"1\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3MCIgaGVpZ2h0PSI3MCIgdmlld0JveD0iMCAwIDcwIDcwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjY2ZkNGRiIi8+PC9zdmc+\" alt=\"\" data-src=\"https://secure.gravatar.com/avatar/67eeccea1ee5a1ce2f93adc061f69a5f?s=70&amp;d=retro&amp;r=pg\" data-srcset=\"https://secure.gravatar.com/avatar/67eeccea1ee5a1ce2f93adc061f69a5f?s=140&amp;d=retro&amp;r=pg 2x\" class=\"avatar avatar-70 photo\" height=\"70\" width=\"70\" loading=\"lazy\"></div><p class=\"bio-description\">Maarten Kossen was the administrator of LowEndBox from 2013 to 2015, and brought many ideas and improvements to the website during his leadership. Today he is member of our community and LowEndTalk.</p></div></div><div class=\"feedback\"></div></div>"}