{"id": "8246", "post": "<div class=\"post-8246 post type-post status-publish format-standard hentry category-tutorials tag-debian tag-privacy tag-ssh tag-tor tag-ubuntu\" id=\"post-8246\"><h2 class=\"storytitle\"><a href=\"https://lowendbox.com/blog/using-a-ubuntudebian-vps-to-establish-anonymous-ssh-sessions-with-tor/\" rel=\"bookmark\">Using a Ubuntu/Debian VPS to Establish Anonymous SSH sessions with TOR</a></h2><div class=\"meta\"><img data-lazyloaded=\"1\" src=\"data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=\" data-src=\"/media/icons/tag_green.png\" alt=\"Tags: \"> <a href=\"https://lowendbox.com/tag/debian/\" rel=\"tag\">debian</a>, <a href=\"https://lowendbox.com/tag/privacy/\" rel=\"tag\">privacy</a>, <a href=\"https://lowendbox.com/tag/ssh/\" rel=\"tag\">ssh</a>, <a href=\"https://lowendbox.com/tag/tor/\" rel=\"tag\">tor</a>, <a href=\"https://lowendbox.com/tag/ubuntu/\" rel=\"tag\">ubuntu</a> <img data-lazyloaded=\"1\" src=\"data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=\" data-src=\"https://lowendbox.com/media/icons/calendar.png\" alt=\"Date/Time: \"> December 26, 2015 @ 11:30 pm, by Jarland Donnell</div><div class=\"storycontent tablelook\"><div class=\"page\" title=\"Page 1\"><div class=\"layoutArea\"><div class=\"column\"><p>Perhaps you\u2019ve wanted to set up a virtual private server (VPS) to anonymize HTTP traffic on the TOR network.</p><p>OpenSSH would be the first solution that admins would turn to, given the fact that OpenSSH is the de facto tool used utilize to encrypt connections on a VPS.</p><p>A bigger question remains: How do you port all of your TOR connections through SSH? A few configuration changes must be made. Also, a proxy must be established in order to achieve an anonymous SSH session with TOR.</p><p><em>Luckily, all of this is really easy to configure.</em></p><p>In case you haven\u2019t installed TOR yet, you may want to go ahead and do so. The instructions for installing TOR has been published numerous times online. Here is a recap of how to get TOR installed:</p><p><span id=\"more-8246\"></span></p><p><strong>Refresher on Installing TOR</strong></p><p>If TOR isn\u2019t available in your repository, you must take steps in order to ensure that it is available for you to install.</p><p>If you can confirm that TOR is already available for you to install, you may skip to the section and proceed to the section titled, \u201cOne Liner for Updating Repos and Installing TOR.\u201d</p><p><strong>If TOR Isn\u2019t Available in your Repository</strong></p><p>You would want to open /etc/apt/sources.list and add the following line.</p><blockquote><p>deb http://deb.torproject.org/torproject.org DISTRONAME main</p></blockquote><p>Note: the DISTRONAME in caps needs to be replaced with your distribution\u2019s name. For example, Lenny, Squeeze, etc.</p><p><strong>Install the PGP Key</strong></p><p>Experts recommend that you install a PGP key to ensure that the repo is authorized. In a terminal session, type:</p><blockquote><p>apt-key adv \u2013recv-keys \u2013keyserver subkeys.pgp.net 0x94C09C7F</p></blockquote><p>Next, you are ready to update your repositories and get TOR installed.</p><p><strong>One Liner for Updating Repos and Installing TOR</strong></p><blockquote><p>apt-get update &amp;&amp; apt-get install -y tor</p></blockquote></div></div></div><div class=\"page\" title=\"Page 2\"><div class=\"layoutArea\"><div class=\"column\"><p>You must now install the proxy we discussed above, which can be done using the following command at the terminal:</p><blockquote><p>apt-get install -y connect-proxy</p></blockquote><p><strong>But Wait, There\u2019s More: Configuring OpenSSH to Work with TOR</strong></p><p>At this point in the tutorial, you have everything in place. Now it is time to make OpenSSH and TOR work seamlessly.</p><p>Most experts do not recommend setting up OpenSSH to use TOR for all connections. If you wish to do so, you\u2019d open your ~/.ssh/config file and add this to the top of the file:</p><blockquote><p>Host *<br>\nCheckHostIP no<br>\nCompression yes<br>\nProtocol 2<br>\nProxyCommand connect -4 -S localhost:9050 $(tor-resolve %h localhost:9050) %p</p></blockquote><p>Most of those who set up their VPS to create anonymous SSH session with TOR will only want specific connection types to be tunneled in this fashion. To define specific connections, you\u2019d open your ~/.ssh/config file and add this text to the top of the file:</p><blockquote><p>Host YOURDOMAINNAME<br>\nHostName YOURDOMAINNAME.COM<br>\nUser YOURACCOUNT<br>\nCheckHostIP no<br>\nCompression yes<br>\nProtocol 2<br>\nProxyCommand connect -4 -S localhost:9050 $(tor-resolve %h localhost:9050) %p</p></blockquote><p>Note: In the above text, you\u2019ll want to change YOURDOMAINNAME and YOURACCOUNT to match the appropriate values for your environment.</p><p><strong>Conclusion</strong></p><p>That\u2019s the general gist of setting up a VPS to create an anonymous SSH session with TOR.</p><p>When you set up this type of service, we remind you to only do so within the laws and legal regulatory framework in your area. You should only use a VPS to create anonymous SSH tunnels with TOR to conduct lawful activities.</p><p><em>(This post was written by a contributor, not by the person posting it)</em></p></div></div></div><p class=\"dpsp-share-text\"></p><div id=\"dpsp-content-bottom\" class=\"dpsp-content-wrapper dpsp-shape-rounded dpsp-column-auto dpsp-has-spacing dpsp-no-labels dpsp-show-on-mobile dpsp-button-style-1 dpsp-has-icon-background dpsp-has-button-background dpsp-show-total-share-count dpsp-show-total-share-count-after\"><ul class=\"dpsp-networks-btns-wrapper dpsp-networks-btns-content dpsp-has-button-icon-animation\"><li><a rel=\"nofollow\" href=\"https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Flowendbox.com%2Fblog%2Fusing-a-ubuntudebian-vps-to-establish-anonymous-ssh-sessions-with-tor%2F&amp;t=Using%20a%20Ubuntu%2FDebian%20VPS%20to%20Establish%20Anonymous%20SSH%20sessions%20with%20TOR\" class=\"dpsp-network-btn dpsp-facebook dpsp-no-label dpsp-first\" title=\"Share on Facebook\"><span class=\"dpsp-network-icon\"></span><span class=\"dpsp-network-label-wrapper\"></span></a></li><li><a rel=\"nofollow\" href=\"https://twitter.com/intent/tweet?text=Using%20a%20Ubuntu%2FDebian%20VPS%20to%20Establish%20Anonymous%20SSH%20sessions%20with%20TOR&amp;url=https%3A%2F%2Flowendbox.com%2Fblog%2Fusing-a-ubuntudebian-vps-to-establish-anonymous-ssh-sessions-with-tor%2F&amp;via=LowEndNetwork\" class=\"dpsp-network-btn dpsp-twitter dpsp-no-label\" title=\"Share on Twitter\"><span class=\"dpsp-network-icon\"></span><span class=\"dpsp-network-label-wrapper\"></span></a></li><li><a rel=\"nofollow\" href=\"https://www.linkedin.com/shareArticle?url=https%3A%2F%2Flowendbox.com%2Fblog%2Fusing-a-ubuntudebian-vps-to-establish-anonymous-ssh-sessions-with-tor%2F&amp;title=Using%20a%20Ubuntu%2FDebian%20VPS%20to%20Establish%20Anonymous%20SSH%20sessions%20with%20TOR&amp;mini=true\" class=\"dpsp-network-btn dpsp-linkedin dpsp-no-label dpsp-last\" title=\"Share on LinkedIn\"><span class=\"dpsp-network-icon\"></span><span class=\"dpsp-network-label-wrapper\"></span></a></li></ul><div class=\"dpsp-total-share-wrapper\"><span class=\"dpsp-icon-total-share\"></span><span class=\"dpsp-total-share-count\">0</span><span>shares</span></div></div><div class=\"relpost-thumb-wrapper\"><div class=\"relpost-thumb-container\"><h3>Related posts:</h3><div style=\"clear: both\"></div><div style=\"clear: both\"></div><div class=\"relpost-block-container\"><a class=\"relpost-block-single\" href=\"https://lowendbox.com/blog/generating-and-using-ssh-keys-part-3/\"><div style=\"width: 150px; height: 215px;\"><div class=\"relpost-block-single-image\" alt=\"Generating and Using SSH Keys, Part 3\" style=\"background: transparent url(https://lowendbox.com/wp-content/uploads/2020/04/how-to-secure-wordpress-site-p3-150x150.png) no-repeat scroll 0% 0%; width: 150px; height: 150px;\"></div><div class=\"relpost-block-single-text\" style=\"font-family: Arial;  font-size: 12px;  color: #333333;\">Generating and Using SSH Keys, Part 3</div></div></a><a class=\"relpost-block-single\" href=\"https://lowendbox.com/blog/generating-and-using-ssh-keys-part-2/\"><div style=\"width: 150px; height: 215px;\"><div class=\"relpost-block-single-image\" alt=\"Generating and Using SSH Keys, Part 2\" style=\"background: transparent url(https://lowendbox.com/wp-content/uploads/2020/04/how-to-secure-wordpress-site-p2-150x150.png) no-repeat scroll 0% 0%; width: 150px; height: 150px;\"></div><div class=\"relpost-block-single-text\" style=\"font-family: Arial;  font-size: 12px;  color: #333333;\">Generating and Using SSH Keys, Part 2</div></div></a><a class=\"relpost-block-single\" href=\"https://lowendbox.com/blog/generating-and-using-ssh-keys-part-1/\"><div style=\"width: 150px; height: 215px;\"><div class=\"relpost-block-single-image\" alt=\"Generating and Using SSH Keys, Part 1\" style=\"background: transparent url(https://lowendbox.com/wp-content/uploads/2020/04/how-to-secure-wordpress-site-p1-150x150.png) no-repeat scroll 0% 0%; width: 150px; height: 150px;\"></div><div class=\"relpost-block-single-text\" style=\"font-family: Arial;  font-size: 12px;  color: #333333;\">Generating and Using SSH Keys, Part 1</div></div></a><a class=\"relpost-block-single\" href=\"https://lowendbox.com/blog/how-to-run-a-tor-node-on-your-vps/\"><div style=\"width: 150px; height: 215px;\"><div class=\"relpost-block-single-image\" alt=\"How to Run a TOR Node on Your VPS\" style=\"background: transparent url(https://lowendbox.com/wp-content/uploads/2020/07/tor2-150x150.png) no-repeat scroll 0% 0%; width: 150px; height: 150px;\"></div><div class=\"relpost-block-single-text\" style=\"font-family: Arial;  font-size: 12px;  color: #333333;\">How to Run a TOR Node on Your VPS</div></div></a></div><div style=\"clear: both\"></div></div></div><div id=\"author-bio-box\" style=\"background: #f8f8f8; border-top: 2px solid #cccccc; border-bottom: 2px solid #cccccc; color: #333333\"><h3><a style=\"color: #555555;\" href=\"https://lowendbox.com/blog/author/jarland/\" title=\"All posts by Jarland Donnell\" rel=\"author\">Jarland Donnell</a></h3><div class=\"bio-gravatar\"><img data-lazyloaded=\"1\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3MCIgaGVpZ2h0PSI3MCIgdmlld0JveD0iMCAwIDcwIDcwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjY2ZkNGRiIi8+PC9zdmc+\" alt=\"\" data-src=\"https://secure.gravatar.com/avatar/dc84c83792d2153562104e1830035d6c?s=70&amp;d=retro&amp;r=pg\" data-srcset=\"https://secure.gravatar.com/avatar/dc84c83792d2153562104e1830035d6c?s=140&amp;d=retro&amp;r=pg 2x\" class=\"avatar avatar-70 photo\" height=\"70\" width=\"70\" loading=\"lazy\"></div><p class=\"bio-description\">Jarland Donnell was the administrator of LowEndBox from 2015 to 2016 and continues to be an active member of our community on LowEndTalk.</p></div></div><div class=\"feedback\"></div></div>"}