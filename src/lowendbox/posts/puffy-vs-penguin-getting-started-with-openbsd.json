{"id": "23186", "post": "<div class=\"post-23186 post type-post status-publish format-standard hentry category-tutorials tag-freebsd tag-openbsd tag-openbsd-vs-freebsd tag-tutorial\" id=\"post-23186\"><h2 class=\"storytitle\"><a href=\"https://lowendbox.com/blog/puffy-vs-penguin-getting-started-with-openbsd/\" rel=\"bookmark\">Puffy vs. Penguin: Getting Started With OpenBSD</a></h2><div class=\"meta\"><img data-lazyloaded=\"1\" src=\"/media/icons/tag_green.png\" data-src=\"/media/icons/tag_green.png\" alt=\"Tags: \" class=\"litespeed-loaded\" data-was-processed=\"true\"> <a href=\"https://lowendbox.com/tag/freebsd/\" rel=\"tag\">freebsd</a>, <a href=\"https://lowendbox.com/tag/openbsd/\" rel=\"tag\">openbsd</a>, <a href=\"https://lowendbox.com/tag/openbsd-vs-freebsd/\" rel=\"tag\">openbsd vs freebsd</a>, <a href=\"https://lowendbox.com/tag/tutorial/\" rel=\"tag\">tutorial</a> <img data-lazyloaded=\"1\" src=\"https://lowendbox.com/media/icons/calendar.png\" data-src=\"https://lowendbox.com/media/icons/calendar.png\" alt=\"Date/Time: \" class=\"litespeed-loaded\" data-was-processed=\"true\"> March 2, 2021 @ 5:24 am, by raindog308</div><div class=\"storycontent tablelook\"><p><a target=\"_blank\" rel=\"noopener noreferrer\"><img data-lazyloaded=\"1\" src=\"https://lowendbox.com/wp-content/uploads/2020/05/puffy-vs-penguin-openbsd.jpg.webp\" loading=\"lazy\" class=\"screenshot litespeed-loaded\" title=\"Puffy vs Penguin Getting Started With OpenBSD\" data-src=\"https://lowendbox.com/wp-content/uploads/2020/05/puffy-vs-penguin-openbsd.jpg.webp\" alt=\"Puffy vs Penguin Getting Started With OpenBSD\" width=\"416\" height=\"242\" data-was-processed=\"true\"></a>In this tutorial, we\u2019re going to get up and running with OpenBSD on a KVM VPS.</p><h1>What is OpenBSD</h1><p>OpenBSD is one of the three primary BSD-based operating systems. While FreeBSD focuses on x86 architectures and NetBSD focuses on supporting as many architectures as possible, OpenBSD focuses on security and correctness. Many popular programs have come from the OpenBSD project: OpenSSH, OpenNTPD, OpenBGPD, LibreSSL, and others.</p><p>If you\u2019re coming from a Linux background, OpenBSD will be very familiar because they both come from the same two ancestral fountainheads (SystemV and BSD Unix). While there are more differences at a systems programming level (i.e., if you were doing kernel work), the differences for a user or sysadmin are probably not that much greater than moving between CentOS and Debian.</p><p>One notable difference is that everything in OpenBSD is integrated into one source tree. This is very different than Linux, where you have hundreds of independent packages bolted together to form a distribution. Additional software is available through ports, which are similar to packages on other systems.</p><p><span id=\"more-23186\"></span></p><p>OpenBSD\u2019s mascot is Puffy, a pufferfish, whose external spikes symbolize OpenBSD\u2019s zealous commitment to security:</p><p><img data-lazyloaded=\"1\" src=\"https://lowendbox.com/wp-content/uploads/2020/05/Puffy_mascot_openbsd.gif.webp\" loading=\"lazy\" class=\"alignnone size-full wp-image-23198 litespeed-loaded\" data-src=\"https://lowendbox.com/wp-content/uploads/2020/05/Puffy_mascot_openbsd.gif.webp\" alt=\"\" width=\"450\" height=\"388\" data-was-processed=\"true\"></p><h1>Why OpenBSD?</h1><p>OpenBSD offers several advantages:</p><ul><li>The preeminent record on security. The developers continually audit their code, and the project has introduced many important technology advances in this area. Vulnerabilities in the core OpenBSD product are very rare.<br>\nhttps://www.openbsd.org/security.html</li><li>BSD-licensed (not GPL-licensed), which sometimes makes reuse and integration in other systems and products easier.</li><li>Broad platform support (DEC Alpha, HPPA, Sparc, x86, x86-64, and others.)<br>\nhttps://www.openbsd.org/plat.html</li><li>Gorgeous man pages that truly document everything. In the Linux world, if you get a man page, it may be out of date, or it may just be a stub for an info page, or there may simply not be a man page. Some important systems (e.g., systemd) refer users to outside wikis, etc. With OpenBSD, you can truly learn everything you need to know about the system and how to use it from the man pages. In the OpenBSD world, a man page that isn\u2019t accurate is considered a bug.</li></ul><h1>Installing OpenBSD</h1><p>I\u2019m going to be using a VPS at BuyVM, but any KVM should work. OpenBSD needs to be installed from the CDROM. If your provider doesn\u2019t have the OpenBSD CDROM, ask them to <a href=\"https://www.openbsd.org/faq/faq4.html#Download\">download it</a>.</p><p>Be sure your VPS is configured to boot from CD first. Here is the setup in Stallion (the BuyVM control panel):</p><p><img data-lazyloaded=\"1\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI4MDAiIGhlaWdodD0iNTQwIiB2aWV3Qm94PSIwIDAgODAwIDU0MCI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iI2NmZDRkYiIvPjwvc3ZnPg==\" loading=\"lazy\" class=\"alignnone size-full wp-image-23199\" data-src=\"https://lowendbox.com/wp-content/uploads/2020/05/openbsd-1.png.webp\" alt=\"\" width=\"800\" height=\"540\" data-srcset=\"https://lowendbox.com/wp-content/uploads/2020/05/openbsd-1.png.webp 800w, https://lowendbox.com/wp-content/uploads/2020/05/openbsd-1-300x203.png.webp 300w, https://lowendbox.com/wp-content/uploads/2020/05/openbsd-1-768x518.png.webp 768w\" data-sizes=\"(max-width: 800px) 100vw, 800px\"></p><p>Note that I\u2019ve selected the e1000 adapter instead of VirtIO.</p><p>Before you begin, make sure you know your IP address and gateway IP. OpenBSD supports both ipv4 and ipv6. In this tutorial, I\u2019m only using ipv4.</p><p>OpenBSD installs via a non-graphical, old school installer. Here I\u2019ll walk through it:</p><p><img data-lazyloaded=\"1\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI4MDAiIGhlaWdodD0iNDQ0IiB2aWV3Qm94PSIwIDAgODAwIDQ0NCI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iI2NmZDRkYiIvPjwvc3ZnPg==\" loading=\"lazy\" class=\"alignnone size-full wp-image-23200\" data-src=\"https://lowendbox.com/wp-content/uploads/2020/05/openbsd-2.png.webp\" alt=\"\" width=\"800\" height=\"444\" data-srcset=\"https://lowendbox.com/wp-content/uploads/2020/05/openbsd-2.png.webp 800w, https://lowendbox.com/wp-content/uploads/2020/05/openbsd-2-300x167.png.webp 300w, https://lowendbox.com/wp-content/uploads/2020/05/openbsd-2-768x426.png.webp 768w\" data-sizes=\"(max-width: 800px) 100vw, 800px\"></p><p>Here I enter I for install.&nbsp; I\u2019m booting the kernel bsd.rd, which can also be used as a rescue boot (in which case I\u2019d enter S for shell, then proceed to mount filesystems, etc.)</p><p><img data-lazyloaded=\"1\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI4MDAiIGhlaWdodD0iNDQ2IiB2aWV3Qm94PSIwIDAgODAwIDQ0NiI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iI2NmZDRkYiIvPjwvc3ZnPg==\" loading=\"lazy\" class=\"alignnone size-full wp-image-23201\" data-src=\"https://lowendbox.com/wp-content/uploads/2020/05/openbsd-3.png.webp\" alt=\"\" width=\"800\" height=\"446\" data-srcset=\"https://lowendbox.com/wp-content/uploads/2020/05/openbsd-3.png.webp 800w, https://lowendbox.com/wp-content/uploads/2020/05/openbsd-3-300x167.png.webp 300w, https://lowendbox.com/wp-content/uploads/2020/05/openbsd-3-768x428.png.webp 768w\" data-sizes=\"(max-width: 800px) 100vw, 800px\"></p><p>I\u2019ve entered my IPv4 information, gateway, etc., as well as my DNS information.</p><p><img data-lazyloaded=\"1\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI4MDAiIGhlaWdodD0iNDQ3IiB2aWV3Qm94PSIwIDAgODAwIDQ0NyI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iI2NmZDRkYiIvPjwvc3ZnPg==\" loading=\"lazy\" class=\"alignnone size-full wp-image-23202\" data-src=\"https://lowendbox.com/wp-content/uploads/2020/05/openbsd-4.png.webp\" alt=\"\" width=\"800\" height=\"447\" data-srcset=\"https://lowendbox.com/wp-content/uploads/2020/05/openbsd-4.png.webp 800w, https://lowendbox.com/wp-content/uploads/2020/05/openbsd-4-300x168.png.webp 300w, https://lowendbox.com/wp-content/uploads/2020/05/openbsd-4-768x429.png.webp 768w\" data-sizes=\"(max-width: 800px) 100vw, 800px\"></p><p>A classic mistake is to enter \u201cyes\u201d for \u201csetup a user,\u201d at which point OpenBSD will ask you to read more carefully.&nbsp; You enter the username you want.&nbsp; This username will also be setup so it can su to root (see \u201cThe wheel Group\u201d below).</p><p><img data-lazyloaded=\"1\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI4MDAiIGhlaWdodD0iNDQ3IiB2aWV3Qm94PSIwIDAgODAwIDQ0NyI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iI2NmZDRkYiIvPjwvc3ZnPg==\" loading=\"lazy\" class=\"alignnone size-full wp-image-23203\" data-src=\"https://lowendbox.com/wp-content/uploads/2020/05/openbsd-5.png.webp\" alt=\"\" width=\"800\" height=\"447\" data-srcset=\"https://lowendbox.com/wp-content/uploads/2020/05/openbsd-5.png.webp 800w, https://lowendbox.com/wp-content/uploads/2020/05/openbsd-5-300x168.png.webp 300w, https://lowendbox.com/wp-content/uploads/2020/05/openbsd-5-768x429.png.webp 768w\" data-sizes=\"(max-width: 800px) 100vw, 800px\"></p><p>I\u2019ll use the Whole disk for OpenBSD.&nbsp; Note that I\u2019m reusing a VPS that previously ran Linux which is why it shows Linux filesystem info in its fdisk.</p><p><img data-lazyloaded=\"1\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI4MDAiIGhlaWdodD0iNDQ1IiB2aWV3Qm94PSIwIDAgODAwIDQ0NSI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iI2NmZDRkYiIvPjwvc3ZnPg==\" loading=\"lazy\" class=\"alignnone size-full wp-image-23204\" data-src=\"https://lowendbox.com/wp-content/uploads/2020/05/openbsd-6.png.webp\" alt=\"\" width=\"800\" height=\"445\" data-srcset=\"https://lowendbox.com/wp-content/uploads/2020/05/openbsd-6.png.webp 800w, https://lowendbox.com/wp-content/uploads/2020/05/openbsd-6-300x167.png.webp 300w, https://lowendbox.com/wp-content/uploads/2020/05/openbsd-6-768x427.png.webp 768w\" data-sizes=\"(max-width: 800px) 100vw, 800px\"></p><p>I highly recommend you use Auto layout.&nbsp; This allows OpenBSD to divide the filesystems over your disk and add some additional mount-time protections.</p><p><img data-lazyloaded=\"1\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI4MDAiIGhlaWdodD0iNDQ1IiB2aWV3Qm94PSIwIDAgODAwIDQ0NSI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iI2NmZDRkYiIvPjwvc3ZnPg==\" loading=\"lazy\" class=\"alignnone size-full wp-image-23205\" data-src=\"https://lowendbox.com/wp-content/uploads/2020/05/openbsd-7.png.webp\" alt=\"\" width=\"800\" height=\"445\" data-srcset=\"https://lowendbox.com/wp-content/uploads/2020/05/openbsd-7.png.webp 800w, https://lowendbox.com/wp-content/uploads/2020/05/openbsd-7-300x167.png.webp 300w, https://lowendbox.com/wp-content/uploads/2020/05/openbsd-7-768x427.png.webp 768w\" data-sizes=\"(max-width: 800px) 100vw, 800px\"></p><p>I\u2019m install from the cd, though OpenBSD does support installing from the network.&nbsp; I recommend selecting all sets (the default).&nbsp; Even if you are not planning to run X-windows, it\u2019s handy to have the sets installed in case you need something from them for a dependency.</p><p>I answered \u201cyes\u201d to the \u201ccontinue without verification\u201d question, since I\u2019m installing from a cd.&nbsp; If you are installing from the network, OpenBSD would fetch and verify the sets for you.</p><p><img data-lazyloaded=\"1\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI4MDAiIGhlaWdodD0iNDQzIiB2aWV3Qm94PSIwIDAgODAwIDQ0MyI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iI2NmZDRkYiIvPjwvc3ZnPg==\" loading=\"lazy\" class=\"alignnone size-full wp-image-23206\" data-src=\"https://lowendbox.com/wp-content/uploads/2020/05/openbsd-8.png.webp\" alt=\"\" width=\"800\" height=\"443\" data-srcset=\"https://lowendbox.com/wp-content/uploads/2020/05/openbsd-8.png.webp 800w, https://lowendbox.com/wp-content/uploads/2020/05/openbsd-8-300x166.png.webp 300w, https://lowendbox.com/wp-content/uploads/2020/05/openbsd-8-768x425.png.webp 768w\" data-sizes=\"(max-width: 800px) 100vw, 800px\"></p><p>There are no further sets, so I said \u201cdone\u201d (return).</p><p><img data-lazyloaded=\"1\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI4MDAiIGhlaWdodD0iNDQ2IiB2aWV3Qm94PSIwIDAgODAwIDQ0NiI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iI2NmZDRkYiIvPjwvc3ZnPg==\" loading=\"lazy\" class=\"alignnone size-full wp-image-23207\" data-src=\"https://lowendbox.com/wp-content/uploads/2020/05/openbsd-9.png.webp\" alt=\"\" width=\"800\" height=\"446\" data-srcset=\"https://lowendbox.com/wp-content/uploads/2020/05/openbsd-9.png.webp 800w, https://lowendbox.com/wp-content/uploads/2020/05/openbsd-9-300x167.png.webp 300w, https://lowendbox.com/wp-content/uploads/2020/05/openbsd-9-768x428.png.webp 768w\" data-sizes=\"(max-width: 800px) 100vw, 800px\"></p><p>OpenBSD has done some final touches and is now ready to boot.&nbsp; Here I selected (H)alt.&nbsp; Once the VPS was shut down, I went back to the control panel and changed the boot order so that HDD booted before CDROM, then power-cycled the VPS.</p><p><img data-lazyloaded=\"1\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI4MDAiIGhlaWdodD0iNDY1IiB2aWV3Qm94PSIwIDAgODAwIDQ2NSI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iI2NmZDRkYiIvPjwvc3ZnPg==\" loading=\"lazy\" class=\"alignnone size-full wp-image-23208\" data-src=\"https://lowendbox.com/wp-content/uploads/2020/05/openbsd-10.png.webp\" alt=\"\" width=\"800\" height=\"465\" data-srcset=\"https://lowendbox.com/wp-content/uploads/2020/05/openbsd-10.png.webp 800w, https://lowendbox.com/wp-content/uploads/2020/05/openbsd-10-300x174.png.webp 300w, https://lowendbox.com/wp-content/uploads/2020/05/openbsd-10-768x446.png.webp 768w\" data-sizes=\"(max-width: 800px) 100vw, 800px\"></p><p>Ah, that glorious white-on-blue text!</p><p><img data-lazyloaded=\"1\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI4MDAiIGhlaWdodD0iNDYyIiB2aWV3Qm94PSIwIDAgODAwIDQ2MiI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iI2NmZDRkYiIvPjwvc3ZnPg==\" loading=\"lazy\" class=\"alignnone size-full wp-image-23209\" data-src=\"https://lowendbox.com/wp-content/uploads/2020/05/openbsd-11.png.webp\" alt=\"\" width=\"800\" height=\"462\" data-srcset=\"https://lowendbox.com/wp-content/uploads/2020/05/openbsd-11.png.webp 800w, https://lowendbox.com/wp-content/uploads/2020/05/openbsd-11-300x173.png.webp 300w, https://lowendbox.com/wp-content/uploads/2020/05/openbsd-11-768x444.png.webp 768w\" data-sizes=\"(max-width: 800px) 100vw, 800px\"></p><p>And we\u2019re booted.&nbsp; Note that on the very first boot, OpenBSD will do some special things like check for firmware.&nbsp; It\u2019s also noted that there are some patches available, which we\u2019ll take care of below.</p><h1>Logging In</h1><p>After logging in as the user created, you\u2019ll find yourself in a familiar Unix environment. The shell in use is OpenBSD\u2019s improved ksh, which for most purposes behaves just like bash, which is more common on Linux. If you really want bash, it can be installed from ports (see below).</p><p>Let\u2019s see what\u2019s running:</p><pre>openbsd$ ps -ef\nps: unknown option -- f\nusage: ps [-AaceHhjkLlmrSTuvwx] [-M core] [-N system] [-O fmt] [-o fmt] [-p pid]\n[-t tty] [-U username] [-W swap]</pre><p>Oops! This isn\u2019t Linux. The flags to \u2018ps\u2019 are one of the areas where System V and BSD Unices traditionally vary.</p><p><img data-lazyloaded=\"1\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI4MDAiIGhlaWdodD0iNjMzIiB2aWV3Qm94PSIwIDAgODAwIDYzMyI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iI2NmZDRkYiIvPjwvc3ZnPg==\" loading=\"lazy\" class=\"alignnone size-full wp-image-23212\" data-src=\"https://lowendbox.com/wp-content/uploads/2020/05/openbsd-12.png.webp\" alt=\"\" width=\"800\" height=\"633\" data-srcset=\"https://lowendbox.com/wp-content/uploads/2020/05/openbsd-12.png.webp 800w, https://lowendbox.com/wp-content/uploads/2020/05/openbsd-12-300x237.png.webp 300w, https://lowendbox.com/wp-content/uploads/2020/05/openbsd-12-768x608.png.webp 768w\" data-sizes=\"(max-width: 800px) 100vw, 800px\"></p><p>Note that many services are run with underbar accounts (_smtpd, _sndio, etc.) This privilege separation enhances security.</p><p>Here are the filesystems:</p><pre>openbsd$ df\nFilesystem 512-blocks Used Avail Capacity Mounted on\n/dev/sd0a 2397788 172292 2105608 8% /\n/dev/sd0e 4122108 36 3915968 0% /home\n/dev/sd0d 6186460 2365624 3511516 40% /usr</pre><p>Even more interesting is the output of mount(1):</p><pre>openbsd# mount\n/dev/sd0a on / type ffs (local)\n/dev/sd0e on /home type ffs (local, nodev, nosuid)\n/dev/sd0d on /usr type ffs (local, nodev, wxallowed)</pre><p>OpenBSD has put some safeguards in place. Your home directory doesn\u2019t need device nodes, for example. \u2018ffs\u2019 is the Fast File System, which is the standard OpenBSD filesystem.</p><p>Since I\u2019m on a VM, I\u2019m not using RAID to protect disks, but if you want to do so, the <a href=\"https://www.openbsd.org/faq/faq14.html#softraid\">softraid</a> subsystem is available.</p><h1>Patching OpenBSD</h1><p>Remember when we booted that we saw patches were available. To list available patches, use the syspatch command:</p><pre>openbsd# syspatch -c\n001_bpf\n002_ber\n003_bgpd\n004_net80211\n005_sysupgrade\n006_ifioctl\n007_inteldrm\n008_mesa\n009_mesaxlock\n010_libcauth\n011_xenodm\n012_suauth\n013_ldso\n015_ftp\n016_ripd\n017_inteldrmctx\n018_smtpd_tls\n019_smtpd_exec\n020_vmm_pvclock\n021_smtpd_envelope\n022_sysctl\n023_sosplice\n024_dhcpd\n025_drm\n026_ospfd_lsa\n027_wscons</pre><p>Each of these corresponds to a <a href=\"https://www.openbsd.org/errata66.html\">listed errata</a>.</p><p>To download and apply these patches, run syspatch without arguments:</p><pre>openbsd# syspatch\nGet/Verify syspatch66-001_bpf.tgz 100% |****************| 102 KB 00:00\nInstalling patch 001_bpf\nGet/Verify syspatch66-002_ber.tgz 100% |****************| 660 KB 00:00\nInstalling patch 002_ber\nGet/Verify syspatch66-003_bgpd.tgz 100% |***************| 181 KB 00:00\nInstalling patch 003_bgpd\nGet/Verify syspatch66-004_net8021... 100% |*************| 64839 00:00\nInstalling patch 004_net80211\nGet/Verify syspatch66-005_sysupgr... 100% |*************| 3023 00:00\nInstalling patch 005_sysupgrade\nGet/Verify syspatch66-006_ifioctl... 100% |*************| 381 KB 00:00\nInstalling patch 006_ifioctl\nGet/Verify syspatch66-007_inteldr... 100% |*************| 21468 KB 00:02\nInstalling patch 007_inteldrm\nGet/Verify syspatch66-008_mesa.tgz 100% |***************| 5598 KB 00:01\nInstalling patch 008_mesa\nGet/Verify syspatch66-009_mesaxlo... 100% |*************| 2036 KB 00:00\nInstalling patch 009_mesaxlock\nGet/Verify syspatch66-010_libcaut... 100% |*************| 20185 KB 00:03\nInstalling patch 010_libcauth\nGet/Verify syspatch66-011_xenodm.tgz 100% |*************| 45914 00:00\nInstalling patch 011_xenodm\nGet/Verify syspatch66-012_suauth.tgz 100% |*************| 7997 00:00\nInstalling patch 012_suauth\nGet/Verify syspatch66-013_ldso.tgz 100% |***************| 295 KB 00:00\nInstalling patch 013_ldso\nGet/Verify syspatch66-015_ftp.tgz 100% |****************| 65164 00:00\nInstalling patch 015_ftp\nGet/Verify syspatch66-016_ripd.tgz 100% |***************| 45685 00:00\nInstalling patch 016_ripd\nGet/Verify syspatch66-017_inteldr... 100% |*************| 268 KB 00:00\nInstalling patch 017_inteldrmctx\nGet/Verify syspatch66-018_smtpd_t... 100% |*************| 224 KB 00:00\nInstalling patch 018_smtpd_tls\nGet/Verify syspatch66-019_smtpd_e... 100% |*************| 224 KB 00:00\nInstalling patch 019_smtpd_exec\nGet/Verify syspatch66-020_vmm_pvc... 100% |*************| 178 KB 00:00\nInstalling patch 020_vmm_pvclock\nGet/Verify syspatch66-021_smtpd_e... 100% |*************| 317 KB 00:00\nInstalling patch 021_smtpd_envelope\nGet/Verify syspatch66-022_sysctl.tgz 100% |*************| 162 KB 00:00\nInstalling patch 022_sysctl\nGet/Verify syspatch66-023_sosplic... 100% |*************| 101 KB 00:00\nInstalling patch 023_sosplice\nGet/Verify syspatch66-024_dhcpd.tgz 100% |**************| 58786 00:00\nInstalling patch 024_dhcpd\nGet/Verify syspatch66-025_drm.tgz 100% |****************| 1131 KB 00:00\nInstalling patch 025_drm\nGet/Verify syspatch66-026_ospfd_l... 100% |*************| 87802 00:00\nInstalling patch 026_ospfd_lsa\nGet/Verify syspatch66-027_wscons.tgz 100% |*************| 118 KB 00:00\nInstalling patch 027_wscons\nRelinking to create unique kernel... done; reboot to load the new kernel\nErrata can be reviewed under /var/syspatch\nopenbsd# reboot</pre><h1>Enabling/Configuring Services</h1><p>OpenBSD does not use systemd. Instead it uses a traditional rc.d-style system. For example, to restart sshd:</p><pre>openbsd# /etc/rc.d/sshd restart\nsshd(ok)</pre><p>You can look at the rc.d man page (man rc.d) for more information.</p><p>OpenBSD comes with a stock configuration specifying which services are to run at startup. This is kept in rc.conf, but you should not modify this file. Instead, you should modify (or create) an rc.conf.local file which overrides it.</p><p>For example, ntpd runs by default. If you didn\u2019t want it to run, you would put this in rc.conf.local:</p><pre>ntpd_flags=NO</pre><p>Or if you wanted ntpd to run with special flags, you could put this in:</p><pre>ntpd_flags=-s</pre><p>This would cause ntpd to try to set the system time immediately on startup. If you want dhcpd to run without any special flags, then this entry can be put in rc.conf.local:</p><pre>dhcpd_flags=</pre><p>OpenBSD also provides the rcctl command, which can make some of this easier. For example:</p><pre>openbsd# rcctl disable ntpd\nopenbsd# cat /etc/rc.conf.local\nntpd_flags=NO</pre><h1>Daily Insecurity</h1><p>OpenBSD sends a nightly email analyzing your security configuration and noting signficant changes. To receive it, you probably want to point root\u2019s email at a different destination. Edit /etc/mail/aliases and add your email address as an alias for root:</p><pre>root: raindog308@raindog308.com</pre><p>Then run newaliases:</p><pre>openbsd# newaliases\n/etc/mail/aliases: 70 aliases</pre><p>Next morning, you should get the somewhat whimsically named Daily Insecurity Report.</p><h1>The wheel Group</h1><p>One thing to take a look at it is /etc/group:</p><pre>wheel:*:0:root,raindog308</pre><p>The wheel group is a special group that controls who can su to root. Quoting the su man page:</p><blockquote><p>If group 0 (normally \u201cwheel\u201d) has users listed then only those users can su to \u201croot\u201d. It is not sufficient to change a user\u2019s /etc/passwd entry to add them to the \u201cwheel\u201d group; they must explicitly be listed in /etc/group. If no one is in the \u201cwheel\u201d group, it is ignored, and anyone who knows the root password is permitted to su to \u201croot\u201d.</p></blockquote><h1>Adding Software</h1><p>Many common software packages are available as either packages (precompiled binaries) or ports (configuration information to build the package yourself). When possible, you should use packages.</p><p>The various pkg_* commands used to install packages refer to /etc/installurl to find a mirror to source binaries from. This file should be setup at install time, but if it\u2019s missing, following the <a href=\"https://www.openbsd.org/faq/faq15.html#Intro\">FAQ\u2019s instructions</a> to populate it.</p><p>In this case, I\u2019d like to install bash.</p><pre>openbsd# pkg_info -Q bash\nbash-5.0.11\nbashunit-20140327p0\ncheckbashisms-2.0.0.2p0\nopenbsd# pkg_add bash\nquirks-3.187 signed on 2020-05-19T14:41:48Z\nquirks-3.187: ok\nbash-5.0.11:libiconv-1.16p0: ok\nbash-5.0.11:gettext-runtime-0.20.1p0: ok\nbash-5.0.11: ok\nopenbsd# which bash\n/usr/local/bin/bash\nopenbsd#</pre><h1>Learning More</h1><p>OpenBSD comes with its own firewall (pf), mail system (OpenSMTPD), disk encryption tools, methods for duplicating the root volume (altroot), privilege escalation (doas, a replacement for sudo), kernel reconfiguration, release levels (-current, snapshots, and releases), virtualization (vmmd), and more. We\u2019ve only scratched the surface here. Some places to learn more:</p><ul><li>The excellent man pages. \u2018man afterboot\u2019 is a great place to start. Or look at the introduction for each manual chapter (man 1 intro, man 2 intro, etc.)</li><li>The <a href=\"https://www.openbsd.org/faq/index.html\">OpenBSD FAQ</a> covers a lot of detail on how to perform system administration tasks.</li><li>Michael W. Lucas\u2019s book \u201cAbsolute OpenBSD\u201d is a great resource.</li></ul><p>&nbsp;</p><div class=\"relpost-thumb-wrapper\"><div class=\"relpost-thumb-container\"><h3>Related posts:</h3><div style=\"clear: both\"></div><div style=\"clear: both\"></div><div class=\"relpost-block-container\"><a class=\"relpost-block-single\" href=\"https://lowendbox.com/blog/create-your-own-internet-radio-station-with-icecast/\"><div style=\"width: 150px; height: 215px;\"><div class=\"relpost-block-single-image\" alt=\"Create Your Own Internet Radio Station With Icecast\" style=\"background: transparent url(https://lowendbox.com/wp-content/uploads/2020/05/create-your-own-internet-radio-station-with-icecast-150x150.jpg) no-repeat scroll 0% 0%; width: 150px; height: 150px;\"></div><div class=\"relpost-block-single-text\" style=\"font-family: Arial;  font-size: 12px;  color: #333333;\">Create Your Own Internet Radio Station With Icecast</div></div></a><a class=\"relpost-block-single\" href=\"https://lowendbox.com/blog/how-to-install-and-use-redis-on-a-ubuntu-20-04-server/\"><div style=\"width: 150px; height: 215px;\"><div class=\"relpost-block-single-image\" alt=\"How to Install and Use Redis on a Ubuntu 20.04 Server\" style=\"background: transparent url(https://lowendbox.com/wp-content/uploads/2020/11/how-to-install-and-use-redis-ubuntu-2004-server-150x150.jpg) no-repeat scroll 0% 0%; width: 150px; height: 150px;\"></div><div class=\"relpost-block-single-text\" style=\"font-family: Arial;  font-size: 12px;  color: #333333;\">How to Install and Use Redis on a Ubuntu 20.04 Server</div></div></a><a class=\"relpost-block-single\" href=\"https://lowendbox.com/blog/how-to-set-up-ssh-keys-on-centos-8/\"><div style=\"width: 150px; height: 215px;\"><div class=\"relpost-block-single-image\" alt=\"How to setup SSH Keys on CentOS 8\" style=\"background: transparent url(https://lowendbox.com/wp-content/uploads/2020/06/how-to-setup-ssh-keys-on-centos-8-150x150.jpg) no-repeat scroll 0% 0%; width: 150px; height: 150px;\"></div><div class=\"relpost-block-single-text\" style=\"font-family: Arial;  font-size: 12px;  color: #333333;\">How to Set Up SSH Keys on CentOS 8</div></div></a><a class=\"relpost-block-single\" href=\"https://lowendbox.com/blog/how-to-install-nginx-on-a-debian-10-vps/\"><div style=\"width: 150px; height: 215px;\"><div class=\"relpost-block-single-image\" alt=\"How to Install NGINX on a Debian 10 VPS\" style=\"background: transparent url(https://lowendbox.com/wp-content/uploads/2020/11/how-to-install-nginx-on-a-debian-10-vps-150x150.jpg) no-repeat scroll 0% 0%; width: 150px; height: 150px;\"></div><div class=\"relpost-block-single-text\" style=\"font-family: Arial;  font-size: 12px;  color: #333333;\">How to Install NGINX on a Debian 10 VPS</div></div></a></div><div style=\"clear: both\"></div></div></div><div id=\"author-bio-box\" style=\"background: #f8f8f8; border-top: 2px solid #cccccc; border-bottom: 2px solid #cccccc; color: #333333\"><h3><a style=\"color: #555555;\" href=\"https://lowendbox.com/blog/author/raindog308/\" title=\"All posts by raindog308\" rel=\"author\">raindog308</a></h3><div class=\"bio-gravatar\"><img data-lazyloaded=\"1\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3MCIgaGVpZ2h0PSI3MCIgdmlld0JveD0iMCAwIDcwIDcwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjY2ZkNGRiIi8+PC9zdmc+\" alt=\"\" data-src=\"https://secure.gravatar.com/avatar/4ce3b8640a70e05bd73ac25b8a37821c?s=70&amp;d=retro&amp;r=pg\" data-srcset=\"https://secure.gravatar.com/avatar/4ce3b8640a70e05bd73ac25b8a37821c?s=140&amp;d=retro&amp;r=pg 2x\" class=\"avatar avatar-70 photo\" height=\"70\" width=\"70\" loading=\"lazy\"></div><a target=\"_blank\" rel=\"nofollow noopener noreferrer\" href=\"https://www.lowendtalk.com/profile/raindog308\" class=\"bio-icon bio-icon-website\"></a><p class=\"bio-description\">I'm Andrew, techno polymath and long-time LowEndTalk community Moderator. My technical interests include all things Unix, perl, python, shell scripting, and relational database systems. I enjoy writing technical articles here on LowEndBox to help people get more out of their VPSes.</p></div></div><div class=\"feedback\"></div></div>"}