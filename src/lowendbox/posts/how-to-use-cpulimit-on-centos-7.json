{"id": "27239", "post": "<div class=\"post-27239 post type-post status-publish format-standard hentry category-tutorials tag-centos tag-cpulimit tag-linux tag-racknerd\" id=\"post-27239\"><h2 class=\"storytitle\"><a href=\"https://lowendbox.com/blog/how-to-use-cpulimit-on-centos-7/\" rel=\"bookmark\">How to use CPULimit on CentOS 7</a></h2><div class=\"meta\"><img data-lazyloaded=\"1\" src=\"/media/icons/tag_green.png\" data-src=\"/media/icons/tag_green.png\" width=\"16\" height=\"16\" alt=\"Tags: \" class=\"litespeed-loaded\" data-was-processed=\"true\"> <a href=\"https://lowendbox.com/tag/centos/\" rel=\"tag\">centos</a>, <a href=\"https://lowendbox.com/tag/cpulimit/\" rel=\"tag\">cpulimit</a>, <a href=\"https://lowendbox.com/tag/linux/\" rel=\"tag\">linux</a>, <a href=\"https://lowendbox.com/tag/racknerd/\" rel=\"tag\">racknerd</a> <img data-lazyloaded=\"1\" src=\"https://lowendbox.com/media/icons/calendar.png\" data-src=\"https://lowendbox.com/media/icons/calendar.png\" width=\"16\" height=\"16\" alt=\"Date/Time: \" class=\"litespeed-loaded\" data-was-processed=\"true\"> July 7, 2021 @ 12:00 am, by raindog308</div><div class=\"storycontent tablelook\"><p><span style=\"font-weight: 400;\"><img data-lazyloaded=\"1\" src=\"https://lowendbox.com/wp-content/uploads/2021/05/rntut_cpulimit.png.webp\" loading=\"lazy\" class=\"alignright size-full wp-image-27227 litespeed-loaded\" data-src=\"https://lowendbox.com/wp-content/uploads/2021/05/rntut_cpulimit.png.webp\" alt=\"\" width=\"400\" height=\"284\" align=\"right\" hspace=\"20\" data-srcset=\"https://lowendbox.com/wp-content/uploads/2021/05/rntut_cpulimit.png.webp 400w, https://lowendbox.com/wp-content/uploads/2021/05/rntut_cpulimit-300x213.png.webp 300w\" data-sizes=\"(max-width: 400px) 100vw, 400px\" sizes=\"(max-width: 400px) 100vw, 400px\" srcset=\"https://lowendbox.com/wp-content/uploads/2021/05/rntut_cpulimit.png.webp 400w, https://lowendbox.com/wp-content/uploads/2021/05/rntut_cpulimit-300x213.png.webp 300w\" data-was-processed=\"true\">This article was contributed by Dustin Cisneros at </span><a href=\"https://www.racknerd.com/\"><span style=\"font-weight: 400;\">RackNerd</span></a><span style=\"font-weight: 400;\">, a web hosting and infrastructure as a service provider which was <a href=\"https://lowendbox.com/blog/lowendtalk-2020-best-providers-award-results/\" target=\"_blank\" rel=\"noopener\">recently voted #1</a> by the <a href=\"https://www.lowendtalk.com\" target=\"_blank\" rel=\"noopener\">LowEndTalk</a> community! If you are looking for a Linux VPS, Ryzen VPS, Windows VPS, or shared and reseller hosting services, be sure to take a look at RackNerd\u2019s latest special offers </span><a href=\"https://lowendbox.com/?s=racknerd&amp;searchsubmit=Find\"><span style=\"font-weight: 400;\">here</span></a><span style=\"font-weight: 400;\">.</span></p><p><span style=\"font-weight: 400;\">Are you looking to restrict the CPU utilization of a particular process or application on your Linux server? CPULimit is a tool in Linux that is used to limit the CPU usage of a process. It prevents an application from utilizing a whole core for a considerable period. Every application running on a PC uses up the processor\u2019s power and if eventually many applications are used together they can slow down a computer by using too much processor power thus, CPULimit can be used to limit this usage, and prevent excessive power use of the processor.</span></p><h1><b>Requirements for CPULimit Installation&nbsp;</b></h1><p><span style=\"font-weight: 400;\">There are mainly 3 requirements for installing CPULimit. Firstly, a 64bit server that can run CentOS 7 is needed (we will be using a CentOS 7 based server in this tutorial). Secondly, </span><b>sudo</b> <span style=\"font-weight: 400;\">or root access is required. And finally </span><b>make, screen, and wget </b><span style=\"font-weight: 400;\">are required, so please have these installed on your server before proceeding further.</span></p><h1><b>How to install CPULimit</b></h1><p><span style=\"font-weight: 400;\">&nbsp;The installation process is as follows:</span></p><p><span style=\"font-weight: 400;\">1. The first step involves the extraction of tarball after downloading of CPULimit:</span></p><pre><b>cd ~</b>\n<b>wget https://astuteinternet.dl.sourceforge.net/project/limitcpu/limitcpu/cpulimit-2.5.tar.gz</b>\n<b>tar -xvf cpulimit-2.5.tar.gz</b></pre><p><span style=\"font-weight: 400;\">2. </span><span style=\"font-weight: 400;\">The next step includes entering the directory created in step 1:</span></p><pre><b>cd cpulimit-2.5</b></pre><p><span style=\"font-weight: 400;\">3. For the compilation of CPULimit into Binary usage of </span><b>make </b><span style=\"font-weight: 400;\">is done next:</span></p><pre><b>make</b></pre><p><span style=\"font-weight: 400;\">4. 3</span><span style=\"font-weight: 400;\">rd</span><span style=\"font-weight: 400;\"> step makes a binary available in the cpulimit-2.5 directory. For the completion of the installation process the final command is as such:</span></p><pre><b>make install</b></pre><h1><b>Working principle of CPULimit</b></h1><p><span style=\"font-weight: 400;\">The basic working principle of CPULimit is to quickly terminate or start the applications so that CPU usage can be limited to a smaller number of cycles. However, the applications that can be terminated when a stop signal:&nbsp; (SIGSTOP) is sent, should not be worked with CPULimit.</span></p><h1><b>How to configure CPULimit</b></h1><p><span style=\"font-weight: 400;\">The next thing we need to know about is the </span><b>PID</b><span style=\"font-weight: 400;\"> (i.e. Process ID). This can be done by utilizing the \u201ctop\u201d command:</span><b><br>\n</b><b>top \u2013c&nbsp;</b></p><p><span style=\"font-weight: 400;\">The running processes should now be displayed, for example below:</span></p><pre><b>Tasks: 130 total, &nbsp; 1 running, 129 sleeping, &nbsp; 0 stopped, &nbsp; 0 zombie\n%Cpu(s):&nbsp; 0.2 us,&nbsp; 0.0 sy,&nbsp; 0.0 ni, 99.8 id,&nbsp; 0.0 wa,&nbsp; 0.0 hi,&nbsp; 0.0 si,&nbsp; 0.0 st\nKiB Mem :&nbsp; 3881740 total, &nbsp; 191952 free, &nbsp; 413472 used,&nbsp; 3276316 buff/cache\nKiB Swap:&nbsp; 4063228 total,&nbsp; 4062912 free,&nbsp; </b> <b>316 used.&nbsp; 2881364 avail \nMem &nbsp; PID USER&nbsp; </b> <b>PR&nbsp; NI</b> <b>VIRT</b> <b>RES</b> <b>SHR S&nbsp; %CPU %MEM </b> <b>TIME+ COMMAND \n1336 plex&nbsp; </b> <b>35&nbsp; 15 1368172&nbsp; 67464 &nbsp; 6668 S &nbsp; 0.3&nbsp; 1.7 155:41.58 Plex Plug-in [com.plexapp.system] /usr/lib/plexmediaserver/Resources/Plug-ins-995f1dead+\n31345 root&nbsp; </b> <b>20 &nbsp; 0&nbsp; 326572&nbsp; 21844&nbsp; 12784 S &nbsp; 0.3&nbsp; 0.6&nbsp; 86:45.32 docker-containerd --config&nbsp; /var/run/docker/containerd/containerd.toml</b> \n<b>1 root&nbsp; </b> <b>20 &nbsp; 0&nbsp; 193704 &nbsp; 6744 &nbsp; 4088 S &nbsp; 0.0&nbsp; 0.2 &nbsp; 6:49.22 /usr/lib/systemd/systemd --switched-root --system --deserialize 21</b> \n<b>2 root&nbsp; </b> <b>20 &nbsp; 0 &nbsp; </b> <b>0&nbsp; </b> <b>0&nbsp; </b> <b>0 S &nbsp; 0.0&nbsp; 0.0 &nbsp; 0:01.45 [kthreadd]</b> \n<b>3 root&nbsp; </b> <b>20 &nbsp; 0 &nbsp; </b> <b>0&nbsp; </b> <b>0&nbsp; </b> <b>0 S &nbsp; 0.0&nbsp; 0.0 &nbsp; 0:12.77 [ksoftirqd/0]</b> \n<b>5 root &nbsp; </b> <b>0 -20 &nbsp; </b> <b>0&nbsp; </b> <b>0&nbsp; </b> <b>0 S &nbsp; 0.0&nbsp; 0.0 &nbsp; 0:00.00 [kworker/0:0H]</b> \n<b>7 root&nbsp; </b> <b>rt &nbsp; 0 &nbsp; </b> <b>0&nbsp; </b> <b>0&nbsp; </b> <b>0 S &nbsp; 0.0&nbsp; 0.0 &nbsp; 0:13.95 [migration/0] </b><b>&nbsp;</b></pre><p><span style=\"font-weight: 400;\">Now in the above example \u2013 let\u2019s say </span><b>Plex</b><span style=\"font-weight: 400;\"> needs to be limited to 10% CPU utilization. You will want to run the command in </span><b>screen</b><span style=\"font-weight: 400;\"> as follows:</span></p><pre><b>screen -S limitcpucpulimit -p 1336 -l 10</b><b>&nbsp;&nbsp;</b></pre><p><b>Ctrl+A+D</b><span style=\"font-weight: 400;\"> command can be used to leave the screen.</span></p><p><span style=\"font-weight: 400;\">Overall, the following code is used as the format for CPULimit:</span></p><pre><b>cpulimit -p (PROCESS PID) -l (CPU %)</b></pre><p><span style=\"font-weight: 400;\">Do you use cpulimit in your environment? We would love to hear your comments below!</span></p><p>&nbsp;</p><div class=\"relpost-thumb-wrapper\"><div class=\"relpost-thumb-container\"><h3>Related posts:</h3><div style=\"clear: both\"></div><div style=\"clear: both\"></div><div class=\"relpost-block-container\"><a class=\"relpost-block-single\" href=\"https://lowendbox.com/blog/%f0%9f%8e%87-celebrate-fourth-of-july-with-some-cloudserver-deal-fireworks-2gb-vps-for-2-mo%f0%9f%8e%86/\"><div class=\"relpost-custom-block-single\" style=\"width: 150px; height: 215px;\"><div class=\"relpost-block-single-image\" alt=\"CloudServer Logo\" style=\"background: transparent url(https://lowendbox.com/wp-content/uploads/2020/11/cloudserver-150x150.png) no-repeat scroll 0% 0%; width: 150px; height: 150px;\"></div><div class=\"relpost-block-single-text\" style=\"font-family: Arial;  font-size: 12px;  color: #333333;\">\ud83c\udf87 Celebrate Fourth of July with Some CloudServer Deal Fireworks! (2GB VPS for $2/mo!)\ud83c\udf86</div></div></a><a class=\"relpost-block-single\" href=\"https://lowendbox.com/blog/how-to-force-and-redirect-https-with-htaccess/\"><div class=\"relpost-custom-block-single\" style=\"width: 150px; height: 215px;\"><div class=\"relpost-block-single-image\" alt=\"How to Force and Redirect HTTPS with .htaccess\" style=\"background: transparent url(https://lowendbox.com/wp-content/uploads/2021/05/rntut_https-150x150.png) no-repeat scroll 0% 0%; width: 150px; height: 150px;\"></div><div class=\"relpost-block-single-text\" style=\"font-family: Arial;  font-size: 12px;  color: #333333;\">How to Force and Redirect HTTPS with .htaccess</div></div></a><a class=\"relpost-block-single\" href=\"https://lowendbox.com/blog/lowendboxtv-weekend-update-for-june-26-2021/\"><div class=\"relpost-custom-block-single\" style=\"width: 150px; height: 215px;\"><div class=\"relpost-block-single-image\" alt=\"Weekend Update 20210626\" style=\"background: transparent url(https://lowendbox.com/wp-content/uploads/2021/06/video-thumbnail-leb-copy-1-150x150.png) no-repeat scroll 0% 0%; width: 150px; height: 150px;\"></div><div class=\"relpost-block-single-text\" style=\"font-family: Arial;  font-size: 12px;  color: #333333;\">LowEndBoxTV Weekend Update for June 26, 2021</div></div></a><a class=\"relpost-block-single\" href=\"https://lowendbox.com/blog/racknerd-pure-ssd-kvm-vps-in-los-angeles-with-asia-oceania-optimized-bandwidth-from-14-89-year/\"><div class=\"relpost-custom-block-single\" style=\"width: 150px; height: 215px;\"><div class=\"relpost-block-single-image\" alt=\"RackNerd Logo\" style=\"background: transparent url(https://lowendbox.com/wp-content/uploads/2021/01/racknerd_300-150x150.png) no-repeat scroll 0% 0%; width: 150px; height: 150px;\"></div><div class=\"relpost-block-single-text\" style=\"font-family: Arial;  font-size: 12px;  color: #333333;\">RackNerd - Pure SSD KVM VPS in Los Angeles with Asia/Oceania Optimized Bandwidth from $14.89/Year!</div></div></a></div><div style=\"clear: both\"></div></div></div><div id=\"author-bio-box\" style=\"background: #f8f8f8; border-top: 2px solid #cccccc; border-bottom: 2px solid #cccccc; color: #333333\"><h3><a style=\"color: #555555;\" href=\"https://lowendbox.com/blog/author/raindog308/\" title=\"All posts by raindog308\" rel=\"author\">raindog308</a></h3><div class=\"bio-gravatar\"><img data-lazyloaded=\"1\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3MCIgaGVpZ2h0PSI3MCIgdmlld0JveD0iMCAwIDcwIDcwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjY2ZkNGRiIi8+PC9zdmc+\" alt=\"\" data-src=\"https://secure.gravatar.com/avatar/4ce3b8640a70e05bd73ac25b8a37821c?s=70&amp;d=retro&amp;r=pg\" data-srcset=\"https://secure.gravatar.com/avatar/4ce3b8640a70e05bd73ac25b8a37821c?s=140&amp;d=retro&amp;r=pg 2x\" class=\"avatar avatar-70 photo\" height=\"70\" width=\"70\" loading=\"lazy\"></div><a target=\"_blank\" rel=\"nofollow noopener noreferrer\" href=\"https://www.lowendtalk.com/profile/raindog308\" class=\"bio-icon bio-icon-website\"></a><p class=\"bio-description\">I'm Andrew, techno polymath and long-time LowEndTalk community Moderator. My technical interests include all things Unix, perl, python, shell scripting, and relational database systems. I enjoy writing technical articles here on LowEndBox to help people get more out of their VPSes.</p></div></div><div class=\"feedback\"></div></div>"}