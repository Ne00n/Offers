{"id": "18855", "post": "<div class=\"post-18855 post type-post status-publish format-standard hentry category-tutorials tag-512mb tag-apache tag-centos-7 tag-cpanel tag-dedicated tag-lamp tag-lets-encrypt tag-mysql tag-ssh tag-ssl tag-tutorials-2 tag-virtual-hosting tag-vps tag-web-hosting\" id=\"post-18855\"><h2 class=\"storytitle\"><a href=\"https://lowendbox.com/blog/configuring-virtualmin-on-centos-7-for-website-hosting-part-2/\" rel=\"bookmark\">Configuring Virtualmin on CentOS 7 for Website Hosting: Part 2</a></h2><div class=\"meta\"><img data-lazyloaded=\"1\" src=\"/media/icons/tag_green.png\" data-src=\"/media/icons/tag_green.png\" alt=\"Tags: \" class=\"litespeed-loaded\" data-was-processed=\"true\"> <a href=\"https://lowendbox.com/tag/512mb/\" rel=\"tag\">512MB</a>, <a href=\"https://lowendbox.com/tag/apache/\" rel=\"tag\">apache</a>, <a href=\"https://lowendbox.com/tag/centos-7/\" rel=\"tag\">CentOS 7</a>, <a href=\"https://lowendbox.com/tag/cpanel/\" rel=\"tag\">cpanel</a>, <a href=\"https://lowendbox.com/tag/dedicated/\" rel=\"tag\">dedicated</a>, <a href=\"https://lowendbox.com/tag/lamp/\" rel=\"tag\">LAMP</a>, <a href=\"https://lowendbox.com/tag/lets-encrypt/\" rel=\"tag\">Let's Encrypt</a>, <a href=\"https://lowendbox.com/tag/mysql/\" rel=\"tag\">mysql</a>, <a href=\"https://lowendbox.com/tag/ssh/\" rel=\"tag\">ssh</a>, <a href=\"https://lowendbox.com/tag/ssl/\" rel=\"tag\">ssl</a>, <a href=\"https://lowendbox.com/tag/tutorials-2/\" rel=\"tag\">tutorials</a>, <a href=\"https://lowendbox.com/tag/virtual-hosting/\" rel=\"tag\">virtual hosting</a>, <a href=\"https://lowendbox.com/tag/vps/\" rel=\"tag\">VPS</a>, <a href=\"https://lowendbox.com/tag/web-hosting/\" rel=\"tag\">web hosting</a> <img data-lazyloaded=\"1\" src=\"https://lowendbox.com/media/icons/calendar.png\" data-src=\"https://lowendbox.com/media/icons/calendar.png\" alt=\"Date/Time: \" class=\"litespeed-loaded\" data-was-processed=\"true\"> April 12, 2019 @ 9:53 am, by Ryan Flowers</div><div class=\"storycontent tablelook\"><p>In <a href=\"https://lowendbox.com/blog/configuring-virtualmin-on-centos-7-for-website-hosting-part-1\" target=\"_blank\" rel=\"noopener noreferrer\">Part 1</a> of our tutorial, we installed Virtualmin on CentOS 7 and did some basic configuration. In this second half, we\u2019re going to dive deep into the Linux configuration files to optimize our new server for a low memory footprint. We\u2019re also going to make sure we have a modern version of PHP installed and get all the interfaces secured with a Let\u2019s Encrypt SSL certificate.</p><h1><span style=\"font-weight: 400;\">Post Installation Work Continues</span></h1><p><span style=\"font-weight: 400;\">If you look at your browser\u2019s SSL icon, you\u2019ll notice that there\u2019s no SSL certificate for Virtualmin. We can fix that in just a few steps! Firstly we need to install a virtual host (website) for your server\u2019s FQDN. In our case, that was server.virtualmin-tutorial.tld. We\u2019re going to host virtualmin-tutorial.tld on this server, so we\u2019ll go to the top left of Virtualmin and click \u201cCreate Virtual Server\u201d.</span></p><p><span id=\"more-18855\"></span></p><p><a href=\"http://lowendbox.com/wp-content/uploads/2019/04/virtualmin-centos-tutorial-6.jpg\"><img data-lazyloaded=\"1\" src=\"http://lowendbox.com/wp-content/uploads/2019/04/virtualmin-centos-tutorial-6.jpg.webp\" loading=\"lazy\" class=\"aligncenter wp-image-18823 litespeed-loaded\" data-src=\"http://lowendbox.com/wp-content/uploads/2019/04/virtualmin-centos-tutorial-6.jpg.webp\" alt=\"\" width=\"850\" height=\"681\" data-srcset=\"https://lowendbox.com/wp-content/uploads/2019/04/virtualmin-centos-tutorial-6.jpg.webp 1084w, https://lowendbox.com/wp-content/uploads/2019/04/virtualmin-centos-tutorial-6-300x240.jpg.webp 300w, https://lowendbox.com/wp-content/uploads/2019/04/virtualmin-centos-tutorial-6-768x615.jpg.webp 768w, https://lowendbox.com/wp-content/uploads/2019/04/virtualmin-centos-tutorial-6-1024x820.jpg.webp 1024w\" data-sizes=\"(max-width: 850px) 100vw, 850px\" sizes=\"(max-width: 850px) 100vw, 850px\" srcset=\"https://lowendbox.com/wp-content/uploads/2019/04/virtualmin-centos-tutorial-6.jpg.webp 1084w, https://lowendbox.com/wp-content/uploads/2019/04/virtualmin-centos-tutorial-6-300x240.jpg.webp 300w, https://lowendbox.com/wp-content/uploads/2019/04/virtualmin-centos-tutorial-6-768x615.jpg.webp 768w, https://lowendbox.com/wp-content/uploads/2019/04/virtualmin-centos-tutorial-6-1024x820.jpg.webp 1024w\" data-was-processed=\"true\"></a></p><p>&nbsp;</p><p><span style=\"font-weight: 400;\">Fill in the Domain name (<em>without</em> the \u201cserver.\u201d prefix)&nbsp; and optionally the description field. Set the account password in the \u201cAdministration password\u201d field and save it for later reference. You can leave the Administration username to be set Automatically, or you can manually type in your preferred username for this account. Click the arrow next to \u201cEnabled features\u201d to expand this section, and be sure to check the \u201cSetup SSL website too?\u201d box as shown below:</span></p><p><a href=\"http://lowendbox.com/wp-content/uploads/2019/04/virtualmin-centos-tutorial-7.jpg\"><img data-lazyloaded=\"1\" src=\"http://lowendbox.com/wp-content/uploads/2019/04/virtualmin-centos-tutorial-7.jpg.webp\" loading=\"lazy\" class=\"aligncenter wp-image-18859 litespeed-loaded\" data-src=\"http://lowendbox.com/wp-content/uploads/2019/04/virtualmin-centos-tutorial-7.jpg.webp\" alt=\"\" width=\"850\" height=\"667\" data-srcset=\"https://lowendbox.com/wp-content/uploads/2019/04/virtualmin-centos-tutorial-7.jpg.webp 1084w, https://lowendbox.com/wp-content/uploads/2019/04/virtualmin-centos-tutorial-7-300x235.jpg.webp 300w, https://lowendbox.com/wp-content/uploads/2019/04/virtualmin-centos-tutorial-7-768x602.jpg.webp 768w, https://lowendbox.com/wp-content/uploads/2019/04/virtualmin-centos-tutorial-7-1024x803.jpg.webp 1024w\" data-sizes=\"(max-width: 850px) 100vw, 850px\" sizes=\"(max-width: 850px) 100vw, 850px\" srcset=\"https://lowendbox.com/wp-content/uploads/2019/04/virtualmin-centos-tutorial-7.jpg.webp 1084w, https://lowendbox.com/wp-content/uploads/2019/04/virtualmin-centos-tutorial-7-300x235.jpg.webp 300w, https://lowendbox.com/wp-content/uploads/2019/04/virtualmin-centos-tutorial-7-768x602.jpg.webp 768w, https://lowendbox.com/wp-content/uploads/2019/04/virtualmin-centos-tutorial-7-1024x803.jpg.webp 1024w\" data-was-processed=\"true\"></a></p><p><span style=\"font-weight: 400;\">Uncheck the \u201cDAV Login\u201d. Since we\u2019ve done a minimal install, also uncheck the \u201cAccept mail for domain?\u201d box. Now click the green \u201cCreate server\u201d button.</span></p><p><span style=\"font-weight: 400;\">When the new Virtual Server is created, you\u2019ll see two options at the bottom of the page. Click on \u201cReturn to virtual server details\u201d and then in the top left corner click on \u201cVirtual Server Summary\u201d. </span></p><p><span style=\"font-weight: 400;\">To continue with configuring a Let\u2019s Encrypt SSL certificate, we need to get the DNS pointed at the server. The IP address shown in the Virtual server details is what we need. Go to your DNS provider (CloudFlare for example) and add an A record for your domain that points the following names to your IP:</span></p><pre><span style=\"font-weight: 400;\">virtualmin-tutorial.tld</span>\n<span style=\"font-weight: 400;\">www.</span><span style=\"font-weight: 400;\">virtualmin-tutorial.tld</span>\n<span style=\"font-weight: 400;\">server.virtualmin-tutorial.tld</span>\n</pre><p><span style=\"font-weight: 400;\">Of course, substitute <em>virtualmin-tutorial.tld&nbsp;</em>with your actual domain name, and <em>server</em> for your chosen server name.&nbsp;These hostnames will need to point at your servers primary IP address. Once that\u2019s done, and the DNS propagation has occurred, you should be able to view the site in a web browser. If you haven\u2019t added any content, then it\u2019ll simply show a 403 Forbidden error. That\u2019s fine, and we can move on.</span></p><p><span style=\"font-weight: 400;\">As shown below, click the Server Configuration drop down (1) , then SSL Certificate (2), then Let\u2019s Encrypt (3). Click the the \u201cDomain names listed here\u201d box radio button, and paste in the three domain names above into the box. You can omit&nbsp;<em>mail.virtualmin-tutorial.tld</em>&nbsp;(4). Check the screenshot below. </span></p><p>&nbsp;</p><p><a href=\"http://lowendbox.com/wp-content/uploads/2019/04/virtualmin-centos-tutorial-8.jpg\"><img data-lazyloaded=\"1\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI4NTAiIGhlaWdodD0iNzMxIiB2aWV3Qm94PSIwIDAgODUwIDczMSI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iI2NmZDRkYiIvPjwvc3ZnPg==\" loading=\"lazy\" class=\"aligncenter wp-image-18825\" data-src=\"http://lowendbox.com/wp-content/uploads/2019/04/virtualmin-centos-tutorial-8.jpg.webp\" alt=\"\" width=\"850\" height=\"731\" data-srcset=\"https://lowendbox.com/wp-content/uploads/2019/04/virtualmin-centos-tutorial-8.jpg.webp 1083w, https://lowendbox.com/wp-content/uploads/2019/04/virtualmin-centos-tutorial-8-300x258.jpg.webp 300w, https://lowendbox.com/wp-content/uploads/2019/04/virtualmin-centos-tutorial-8-768x661.jpg.webp 768w, https://lowendbox.com/wp-content/uploads/2019/04/virtualmin-centos-tutorial-8-1024x881.jpg.webp 1024w\" data-sizes=\"(max-width: 850px) 100vw, 850px\"></a></p><p>&nbsp;</p><p><span style=\"font-weight: 400;\">Click the Request Certificate button (5) at the bottom. If your DNS is set up correctly, then this will work with Let\u2019s Encrypt, the free certificate signing authority, and your site and server will receive a Let\u2019s Encrypt SSL certificate- free! It\u2019s every bit as secure as a paid certificate. Since we added \u201cserver.virtualmin-tutorial.tld\u201d to the list, now our Virtualmin installation itself will be covered by this certificate! All we have to do is go back to the SSL Certificate menu and click \u201cCopy to Webmin\u201d. While you\u2019re at it, click on the rest of the \u201cCopy to \u2026\u201d buttons as shown below, with the exception of Postfix and Dovecot, since we\u2019re not using email on this server:</span></p><p>&nbsp;</p><p><a href=\"http://lowendbox.com/wp-content/uploads/2019/04/virtualmin-centos-tutorial-9.jpg\"><img data-lazyloaded=\"1\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI4NTAiIGhlaWdodD0iNjU5IiB2aWV3Qm94PSIwIDAgODUwIDY1OSI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iI2NmZDRkYiIvPjwvc3ZnPg==\" loading=\"lazy\" class=\"aligncenter wp-image-18826\" data-src=\"http://lowendbox.com/wp-content/uploads/2019/04/virtualmin-centos-tutorial-9.jpg.webp\" alt=\"\" width=\"850\" height=\"659\" data-srcset=\"https://lowendbox.com/wp-content/uploads/2019/04/virtualmin-centos-tutorial-9.jpg.webp 1091w, https://lowendbox.com/wp-content/uploads/2019/04/virtualmin-centos-tutorial-9-300x233.jpg.webp 300w, https://lowendbox.com/wp-content/uploads/2019/04/virtualmin-centos-tutorial-9-768x596.jpg.webp 768w, https://lowendbox.com/wp-content/uploads/2019/04/virtualmin-centos-tutorial-9-1024x794.jpg.webp 1024w\" data-sizes=\"(max-width: 850px) 100vw, 850px\"></a></p><p>&nbsp;</p><p><span style=\"font-weight: 400;\">When done, close your browser tab and re-open Virtualmin in a new tab. You\u2019ll see that the SSL lock in Chrome is now green. What\u2019s more, when you go to the domain name that you just added the SSL certificate for, you can view it using https:// also. </span></p><p><span style=\"font-weight: 400;\">Finally we want to test and make sure that the server is 100% ready to go. We\u2019re going to use SSH to create an index.php page at our newly created Virtual Server. Our test domain was virtualmin-tutorial.tld, and the automatically assigned user was virtualmin-tutorial. You\u2019ll want to substitute your username below. Notice how we use \u201csu\u201d to Switch User to the user we just created, and then type \u201cexit\u201d to become root again:</span></p><pre><span style=\"font-weight: 400;\">[root@server ~]# su virtualmin-tutorial</span>\n<span style=\"font-weight: 400;\">[virtualmin-tutorial@server root]$ cd ~/public_html</span>\n<span style=\"font-weight: 400;\">[virtualmin-tutorial@server public_html]$ echo \"&lt;?php phpinfo() ?&gt;\" &gt; index.php\n</span><span style=\"font-weight: 400;\">[virtualmin-tutorial@server public_html]$ exit\n</span><span style=\"font-weight: 400;\">[root@server ~]# </span>\n</pre><p><span style=\"font-weight: 400;\">Now visit your website in a browser and you\u2019ll see a PHP test page:</span></p><p><img data-lazyloaded=\"1\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI4NTAiIGhlaWdodD0iNzIiIHZpZXdCb3g9IjAgMCA4NTAgNzIiPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9IiNjZmQ0ZGIiLz48L3N2Zz4=\" loading=\"lazy\" class=\"aligncenter wp-image-18827\" data-src=\"http://lowendbox.com/wp-content/uploads/2019/04/virtualmin-centos-tutorial-10.jpg.webp\" alt=\"\" width=\"850\" height=\"72\" data-srcset=\"https://lowendbox.com/wp-content/uploads/2019/04/virtualmin-centos-tutorial-10.jpg.webp 941w, https://lowendbox.com/wp-content/uploads/2019/04/virtualmin-centos-tutorial-10-300x26.jpg.webp 300w, https://lowendbox.com/wp-content/uploads/2019/04/virtualmin-centos-tutorial-10-768x65.jpg.webp 768w\" data-sizes=\"(max-width: 850px) 100vw, 850px\"></p><p>&nbsp;</p><p><span style=\"font-weight: 400;\">Here we have PHP 7.0 installed. PHP 5.4 is also installed, although it is only there for legacy reasons- it should never be used. It is also desirable to use the newest version of PHP available to you, and the RedHat repository has up to PHP 7.2. We\u2019ll install PHP 7.2 and make it the default PHP version for the command line, too. We\u2019re going to install all available PHP modules as well to make sure we aren\u2019t missing anything important.</span></p><p>Run the following command:</p><pre><span style=\"font-weight: 400;\">yum -y install rh-php72*</span></pre><p><span style=\"font-weight: 400;\">Now we can change the PHP version in Virtualmin for the Virtual Server we created. This can be done via Virtualmin\u2019s web interface, but it\u2019s easily done from the command line as well. Be sure to substitute your domain name and username in the following command:</span></p><pre><span style=\"font-weight: 400;\">virtualmin set-php-directory --version 7.2 --domain virtualmin-tutorial.tld --dir /home/virtualmin-tutorial/public_html</span></pre><p><span style=\"font-weight: 400;\">Let\u2019s check our website. You may just need to refresh your browser page. You should see PHP 7.2 now being the active version:</span></p><p><img data-lazyloaded=\"1\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI4NTAiIGhlaWdodD0iNzciIHZpZXdCb3g9IjAgMCA4NTAgNzciPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9IiNjZmQ0ZGIiLz48L3N2Zz4=\" loading=\"lazy\" class=\"aligncenter wp-image-18828\" data-src=\"http://lowendbox.com/wp-content/uploads/2019/04/virtualmin-centos-tutorial-11.jpg.webp\" alt=\"\" width=\"850\" height=\"77\" data-srcset=\"https://lowendbox.com/wp-content/uploads/2019/04/virtualmin-centos-tutorial-11.jpg.webp 943w, https://lowendbox.com/wp-content/uploads/2019/04/virtualmin-centos-tutorial-11-300x27.jpg.webp 300w, https://lowendbox.com/wp-content/uploads/2019/04/virtualmin-centos-tutorial-11-768x69.jpg.webp 768w\" data-sizes=\"(max-width: 850px) 100vw, 850px\"></p><p><span style=\"font-weight: 400;\">The only problem now is that the command line still has PHP version 5.4:</span></p><pre><span style=\"font-weight: 400;\">[virtualmin-tutorial@server ~]$ php -v</span>\n<span style=\"font-weight: 400;\">PHP 5.4.16 (cli) (built: Oct 30 2018 19:30:51)</span>\n<span style=\"font-weight: 400;\">Copyright (c) 1997-2013 The PHP Group</span>\n<span style=\"font-weight: 400;\">Zend Engine v2.4.0, Copyright (c) 1998-2013 Zend Technologies</span>\n\n</pre><p><span style=\"font-weight: 400;\">To resolve this, we\u2019re going to run a simple command that tells bash (the command line) to use a different version of PHP from a Software Collection. The command is called \u201cscl\u201d and if we run \u201cscl -l\u201d we\u2019ll get a list of available Software Collections:</span></p><pre><span style=\"font-weight: 400;\">[root@server ~]# scl -l</span>\n<span style=\"font-weight: 400;\">httpd24</span>\n<span style=\"font-weight: 400;\">rh-php70</span>\n<span style=\"font-weight: 400;\">rh-php72</span>\n</pre><p><span style=\"font-weight: 400;\">The collection we want to use is rh-php72. Run the following command to use the rh-php72 in bash:</span></p><pre>scl enable rh-php72 bash\n</pre><p><span style=\"font-family: Georgia, 'Times New Roman', 'Bitstream Charter', Times, serif;\">Here\u2019s how our output looked. Notice that the second time we ran \u201cphp -v\u201d it shows PHP 7.2.0. Now, great utilities like wp-cli will work if you install them.&nbsp;</span></p><p><a href=\"http://lowendbox.com/wp-content/uploads/2019/04/virtualmin-centos-tutorial-12.jpg\"><img data-lazyloaded=\"1\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI4NTAiIGhlaWdodD0iMTgwIiB2aWV3Qm94PSIwIDAgODUwIDE4MCI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iI2NmZDRkYiIvPjwvc3ZnPg==\" loading=\"lazy\" class=\"aligncenter wp-image-18829\" data-src=\"http://lowendbox.com/wp-content/uploads/2019/04/virtualmin-centos-tutorial-12.jpg.webp\" alt=\"\" width=\"850\" height=\"180\" data-srcset=\"https://lowendbox.com/wp-content/uploads/2019/04/virtualmin-centos-tutorial-12.jpg.webp 960w, https://lowendbox.com/wp-content/uploads/2019/04/virtualmin-centos-tutorial-12-300x63.jpg.webp 300w, https://lowendbox.com/wp-content/uploads/2019/04/virtualmin-centos-tutorial-12-768x162.jpg.webp 768w\" data-sizes=\"(max-width: 850px) 100vw, 850px\"></a></p><p>&nbsp;</p><h1><span style=\"font-weight: 400;\">Adjusting Apache</span></h1><p><span style=\"font-weight: 400;\">Now we\u2019ll adjust settings in Apache so that it doesn\u2019t consume too much memory. If Apache runs out of memory, it can stop working, and all hosted websites will go down. We\u2019ll also make some edits to the PHP configuration. We\u2019re going to use the editor called Nano, which we installed at the beginning of the tutorial. If you\u2019re not sure how to use Nano, don\u2019t worry- we\u2019ll show you the basics. </span></p><p><span style=\"font-weight: 400;\">First we will edit the php.ini file so that it has some more sane limits in it. If you\u2019re going to host a WordPress site for example, you will need more than an 8MB post_max_size and upload_max_filesize. We\u2019re going to use <em>sed</em> again to edit the default values. Run the following command:</span></p><pre><span style=\"font-weight: 400;\">sed -i 's/^upload_max_filesize.*/upload_max_filesize = 256M/' /etc/php.ini</span>\n<span style=\"font-weight: 400;\">sed -i 's/^post_max_size.*/post_max_size = 256M/' /etc/php.ini</span></pre><p><span style=\"font-weight: 400;\">If you want to edit the test site we installed earlier, then run the same command on its php.ini by adjusting the paths to php.ini in the following commands:</span></p><pre><span style=\"font-weight: 400;\">sed -i 's/^upload_max_filesize.*/upload_max_filesize = 256M/' &nbsp;/home/virtualmin-tutorial/etc/php7.2/php.ini</span>\n<span style=\"font-weight: 400;\">sed -i 's/^post_max_size.*/post_max_size = 256M/' /home/virtualmin-tutorial/etc/php7.2/php.ini</span></pre><p><span style=\"font-weight: 400;\">Now we\u2019re going to edit our Apache configuration file using Nano. Nano works a lot like Notepad on the PC, and we\u2019re going to utilize it to add some limits to Apache so that it cannot overload the server easily. Run the following command to edit Apache\u2019s configuration file, httpd.conf:</span></p><pre><span style=\"font-weight: 400;\">nano /etc/httpd/conf/httpd.conf</span></pre><p><span style=\"font-weight: 400;\">Use the arrows to move the cursor down until you see the following line:</span></p><pre><span style=\"font-weight: 400;\">#ServerName </span><span style=\"font-weight: 400;\">www.example.com:</span><span style=\"font-weight: 400;\">80</span></pre><p><span style=\"font-weight: 400;\">Position the cursor at the end of the line and press Enter 2 or 3 times to create some extra space below it, and the copy/paste the following lines in:</span></p><pre><span style=\"font-weight: 400;\">&lt;IfModule prefork.c&gt;</span>\n<span style=\"font-weight: 400;\">MinSpareServers 1</span>\n<span style=\"font-weight: 400;\">MaxSpareServers 2</span>\n<span style=\"font-weight: 400;\">&lt;/IfModule&gt;</span>\n<span style=\"font-weight: 400;\">&lt;IfModule itk.c&gt;</span>\n<span style=\"font-weight: 400;\">MinSpareServers 1</span>\n<span style=\"font-weight: 400;\">MaxSpareServers 2</span>\n<span style=\"font-weight: 400;\">&lt;/IfModule&gt;</span>\n<span style=\"font-weight: 400;\">ServerLimit 64</span>\n<span style=\"font-weight: 400;\">MaxClients 64</span>\n<span style=\"font-weight: 400;\">MaxRequestsPerChild 1000</span>\n<span style=\"font-weight: 400;\">KeepAlive On</span>\n<span style=\"font-weight: 400;\">KeepAliveTimeout 5</span>\n<span style=\"font-weight: 400;\">MaxKeepAliveRequests 128</span>\n</pre><p><span style=\"font-weight: 400;\">Note that these values are very conservative for a small VPS. If you have a larger server, you may increase the values for ServerLimit and MaxClients. If you run into problems and see the error</span></p><pre><span style=\"font-weight: 400;\">[error] server reached MaxClients setting,&nbsp;</span></pre><p><span style=\"font-weight: 400;\">In a sites error_log file, then you will need to consider raising theMaxClients setting. These values will work in most cases, however.&nbsp;</span><span style=\"font-weight: 400;\">Here\u2019s how that looked in our httpd.conf:</span></p><p>&nbsp;</p><p><a href=\"http://lowendbox.com/wp-content/uploads/2019/04/virtualmin-centos-tutorial-13.jpg\"><img data-lazyloaded=\"1\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI4NTAiIGhlaWdodD0iNzUwIiB2aWV3Qm94PSIwIDAgODUwIDc1MCI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iI2NmZDRkYiIvPjwvc3ZnPg==\" loading=\"lazy\" class=\"aligncenter wp-image-18812\" data-src=\"http://lowendbox.com/wp-content/uploads/2019/04/virtualmin-centos-tutorial-13.jpg.webp\" alt=\"\" width=\"850\" height=\"750\" data-srcset=\"https://lowendbox.com/wp-content/uploads/2019/04/virtualmin-centos-tutorial-13.jpg.webp 977w, https://lowendbox.com/wp-content/uploads/2019/04/virtualmin-centos-tutorial-13-300x265.jpg.webp 300w, https://lowendbox.com/wp-content/uploads/2019/04/virtualmin-centos-tutorial-13-768x678.jpg.webp 768w\" data-sizes=\"(max-width: 850px) 100vw, 850px\"></a></p><p>&nbsp;</p><p><span style=\"font-weight: 400;\">To exit and save, hold the Control key and press X. You\u2019ll see the following confirmation at the bottom:</span></p><pre><span style=\"font-weight: 400;\">Save modified buffer (ANSWERING \"No\" WILL DESTROY CHANGES) ?</span></pre><p><span style=\"font-weight: 400;\">Press Y and then press Enter to confirm that you want to save the file. To confirm that we didn\u2019t make any mistakes, we\u2019ll ask Apache to test the configuration:</span></p><pre><span style=\"font-weight: 400;\">[root@server ~]# httpd -t</span>\n<span style=\"font-weight: 400;\">Syntax OK</span>\n<span style=\"font-weight: 400;\">[root@server ~]#</span>\n</pre><p><span style=\"font-weight: 400;\">Great! Now let\u2019s restart Apache to get the new changes to take effect:</span></p><pre><span style=\"font-weight: 400;\">[root@server ~]# systemctl restart httpd</span> <span style=\"font-weight: 400;\">[root@server ~]#</span></pre><h1><span style=\"font-weight: 400;\">The Next Steps</span></h1><p><span style=\"font-weight: 400;\">From here, you can add several more Virtual Servers (Virtualmin\u2019s name for a web hosting account) using the aforementioned steps, and each can have multiple MySQL databases. You can even install multiple sites per Virtual Server although for security reasons it\u2019s safest to have just one each. </span></p><p><span style=\"font-weight: 400;\">We hope that you\u2019ll enjoy your new Virtualmin based web server and that you\u2019ve found this tutorial informative. Be sure to check out the<a href=\"https://www.virtualmin.com/documentation\" target=\"_blank\" rel=\"noopener noreferrer\"> official Virtualmin documentation</a>&nbsp;</span><span style=\"font-weight: 400;\"> so that you can really unleash the potential of your new server! </span></p><p>&nbsp;</p><p class=\"dpsp-share-text\"></p><div id=\"dpsp-content-bottom\" class=\"dpsp-content-wrapper dpsp-shape-rounded dpsp-column-auto dpsp-has-spacing dpsp-no-labels dpsp-show-on-mobile dpsp-button-style-1 dpsp-has-icon-background dpsp-has-button-background dpsp-show-total-share-count dpsp-show-total-share-count-after\"><ul class=\"dpsp-networks-btns-wrapper dpsp-networks-btns-content dpsp-has-button-icon-animation\"><li><a rel=\"nofollow\" href=\"https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Flowendbox.com%2Fblog%2Fconfiguring-virtualmin-on-centos-7-for-website-hosting-part-2%2F&amp;t=Configuring%20Virtualmin%20on%20CentOS%207%20for%20Website%20Hosting%3A%20Part%202\" class=\"dpsp-network-btn dpsp-facebook dpsp-no-label dpsp-first\" title=\"Share on Facebook\"><span class=\"dpsp-network-icon\"></span><span class=\"dpsp-network-label-wrapper\"></span></a></li><li><a rel=\"nofollow\" href=\"https://twitter.com/intent/tweet?text=Configuring%20Virtualmin%20on%20CentOS%207%20for%20Website%20Hosting%3A%20Part%202&amp;url=https%3A%2F%2Flowendbox.com%2Fblog%2Fconfiguring-virtualmin-on-centos-7-for-website-hosting-part-2%2F&amp;via=LowEndNetwork\" class=\"dpsp-network-btn dpsp-twitter dpsp-no-label\" title=\"Share on Twitter\"><span class=\"dpsp-network-icon\"></span><span class=\"dpsp-network-label-wrapper\"></span></a></li><li><a rel=\"nofollow\" href=\"https://www.linkedin.com/shareArticle?url=https%3A%2F%2Flowendbox.com%2Fblog%2Fconfiguring-virtualmin-on-centos-7-for-website-hosting-part-2%2F&amp;title=Configuring%20Virtualmin%20on%20CentOS%207%20for%20Website%20Hosting%3A%20Part%202&amp;mini=true\" class=\"dpsp-network-btn dpsp-linkedin dpsp-no-label dpsp-last\" title=\"Share on LinkedIn\"><span class=\"dpsp-network-icon\"></span><span class=\"dpsp-network-label-wrapper\"></span></a></li></ul><div class=\"dpsp-total-share-wrapper\"><span class=\"dpsp-icon-total-share\"></span><span class=\"dpsp-total-share-count\">7</span><span>shares</span></div></div><div class=\"relpost-thumb-wrapper\"><div class=\"relpost-thumb-container\"><h3>Related posts:</h3><div style=\"clear: both\"></div><div style=\"clear: both\"></div><div class=\"relpost-block-container\"><a class=\"relpost-block-single\" href=\"https://lowendbox.com/blog/nginx-vs-openlitespeed-vs-apache/\"><div style=\"width: 150px; height: 215px;\"><div class=\"relpost-block-single-image\" alt=\"Nginx vs. OpenLiteSpeed vs. Apache\" style=\"background: transparent url(https://lowendbox.com/wp-content/uploads/2020/04/nginx-vs-openlitespeed-vs-apache-150x150.png) no-repeat scroll 0% 0%; width: 150px; height: 150px;\"></div><div class=\"relpost-block-single-text\" style=\"font-family: Arial;  font-size: 12px;  color: #333333;\">Nginx vs. OpenLiteSpeed vs. Apache</div></div></a><a class=\"relpost-block-single\" href=\"https://lowendbox.com/blog/your-own-dedi-for-5-mo-you-can-with-a-raspberry-pi-from-rpi-servers/\"><div style=\"width: 150px; height: 215px;\"><div class=\"relpost-block-single-image\" alt=\"Your Own Dedi for $5/mo?  You Can With a Raspberry Pi From RPI Servers!\" style=\"background: transparent url(https://lowendbox.com/wp-content/uploads/2020/10/rpiservers-150x150.png) no-repeat scroll 0% 0%; width: 150px; height: 150px;\"></div><div class=\"relpost-block-single-text\" style=\"font-family: Arial;  font-size: 12px;  color: #333333;\">Your Own Dedi for $5/mo? You Can With a Raspberry Pi From RPI Servers!</div></div></a><a class=\"relpost-block-single\" href=\"https://lowendbox.com/blog/how-to-set-up-nameservers-on-a-vps/\"><div style=\"width: 150px; height: 215px;\"><div class=\"relpost-block-single-image\" alt=\"How to Set Up Nameservers on a VPS\" style=\"background: transparent url(https://lowendbox.com/wp-content/uploads/2020/04/how-to-setup-nameservers-on-a-vps-150x150.png) no-repeat scroll 0% 0%; width: 150px; height: 150px;\"></div><div class=\"relpost-block-single-text\" style=\"font-family: Arial;  font-size: 12px;  color: #333333;\">How to Set Up Nameservers on a VPS</div></div></a><a class=\"relpost-block-single\" href=\"https://lowendbox.com/blog/generating-and-using-ssh-keys-part-3/\"><div style=\"width: 150px; height: 215px;\"><div class=\"relpost-block-single-image\" alt=\"Generating and Using SSH Keys, Part 3\" style=\"background: transparent url(https://lowendbox.com/wp-content/uploads/2020/04/how-to-secure-wordpress-site-p3-150x150.png) no-repeat scroll 0% 0%; width: 150px; height: 150px;\"></div><div class=\"relpost-block-single-text\" style=\"font-family: Arial;  font-size: 12px;  color: #333333;\">Generating and Using SSH Keys, Part 3</div></div></a></div><div style=\"clear: both\"></div></div></div><div id=\"author-bio-box\" style=\"background: #f8f8f8; border-top: 2px solid #cccccc; border-bottom: 2px solid #cccccc; color: #333333\"><h3><a style=\"color: #555555;\" href=\"https://lowendbox.com/blog/author/ryan-flowers/\" title=\"All posts by Ryan Flowers\" rel=\"author\">Ryan Flowers</a></h3><div class=\"bio-gravatar\"><img data-lazyloaded=\"1\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3MCIgaGVpZ2h0PSI3MCIgdmlld0JveD0iMCAwIDcwIDcwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjY2ZkNGRiIi8+PC9zdmc+\" alt=\"\" data-src=\"https://secure.gravatar.com/avatar/4a6ed635b6c3c112666487683cb7f8e8?s=70&amp;d=retro&amp;r=pg\" data-srcset=\"https://secure.gravatar.com/avatar/4a6ed635b6c3c112666487683cb7f8e8?s=140&amp;d=retro&amp;r=pg 2x\" class=\"avatar avatar-70 photo\" height=\"70\" width=\"70\" loading=\"lazy\"></div><p class=\"bio-description\"></p></div></div><div class=\"feedback\"></div></div>"}