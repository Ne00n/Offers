{"id": "23443", "post": "<div class=\"post-23443 post type-post status-publish format-standard hentry category-tutorials tag-remote-desktop tag-secure-vnc tag-vnc-remote-desktop\" id=\"post-23443\"><h2 class=\"storytitle\"><a href=\"https://lowendbox.com/blog/how-to-setup-secure-remote-desktops-with-vnc-on-your-vps/\" rel=\"bookmark\">How to Setup Secure Remote Desktops With VNC on Your VPS</a></h2><div class=\"meta\"><img data-lazyloaded=\"1\" src=\"/media/icons/tag_green.png\" data-src=\"/media/icons/tag_green.png\" alt=\"Tags: \" class=\"litespeed-loaded\" data-was-processed=\"true\"> <a href=\"https://lowendbox.com/tag/remote-desktop/\" rel=\"tag\">remote desktop</a>, <a href=\"https://lowendbox.com/tag/secure-vnc/\" rel=\"tag\">secure vnc</a>, <a href=\"https://lowendbox.com/tag/vnc-remote-desktop/\" rel=\"tag\">vnc remote desktop</a> <img data-lazyloaded=\"1\" src=\"https://lowendbox.com/media/icons/calendar.png\" data-src=\"https://lowendbox.com/media/icons/calendar.png\" alt=\"Date/Time: \" class=\"litespeed-loaded\" data-was-processed=\"true\"> May 7, 2021 @ 6:05 am, by raindog308</div><div class=\"storycontent tablelook\"><p><a target=\"_blank\" rel=\"noopener noreferrer\"><img data-lazyloaded=\"1\" src=\"https://lowendbox.com/wp-content/uploads/2020/05/secure-remote-desktops-with-vnc.jpg.webp\" loading=\"lazy\" class=\"screenshot litespeed-loaded\" title=\"How to Setup Secure Remote Desktops With VNC on Your VPS\" data-src=\"https://lowendbox.com/wp-content/uploads/2020/05/secure-remote-desktops-with-vnc.jpg.webp\" alt=\"How to Setup Secure Remote Desktops With VNC on Your VPS\" width=\"410\" height=\"235\" data-was-processed=\"true\"></a>Most of what you do with your VPS may take place either at the command line or by interacting with various web pages.&nbsp; But what if you need to run a desktop GUI application?&nbsp; That\u2019s where VNC (Virtual Network Computing) comes in handy.&nbsp; You can \u201cremote desktop\u201d into your VPS.</p><p>In this tutorial, I\u2019ll setup a Gnome desktop on Debian 10 and connect to it from both macOS and&nbsp; Windows.&nbsp; Because VNC is not a secure protocol, we won\u2019t serve it over the Internet but instead tunnel it over ssh.</p><h1>Setting Up the VPS</h1><p>In this tutorial, I\u2019m using a Debian 10 VPS at Linode\u2019s Fremont, CA datacenter named vnc.lowend.party.&nbsp; After imaging, I login as root and install the Gnome desktop.</p><p><span id=\"more-23443\"></span></p><pre>apt-get update\napt-get upgrade\ntasksel install desktop gnome-desktop</pre><p><img data-lazyloaded=\"1\" src=\"https://lowendbox.com/wp-content/uploads/2020/05/vnc-1.png.webp\" loading=\"lazy\" class=\"alignnone size-full wp-image-23445 litespeed-loaded\" data-src=\"https://lowendbox.com/wp-content/uploads/2020/05/vnc-1.png.webp\" alt=\"\" width=\"800\" height=\"448\" data-srcset=\"https://lowendbox.com/wp-content/uploads/2020/05/vnc-1.png.webp 800w, https://lowendbox.com/wp-content/uploads/2020/05/vnc-1-300x168.png.webp 300w, https://lowendbox.com/wp-content/uploads/2020/05/vnc-1-768x430.png.webp 768w\" data-sizes=\"(max-width: 800px) 100vw, 800px\" sizes=\"(max-width: 800px) 100vw, 800px\" srcset=\"https://lowendbox.com/wp-content/uploads/2020/05/vnc-1.png.webp 800w, https://lowendbox.com/wp-content/uploads/2020/05/vnc-1-300x168.png.webp 300w, https://lowendbox.com/wp-content/uploads/2020/05/vnc-1-768x430.png.webp 768w\" data-was-processed=\"true\"></p><p>As you\u2019ll see, there are more than 1,000 packages to install here, so go for a nice walk.&nbsp; When you come back,&nbsp;install the VNC software itself:</p><pre>apt-get install vnc4server</pre><p>Finally, I want the system to start up in GUI as opposed to headless mode, so let\u2019s change the default systemd target.</p><pre>systemctl set-default graphical.target</pre><p>Then to both test this and get the GUI fired up, I\u2019ll just restart the VPS:</p><pre>reboot</pre><p>I\u2019m going to login as an unprivileged user when I use VNC, so I\u2019ll create an account for myself.</p><pre>useradd -m -s /bin/bash raindog308\npasswd raindog308</pre><p>I\u2019ll now switch to this account.</p><pre>su - raindog308</pre><p>I need to set a VNC password, so I\u2019ll use the vncpasswd command.&nbsp; Note that VNC only allows passwords up to 8 characters.</p><pre>raindog308@vnc:~$ vncpasswd\nPassword:\nVerify:\nWould you like to enter a view-only password (y/n)? n\nraindog308@vnc:~$</pre><p>Now I can start up a VNC server.</p><pre>raindog308@vnc:~$ vncserver\n/usr/bin/xauth: file /home/raindog308/.Xauthority does not exist\n\nNew 'vnc.lowend.party:1 (raindog308)' desktop at :1 on machine vnc.lowend.party\n\nStarting applications specified in /etc/X11/Xvnc-session\nLog file is /home/raindog308/.vnc/vnc.lowend.party:1.log\n\nUse xtigervncviewer -SecurityTypes VncAuth -passwd /home/raindog308/.vnc/passwd :1 to connect to the VNC server.\n\nraindog308@vnc:~$</pre><p>Before we go further, let\u2019s check out security.&nbsp; go back to root and install nmap.</p><pre>apt-get install nmap</pre><p>Now do a couple scans.&nbsp; VNC runs on ports beginning with 5901, where the last digits are the number of the connection.&nbsp; Let\u2019s see what\u2019s running both on the public interface and on localhost (127.0.0.1):</p><pre>root@vnc:~# <strong>nmap vnc.lowend.party -p5900-5902</strong>\nStarting Nmap 7.70 ( https://nmap.org ) at 2020-05-24 16:09 PDT\nNmap scan report for vnc.lowend.party (45.79.66.140)\nHost is up (0.000046s latency).\nrDNS record for 45.79.66.140: li1165-140.members.linode.com\n\nPORT STATE SERVICE\n5900/tcp closed vnc\n5901/tcp closed vnc-1\n5902/tcp closed vnc-2\n\nNmap done: 1 IP address (1 host up) scanned in 0.29 seconds\nroot@vnc:~# <strong>nmap localhost -p5900-5902</strong>\nStarting Nmap 7.70 ( https://nmap.org ) at 2020-05-24 16:09 PDT\nNmap scan report for localhost (127.0.0.1)\nHost is up (0.000027s latency).\nOther addresses for localhost (not scanned): ::1\n\nPORT STATE SERVICE\n5900/tcp closed vnc\n5901/tcp open vnc-1\n5902/tcp closed vnc-2\n\nNmap done: 1 IP address (1 host up) scanned in 0.25 seconds\nroot@vnc:~#</pre><p>So we can see that the default Debian config binds VNC only to localhost, not to the public interface.&nbsp; &nbsp;This is good!</p><h1>Tunneling From macOS</h1><p>I can use macOS\u2019s command line to setup the tunnel:</p><pre>$ ssh raindog308@vnc.lowend.party -L 5901:localhost:5901\nThe authenticity of host 'vnc.lowend.party (x.x.x.x)' can't be established.\nECDSA key fingerprint is SHA256:6I33xSZa6+028+2VswynZWH+ztTPQscUzeaAeJLsKQA.\nAre you sure you want to continue connecting (yes/no/[fingerprint])? yes\nWarning: Permanently added 'vnc.lowend.party,x.x.x.x' (ECDSA) to the list of known hosts.\nraindog308@vnc.lowend.party's password:\nLinux vnc.lowend.party 4.19.0-9-amd64 #1 SMP Debian 4.19.118-2 (2020-04-29) x86_64\n\nThe programs included with the Debian GNU/Linux system are free software;\nthe exact distribution terms for each program are described in the\nindividual files in /usr/share/doc/*/copyright.\n\nDebian GNU/Linux comes with ABSOLUTELY NO WARRANTY, to the extent\npermitted by applicable law.\nLast login: Sun May 24 16:10:29 2020 from x.x.x.x\nraindog308@vnc:~$</pre><p>Next go to Finder and type Command-K.&nbsp; Then specify the VNC connection to connect to:</p><p><img data-lazyloaded=\"1\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0NTAiIGhlaWdodD0iNjgiIHZpZXdCb3g9IjAgMCA0NTAgNjgiPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9IiNjZmQ0ZGIiLz48L3N2Zz4=\" loading=\"lazy\" class=\"alignnone size-full wp-image-23446\" data-src=\"https://lowendbox.com/wp-content/uploads/2020/05/vnc-2.png.webp\" alt=\"\" width=\"450\" height=\"68\" data-srcset=\"https://lowendbox.com/wp-content/uploads/2020/05/vnc-2.png.webp 450w, https://lowendbox.com/wp-content/uploads/2020/05/vnc-2-300x45.png.webp 300w\" data-sizes=\"(max-width: 450px) 100vw, 450px\"></p><p>And when prompted, enter the password you setup with vncpasswd:</p><p><img data-lazyloaded=\"1\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0NTAiIGhlaWdodD0iMTkzIiB2aWV3Qm94PSIwIDAgNDUwIDE5MyI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iI2NmZDRkYiIvPjwvc3ZnPg==\" loading=\"lazy\" class=\"alignnone size-full wp-image-23447\" data-src=\"https://lowendbox.com/wp-content/uploads/2020/05/vnc-3.png.webp\" alt=\"\" width=\"450\" height=\"193\" data-srcset=\"https://lowendbox.com/wp-content/uploads/2020/05/vnc-3.png.webp 450w, https://lowendbox.com/wp-content/uploads/2020/05/vnc-3-300x129.png.webp 300w\" data-sizes=\"(max-width: 450px) 100vw, 450px\"></p><p>And now you\u2019ve joined.</p><p><img data-lazyloaded=\"1\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI4MDAiIGhlaWdodD0iNTYyIiB2aWV3Qm94PSIwIDAgODAwIDU2MiI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iI2NmZDRkYiIvPjwvc3ZnPg==\" loading=\"lazy\" class=\"alignnone size-full wp-image-23448\" data-src=\"https://lowendbox.com/wp-content/uploads/2020/05/vnc-4.png.webp\" alt=\"\" width=\"800\" height=\"562\" data-srcset=\"https://lowendbox.com/wp-content/uploads/2020/05/vnc-4.png.webp 800w, https://lowendbox.com/wp-content/uploads/2020/05/vnc-4-300x211.png.webp 300w, https://lowendbox.com/wp-content/uploads/2020/05/vnc-4-768x540.png.webp 768w\" data-sizes=\"(max-width: 800px) 100vw, 800px\"></p><p>Note that closing the ssh session will kill your VNC connection as well.</p><h1>Tunneling from Windows</h1><p>To tunnel from Windows, we\u2019ll use the venerable <a href=\"https://www.chiark.greenend.org.uk/~sgtatham/putty/latest.html\">PuTTY</a> program.</p><p>Start PuTTY and then go to the Connect &gt; SSH &gt; Tunnels section.&nbsp; Under Source Port, enter 5901.&nbsp; Under Destination, enter 127.0.0.1:5901.&nbsp; Then click Add.</p><p><img data-lazyloaded=\"1\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI4MDAiIGhlaWdodD0iNzg1IiB2aWV3Qm94PSIwIDAgODAwIDc4NSI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iI2NmZDRkYiIvPjwvc3ZnPg==\" loading=\"lazy\" class=\"alignnone size-full wp-image-23449\" data-src=\"https://lowendbox.com/wp-content/uploads/2020/05/vnc-5.png.webp\" alt=\"\" width=\"800\" height=\"785\" data-srcset=\"https://lowendbox.com/wp-content/uploads/2020/05/vnc-5.png.webp 800w, https://lowendbox.com/wp-content/uploads/2020/05/vnc-5-300x294.png.webp 300w, https://lowendbox.com/wp-content/uploads/2020/05/vnc-5-768x754.png.webp 768w\" data-sizes=\"(max-width: 800px) 100vw, 800px\"></p><p>Now go back the Session and enter the hostname and a name for the session (can be the same as the hostname) and click Save.</p><p><img data-lazyloaded=\"1\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI4MDAiIGhlaWdodD0iNzg0IiB2aWV3Qm94PSIwIDAgODAwIDc4NCI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iI2NmZDRkYiIvPjwvc3ZnPg==\" loading=\"lazy\" class=\"alignnone size-full wp-image-23450\" data-src=\"https://lowendbox.com/wp-content/uploads/2020/05/vnc-6.png.webp\" alt=\"\" width=\"800\" height=\"784\" data-srcset=\"https://lowendbox.com/wp-content/uploads/2020/05/vnc-6.png.webp 800w, https://lowendbox.com/wp-content/uploads/2020/05/vnc-6-300x294.png.webp 300w, https://lowendbox.com/wp-content/uploads/2020/05/vnc-6-768x753.png.webp 768w\" data-sizes=\"(max-width: 800px) 100vw, 800px\"></p><p>Now, with that session selected, click Open.&nbsp; Enter your credentials and login.</p><p><img data-lazyloaded=\"1\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI4MDAiIGhlaWdodD0iNTA5IiB2aWV3Qm94PSIwIDAgODAwIDUwOSI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iI2NmZDRkYiIvPjwvc3ZnPg==\" loading=\"lazy\" class=\"alignnone size-full wp-image-23451\" data-src=\"https://lowendbox.com/wp-content/uploads/2020/05/vnc-7.png.webp\" alt=\"\" width=\"800\" height=\"509\" data-srcset=\"https://lowendbox.com/wp-content/uploads/2020/05/vnc-7.png.webp 800w, https://lowendbox.com/wp-content/uploads/2020/05/vnc-7-300x191.png.webp 300w, https://lowendbox.com/wp-content/uploads/2020/05/vnc-7-768x489.png.webp 768w\" data-sizes=\"(max-width: 800px) 100vw, 800px\"></p><p>I\u2019m using <a href=\"https://www.realvnc.com/en/connect/download/viewer/\">RealVNC</a> as the VNC client (also known as the \u201cviewer\u201d).&nbsp; Star the program and then enter 127.0.0.1:1 in the VNC Server section.&nbsp; Then click Connect.</p><p><img data-lazyloaded=\"1\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0NTAiIGhlaWdodD0iMjI4IiB2aWV3Qm94PSIwIDAgNDUwIDIyOCI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iI2NmZDRkYiIvPjwvc3ZnPg==\" loading=\"lazy\" class=\"alignnone size-full wp-image-23452\" data-src=\"https://lowendbox.com/wp-content/uploads/2020/05/vnc-8.png.webp\" alt=\"\" width=\"450\" height=\"228\" data-srcset=\"https://lowendbox.com/wp-content/uploads/2020/05/vnc-8.png.webp 450w, https://lowendbox.com/wp-content/uploads/2020/05/vnc-8-300x152.png.webp 300w\" data-sizes=\"(max-width: 450px) 100vw, 450px\"></p><p>The VNC password prompt appears.&nbsp; Enter the password you entered with the vncpasswd program.</p><p><img data-lazyloaded=\"1\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0NTAiIGhlaWdodD0iMjAyIiB2aWV3Qm94PSIwIDAgNDUwIDIwMiI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iI2NmZDRkYiIvPjwvc3ZnPg==\" loading=\"lazy\" class=\"alignnone size-full wp-image-23453\" data-src=\"https://lowendbox.com/wp-content/uploads/2020/05/vnc-9.png.webp\" alt=\"\" width=\"450\" height=\"202\" data-srcset=\"https://lowendbox.com/wp-content/uploads/2020/05/vnc-9.png.webp 450w, https://lowendbox.com/wp-content/uploads/2020/05/vnc-9-300x135.png.webp 300w\" data-sizes=\"(max-width: 450px) 100vw, 450px\"></p><p>And now you\u2019re logged in to your desktop.</p><p><img data-lazyloaded=\"1\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI4MDAiIGhlaWdodD0iNDUyIiB2aWV3Qm94PSIwIDAgODAwIDQ1MiI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iI2NmZDRkYiIvPjwvc3ZnPg==\" loading=\"lazy\" class=\"alignnone size-full wp-image-23454\" data-src=\"https://lowendbox.com/wp-content/uploads/2020/05/vnc-10.png.webp\" alt=\"\" width=\"800\" height=\"452\" data-srcset=\"https://lowendbox.com/wp-content/uploads/2020/05/vnc-10.png.webp 800w, https://lowendbox.com/wp-content/uploads/2020/05/vnc-10-300x170.png.webp 300w, https://lowendbox.com/wp-content/uploads/2020/05/vnc-10-768x434.png.webp 768w\" data-sizes=\"(max-width: 800px) 100vw, 800px\"></p><div class=\"relpost-thumb-wrapper\"><div class=\"relpost-thumb-container\"><h3>Related posts:</h3><div style=\"clear: both\"></div><div style=\"clear: both\"></div><div class=\"relpost-block-container\"><a class=\"relpost-block-single\" href=\"https://lowendbox.com/blog/how-to-access-a-windows-vps-using-remote-desktop/\"><div class=\"relpost-custom-block-single\" style=\"width: 150px; height: 215px;\"><div class=\"relpost-block-single-image\" alt=\"How to Access a Windows VPS using Remote Desktop\" style=\"background: transparent url(https://lowendbox.com/wp-content/uploads/2020/06/how-to-access-a-windows-vps-using-remote-desktop-150x150.jpg) no-repeat scroll 0% 0%; width: 150px; height: 150px;\"></div><div class=\"relpost-block-single-text\" style=\"font-family: Arial;  font-size: 12px;  color: #333333;\">How to Access a Windows VPS using Remote Desktop</div></div></a><a class=\"relpost-block-single\" href=\"https://lowendbox.com/blog/how-to-install-remote-desktop-on-ubuntu-20-04-with-xrdp/\"><div class=\"relpost-custom-block-single\" style=\"width: 150px; height: 215px;\"><div class=\"relpost-block-single-image\" alt=\"How to Install Remote Desktop on Ubuntu 20.04 with XRDP\" style=\"background: transparent url(https://lowendbox.com/wp-content/uploads/2020/06/how-to-install-remote-desktop-with-xrdp-ubuntu-20-04-150x150.jpg) no-repeat scroll 0% 0%; width: 150px; height: 150px;\"></div><div class=\"relpost-block-single-text\" style=\"font-family: Arial;  font-size: 12px;  color: #333333;\">How to Install Remote Desktop on Ubuntu 20.04 with XRDP</div></div></a><a class=\"relpost-block-single\" href=\"https://lowendbox.com/blog/how-to-setup-a-browser-based-desktop-with-a-single-script/\"><div class=\"relpost-custom-block-single\" style=\"width: 150px; height: 215px;\"><div class=\"relpost-block-single-image\" alt=\"How to Setup a Browser-Based Desktop with a Single Script\" style=\"background: transparent url(https://lowendbox.com/wp-content/uploads/2020/08/guac1-150x150.png) no-repeat scroll 0% 0%; width: 150px; height: 150px;\"></div><div class=\"relpost-block-single-text\" style=\"font-family: Arial;  font-size: 12px;  color: #333333;\">How to Setup a Browser-Based Desktop with a Single Script</div></div></a></div><div style=\"clear: both\"></div></div></div><div id=\"author-bio-box\" style=\"background: #f8f8f8; border-top: 2px solid #cccccc; border-bottom: 2px solid #cccccc; color: #333333\"><h3><a style=\"color: #555555;\" href=\"https://lowendbox.com/blog/author/raindog308/\" title=\"All posts by raindog308\" rel=\"author\">raindog308</a></h3><div class=\"bio-gravatar\"><img data-lazyloaded=\"1\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3MCIgaGVpZ2h0PSI3MCIgdmlld0JveD0iMCAwIDcwIDcwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjY2ZkNGRiIi8+PC9zdmc+\" alt=\"\" data-src=\"https://secure.gravatar.com/avatar/4ce3b8640a70e05bd73ac25b8a37821c?s=70&amp;d=retro&amp;r=pg\" data-srcset=\"https://secure.gravatar.com/avatar/4ce3b8640a70e05bd73ac25b8a37821c?s=140&amp;d=retro&amp;r=pg 2x\" class=\"avatar avatar-70 photo\" height=\"70\" width=\"70\" loading=\"lazy\"></div><a target=\"_blank\" rel=\"nofollow noopener noreferrer\" href=\"https://www.lowendtalk.com/profile/raindog308\" class=\"bio-icon bio-icon-website\"></a><p class=\"bio-description\">I'm Andrew, techno polymath and long-time LowEndTalk community Moderator. My technical interests include all things Unix, perl, python, shell scripting, and relational database systems. I enjoy writing technical articles here on LowEndBox to help people get more out of their VPSes.</p></div></div><div class=\"feedback\"></div></div>"}