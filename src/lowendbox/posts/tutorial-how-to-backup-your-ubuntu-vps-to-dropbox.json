{"id": "8969", "post": "<div class=\"post-8969 post type-post status-publish format-standard hentry category-tutorials\" id=\"post-8969\"><h2 class=\"storytitle\"><a href=\"https://lowendbox.com/blog/tutorial-how-to-backup-your-ubuntu-vps-to-dropbox/\" rel=\"bookmark\">Tutorial \u2013 How to Backup your Ubuntu VPS to DropBox</a></h2><div class=\"meta\"><img data-lazyloaded=\"1\" src=\"https://lowendbox.com/media/icons/calendar.png\" data-src=\"https://lowendbox.com/media/icons/calendar.png\" alt=\"Date/Time: \" class=\"litespeed-loaded\" data-was-processed=\"true\"> August 29, 2016 @ 6:01 pm, by SysAdmin</div><div class=\"storycontent tablelook\"><p><span style=\"font-family: Calibri, serif;\">Automatically backing up files from a VPS to your DropBox account is simpler than you might think. </span></p><p><span style=\"font-family: Calibri, serif;\">When you configure your VPS to automatically send backups to your DropBox storage account, you can be assured that critical files on your VPS are backed up in a cloud data center that features multiple levels of redundancy. </span></p><p><span style=\"font-family: Calibri, serif;\">This type of backup scheme could be necessary for critical apps running on a VPS. If you found yourself in a disaster recovery scenario, it would be much easier to restore your files from a cloud backup than to wait on your data center to find the files on a tape backup.</span></p><p><span style=\"font-family: Calibri, serif;\">In this article, we will assume you are using the last version of Ubuntu 16.04. So let\u2019s get started! We will also assume that you already have a DropBox account. If you do not, go ahead and register for a free account now by visiting:</span></p><ul><li><a class=\"western\" href=\"https://www.dropbox.com/\"><span style=\"font-family: Calibri, serif;\"><i>https://www.dropbox.com</i></span></a></li></ul><p><span style=\"font-family: Calibri, serif;\">Once you are logged in, copy and paste the following address into your browser:</span></p><ul><li><a class=\"western\" href=\"https://www.dropbox.com/developers/apps\"><span style=\"font-family: Calibri, serif;\"><i>https://www.dropbox.com/developers/apps</i></span></a></li></ul><p><span style=\"font-family: Calibri, serif;\">Click the \u201cCreate App\u201d button and then select the following from the first question:</span></p><ul><li><span style=\"font-family: Calibri, serif;\"><i><b>DropBox API</b></i></span></li></ul><p><span id=\"more-8969\"></span></p><p><span style=\"font-family: Calibri, serif;\">In the section titled \u201c2. Choose the type of access you need\u201d select:</span></p><ul><li><span style=\"font-family: Calibri, serif;\"><i><b>App folder</b></i></span><span style=\"font-family: Calibri, serif;\"><i> \u2013 </i></span><span style=\"font-family: Calibri, serif;\"><i><b>Access to a single folder created specifically for your app.</b></i></span></li></ul><p><span style=\"font-family: Calibri, serif;\">Now select a name for your app, in our example we will use \u201ceasyBackup\u201d. Accept the Terms and Conditions and then click \u201cCreate App\u201d.</span></p><p><span style=\"font-family: Calibri, serif;\">On the next screen you will need to press the \u201cGenerate\u201d button under the section titled \u201cGenerate access token\u201d, take note of the code and keep it since we will be using it in the next steps.</span></p><p><span style=\"font-family: Calibri, serif;\">Now that our DropBox account is ready, let\u2019s configure our VPS. First, we must install cURL. cURL is a command line tool for transferring data using various protocols \u2013 FTP, FTPS, HTTP, HTTPS and many more. To install it on our VPS, type the following command in an SSH session:</span></p><p style=\"padding-left: 30px;\"><span style=\"font-family: Calibri, serif;\"><i>&gt; sudo apt-get install curl</i></span></p><p><span style=\"font-family: Calibri, serif;\">You will now need to download and install the DropBox Uploader script. As name suggests, the Dropbox Uploader is a simple bash script which can be used to upload, download, delete, and manipulate files with DropBox. To download and install it, simply execute the following commands:</span></p><p style=\"padding-left: 30px;\"><span style=\"font-family: Calibri, serif;\"><i>&gt; mkdir dropbox</i></span></p><p style=\"padding-left: 30px;\"><span style=\"font-family: Calibri, serif;\"><i>&gt; cd dropbox</i></span></p><p style=\"padding-left: 30px;\"><span style=\"font-family: Calibri, serif;\"><i>&gt; curl \u201chttps://raw.githubusercontent.com/andreafabrizi/Dropbox-Uploader/master/dropbox_uploader.sh\u201d -o dropbox_uploader.sh</i></span></p><p style=\"padding-left: 30px;\"><span style=\"font-family: Calibri, serif;\"><i>&gt; chmod 755 dropbox_uploader.sh</i></span></p><p style=\"padding-left: 30px;\"><span style=\"font-family: Calibri, serif;\"><i>&gt; ./dropbox_uploader.sh</i></span></p><p><span style=\"font-family: Calibri, serif;\">When the script is executed for the first time, it will ask you to customize your install. It will prompt you for the Access Token that we generated in previous steps. Copy and paste that into the terminal session and answer yes to the next question.</span></p><p><span style=\"font-family: Calibri, serif;\">To test that everything is OK, let\u2019s try to upload the dropbox_uploader.sh script itself. Simply run the following command:</span></p><p style=\"padding-left: 30px;\"><span style=\"font-family: Calibri, serif;\"><i>&gt; ./dropbox_uploader.sh -k upload dropbox_uploader.sh .</i></span></p><p><span style=\"font-family: Calibri, serif;\">When you go to your DropBox account, you should now see the application folder and inside of it a folder with the name of your app, in this case \u201ceasyBackup\u201d. </span></p><p><span style=\"font-family: Calibri, serif;\">We are now ready to set up our daily backup script. Let\u2019s create the following file in our home directory on the VPS:</span></p><p style=\"padding-left: 30px;\"><span style=\"font-family: Calibri, serif;\"><i>&gt; vim backup.sh</i></span></p><p><span style=\"font-family: Calibri, serif;\">We are using </span><span style=\"font-family: Calibri, serif;\"><i>vim</i></span><span style=\"font-family: Calibri, serif;\">, but you may use the editor that you prefer. Paste the following lines into the new file:</span></p><p><span style=\"font-family: Calibri, serif;\"><i>\u2014\u2013</i></span></p><p style=\"padding-left: 30px;\"><span style=\"font-family: Calibri, serif;\"><i>#!/bin/bash</i></span></p><p style=\"padding-left: 30px;\"><span style=\"font-family: Calibri, serif;\"><i>TMP_DIR=\u201d/tmp/\u201d</i></span></p><p style=\"padding-left: 30px;\"><span style=\"font-family: Calibri, serif;\"><i>DATE=$(date +\u201d%d-%m-%Y_%H%M\u201d)</i></span></p><p style=\"padding-left: 30px;\"><span style=\"font-family: Calibri, serif;\"><i>BKP_FILE=\u201d$TMP_DIR/MyBkp_$DATE.tar\u201d</i></span></p><p style=\"padding-left: 30px;\"><span style=\"font-family: Calibri, serif;\"><i>BKP_DIRS=\u201d/var/www /etc\u201d</i></span></p><p style=\"padding-left: 30px;\"><span style=\"font-family: Calibri, serif;\"><i>DROPBOX_UPLOADER=/path/to/dropbox_uploader.sh</i></span></p><p style=\"padding-left: 30px;\"><span style=\"font-family: Calibri, serif;\"><i>tar cf \u201c$BKP_FILE\u201d $BKP_DIRS</i></span></p><p style=\"padding-left: 30px;\"><span style=\"font-family: Calibri, serif;\"><i>gzip \u201c$BKP_FILE\u201d</i></span></p><p style=\"padding-left: 30px;\"><span style=\"font-family: Calibri, serif;\"><i>$DROPBOX_UPLOADER -f /root/.dropbox_uploader upload \u201c$BKP_FILE.gz\u201d /</i></span></p><p style=\"padding-left: 30px;\"><span style=\"font-family: Calibri, serif;\"><i>rm -fr \u201c$BKP_FILE.gz\u201d</i></span></p><p><span style=\"font-family: Calibri, serif;\"><i>\u2014\u2013</i></span></p><p><span style=\"font-family: Calibri, serif;\">In this example we are assuming you will backup the following directories:</span></p><p style=\"padding-left: 30px;\"><span style=\"font-family: Calibri, serif;\"><i>/var/www</i></span></p><p style=\"padding-left: 30px;\"><span style=\"font-family: Calibri, serif;\"><i>/etc</i></span></p><p><span style=\"font-family: Calibri, serif;\">In case you will want to change or add different ones, simply modify the following line of the script:</span></p><p style=\"padding-left: 30px;\"><span style=\"font-family: Calibri, serif;\">BKP_DIRS=\u201d/dir1 /dir2 /dir3 \u2026 /dirX\u201d</span></p><p><span style=\"font-family: Calibri, serif;\">Now let\u2019s add execution permissions to the backup script using the following command:</span></p><p style=\"padding-left: 30px;\"><span style=\"font-family: Calibri, serif;\"><i>&gt; chmod 755 backup.sh</i></span></p><p><span style=\"font-family: Calibri, serif;\">The last step is to add the following line to the crontab:</span></p><p style=\"padding-left: 30px;\"><span style=\"font-family: Calibri, serif;\">00 00 * * * /path/to/backup.sh 2&gt;&amp;1 &gt;&gt; /var/log/backup.log</span></p><p><span style=\"font-family: Calibri, serif;\">This will execute the script every night at 12AM and generate a log with the output of the execution. </span></p><p><span style=\"font-family: Calibri, serif;\">Keep in mind that your DropBox account is not limitless, so remember to clean up some of the older files to avoid going past your quota. </span></p><p><span style=\"font-family: Calibri, serif;\">If you\u2019d rather not deal with the process of cleaning up your old backups, use this version of the script that only generates a single backup file. The caveat is that the previous day\u2019s backup is overwritten when the newest backup job is executed. Use the same process described above with the following script:</span></p><p><span style=\"font-family: Calibri, serif;\"><i>\u2014\u2013</i></span></p><p style=\"padding-left: 30px;\"><span style=\"font-family: Calibri, serif;\"><i>#!/bin/bash</i></span></p><p style=\"padding-left: 30px;\"><span style=\"font-family: Calibri, serif;\"><i>TMP_DIR=\u201d/tmp/\u201d</i></span></p><p style=\"padding-left: 30px;\"><span style=\"font-family: Calibri, serif;\"><i>BKP_FILE=\u201d$TMP_DIR/MyBkp.tar\u201d</i></span></p><p style=\"padding-left: 30px;\"><span style=\"font-family: Calibri, serif;\"><i>BKP_DIRS=\u201d/var/www /etc\u201d</i></span></p><p style=\"padding-left: 30px;\"><span style=\"font-family: Calibri, serif;\"><i>DROPBOX_UPLOADER=/path/to/dropbox_uploader.sh</i></span></p><p style=\"padding-left: 30px;\"><span style=\"font-family: Calibri, serif;\"><i>tar cf \u201c$BKP_FILE\u201d $BKP_DIRS</i></span></p><p style=\"padding-left: 30px;\"><span style=\"font-family: Calibri, serif;\"><i>gzip \u201c$BKP_FILE\u201d</i></span></p><p style=\"padding-left: 30px;\"><span style=\"font-family: Calibri, serif;\"><i>$DROPBOX_UPLOADER -f /root/.dropbox_uploader upload \u201c$BKP_FILE.gz\u201d /</i></span></p><p style=\"padding-left: 30px;\"><span style=\"font-family: Calibri, serif;\"><i>rm -fr \u201c$BKP_FILE.gz\u201d</i></span></p><p><span style=\"font-family: Calibri, serif;\"><i>\u2014\u2013</i></span></p><p class=\"dpsp-share-text\"></p><div id=\"dpsp-content-bottom\" class=\"dpsp-content-wrapper dpsp-shape-rounded dpsp-column-auto dpsp-has-spacing dpsp-no-labels dpsp-show-on-mobile dpsp-button-style-1 dpsp-has-icon-background dpsp-has-button-background dpsp-show-total-share-count dpsp-show-total-share-count-after\"><ul class=\"dpsp-networks-btns-wrapper dpsp-networks-btns-content dpsp-has-button-icon-animation\"><li><a rel=\"nofollow\" href=\"https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Flowendbox.com%2Fblog%2Ftutorial-how-to-backup-your-ubuntu-vps-to-dropbox%2F&amp;t=Tutorial%20-%20How%20to%20Backup%20your%20Ubuntu%20VPS%20to%20DropBox\" class=\"dpsp-network-btn dpsp-facebook dpsp-no-label dpsp-first\" title=\"Share on Facebook\"><span class=\"dpsp-network-icon\"></span><span class=\"dpsp-network-label-wrapper\"></span></a></li><li><a rel=\"nofollow\" href=\"https://twitter.com/intent/tweet?text=Tutorial%20-%20How%20to%20Backup%20your%20Ubuntu%20VPS%20to%20DropBox&amp;url=https%3A%2F%2Flowendbox.com%2Fblog%2Ftutorial-how-to-backup-your-ubuntu-vps-to-dropbox%2F&amp;via=LowEndNetwork\" class=\"dpsp-network-btn dpsp-twitter dpsp-no-label\" title=\"Share on Twitter\"><span class=\"dpsp-network-icon\"></span><span class=\"dpsp-network-label-wrapper\"></span></a></li><li><a rel=\"nofollow\" href=\"https://www.linkedin.com/shareArticle?url=https%3A%2F%2Flowendbox.com%2Fblog%2Ftutorial-how-to-backup-your-ubuntu-vps-to-dropbox%2F&amp;title=Tutorial%20-%20How%20to%20Backup%20your%20Ubuntu%20VPS%20to%20DropBox&amp;mini=true\" class=\"dpsp-network-btn dpsp-linkedin dpsp-no-label dpsp-last\" title=\"Share on LinkedIn\"><span class=\"dpsp-network-icon\"></span><span class=\"dpsp-network-label-wrapper\"></span></a></li></ul><div class=\"dpsp-total-share-wrapper\"><span class=\"dpsp-icon-total-share\"></span><span class=\"dpsp-total-share-count\">0</span><span>shares</span></div></div><div id=\"author-bio-box\" style=\"background: #f8f8f8; border-top: 2px solid #cccccc; border-bottom: 2px solid #cccccc; color: #333333\"><h3><a style=\"color: #555555;\" href=\"https://lowendbox.com/blog/author/sysadmin/\" title=\"All posts by SysAdmin\" rel=\"author\">SysAdmin</a></h3><div class=\"bio-gravatar\"><img data-lazyloaded=\"1\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3MCIgaGVpZ2h0PSI3MCIgdmlld0JveD0iMCAwIDcwIDcwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjY2ZkNGRiIi8+PC9zdmc+\" alt=\"\" data-src=\"https://secure.gravatar.com/avatar/5643ecc712d8cfd7617ed9f0e45dc348?s=70&amp;d=retro&amp;r=pg\" data-srcset=\"https://secure.gravatar.com/avatar/5643ecc712d8cfd7617ed9f0e45dc348?s=140&amp;d=retro&amp;r=pg 2x\" class=\"avatar avatar-70 photo\" height=\"70\" width=\"70\" loading=\"lazy\"></div><a target=\"_blank\" rel=\"nofollow noopener noreferrer\" href=\"http://www.lowendbox.com\" class=\"bio-icon bio-icon-website\"></a><p class=\"bio-description\"></p></div></div><div class=\"feedback\"></div></div>"}