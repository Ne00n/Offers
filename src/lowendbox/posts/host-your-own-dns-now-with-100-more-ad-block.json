{"id": "9092", "post": "<div class=\"post-9092 post type-post status-publish format-standard hentry category-virtual-servers category-tutorials tag-ad-block\" id=\"post-9092\"><h2 class=\"storytitle\"><a href=\"https://lowendbox.com/blog/host-your-own-dns-now-with-100-more-ad-block/\" rel=\"bookmark\">Host your own DNS, now with 100% more ad block!</a></h2><div class=\"meta\"><img data-lazyloaded=\"1\" src=\"data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=\" data-src=\"/media/icons/tag_green.png\" alt=\"Tags: \"> <a href=\"https://lowendbox.com/tag/ad-block/\" rel=\"tag\">ad block</a> <img data-lazyloaded=\"1\" src=\"data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=\" data-src=\"https://lowendbox.com/media/icons/calendar.png\" alt=\"Date/Time: \"> September 20, 2016 @ 4:26 pm, by SysAdmin</div><div class=\"storycontent tablelook\"><p style=\"text-align: center;\"><a href=\"https://lowendbox.com/wp-content/uploads/2013/05/lowendtutorial.png\"><img data-lazyloaded=\"1\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNzEiIGhlaWdodD0iNzAiIHZpZXdCb3g9IjAgMCAyNzEgNzAiPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9IiNjZmQ0ZGIiLz48L3N2Zz4=\" loading=\"lazy\" class=\"alignnone size-full wp-image-3957\" data-src=\"https://lowendbox.com/wp-content/uploads/2013/05/lowendtutorial.png.webp\" alt=\"lowendtutorial\" width=\"271\" height=\"70\"></a></p><p>One of your essential addons for your web browsers is almost definitely some sort of ad blocker. Resources like bandwidth are a precious resource, especially when your ISP is of the many that limit it on a monthly basis.&nbsp;Another great benefit of having ad blocking software is that you risk a much lower chance of being infected by drive by malware, served by ads themselves. Not loading ads also means\u2026 less loading! Why don\u2019t we take the load off our machines even less by removing our ad block extensions?</p><p><span id=\"more-9092\"></span>Additional note, contributed by LowEndTalk member <a href=\"https://www.lowendtalk.com/profile/Joepie91\">@JoePie91</a>, please always remember to check the content of third party scripts before run-time.</p><p>For what you\u2019ll see in this tutorial, it is assumed you\u2019re working with a clean Debian 8.0 template.&nbsp;First off, we\u2019ll use apt to install dnsmasq, the only requirement for this to work, and tell it to start by default.</p><blockquote><p style=\"padding-left: 30px;\">apt-get update &amp;&amp; apt-get install dnsmasq -y<br>\nupdate-rc.d dnsmasq enable</p></blockquote><p>We\u2019re going to delete dnsmasq\u2019s default configuration file, as it\u2019s way too cluttered for what we\u2019re using it for. After that, we\u2019ll be making our own, much simpler version.</p><blockquote><p style=\"padding-left: 30px;\">rm /etc/dnsmasq.conf<br>\nnano /etc/dnsmasq.conf</p></blockquote><p>**dnsmasq.conf</p><p>**</p><p style=\"padding-left: 30px;\">bogus-priv<br>\ndomain-needed<br>\nno-resolv<br>\nserver=8.8.8.8<br>\nserver=8.8.4.4<br>\ninterface=venet0:0<br>\nlisten-address=127.0.0.1<br>\ncache-size=10000<br>\naddn-hosts=/etc/pihole/gravity.list<br>\nhost-record=hostname,127.0.0.1,::1</p><p>For options like _interface_, you\u2019ll need to use ifconfig to see what interface lists the IP you want it to be setup on. For _host-record_, simply run `hostname` to know what you should put.&nbsp;What is pihole you might ask? <a href=\"https://pi-hole.net\">https://pi-hole.net</a>&nbsp;is an open source project written by Jacob Salmela to do the exact same thing we\u2019re doing, but for Raspberry Pi\u2019s on your local network. Creating a blacklist for ads would take ages, so we\u2019re going to take advantage of Pi-Hole\u2019s already created list.</p><blockquote><p style=\"padding-left: 30px;\">wget https://raw.githubusercontent.com/jacobsalmela/pi-hole/master/gravity.sh<br>\nchmod +x gravity.sh<br>\n./gravity.sh</p></blockquote><p>gravity.sh will start populating an extensive blacklist for ad networks, but it shouldn\u2019t take long. Finally, we\u2019ll use sed to change every instance of our virtual machine\u2019s IP with a blackhole, and restart dnsmasq.</p><blockquote><p style=\"padding-left: 30px;\">sed -i \u201cs/^[0-9\\.]\\+\\s/0.0.0.0 /g\u201d /etc/pihole/gravity.list<br>\nservice dnsmasq restart</p></blockquote><p>You\u2019re done! I like to take it a step further though, and automate the updating of our blacklist.</p><blockquote><p style=\"padding-left: 30px;\">apt-get install cron -y<br>\ncrontab -e</p></blockquote><p>At the bottom of our crontab, enter the following, which will set our blacklist to be updated once every day.</p><blockquote><p style=\"padding-left: 30px;\">0 5 * * * bash /root/gravity.sh</p></blockquote><p>Inspired, but modified version of David Anson\u2019s&nbsp;<a href=\"https://dlaa.me/blog/post/skyhole\">https://dlaa.me/blog/post/skyhole</a>&nbsp;tutorial.</p><p>@daily on <a href=\"http://www.lowendtalk.com\">LowEndTalk</a> has contributed this tutorial to the community.</p><p class=\"dpsp-share-text\"></p><div id=\"dpsp-content-bottom\" class=\"dpsp-content-wrapper dpsp-shape-rounded dpsp-column-auto dpsp-has-spacing dpsp-no-labels dpsp-show-on-mobile dpsp-button-style-1 dpsp-has-icon-background dpsp-has-button-background dpsp-show-total-share-count dpsp-show-total-share-count-after\"><ul class=\"dpsp-networks-btns-wrapper dpsp-networks-btns-content dpsp-has-button-icon-animation\"><li><a rel=\"nofollow\" href=\"https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Flowendbox.com%2Fblog%2Fhost-your-own-dns-now-with-100-more-ad-block%2F&amp;t=Host%20your%20own%20DNS%2C%20now%20with%20100%25%20more%20ad%20block%21\" class=\"dpsp-network-btn dpsp-facebook dpsp-no-label dpsp-first\" title=\"Share on Facebook\"><span class=\"dpsp-network-icon\"></span><span class=\"dpsp-network-label-wrapper\"></span></a></li><li><a rel=\"nofollow\" href=\"https://twitter.com/intent/tweet?text=Host%20your%20own%20DNS%2C%20now%20with%20100%25%20more%20ad%20block%21&amp;url=https%3A%2F%2Flowendbox.com%2Fblog%2Fhost-your-own-dns-now-with-100-more-ad-block%2F&amp;via=LowEndNetwork\" class=\"dpsp-network-btn dpsp-twitter dpsp-no-label\" title=\"Share on Twitter\"><span class=\"dpsp-network-icon\"></span><span class=\"dpsp-network-label-wrapper\"></span></a></li><li><a rel=\"nofollow\" href=\"https://www.linkedin.com/shareArticle?url=https%3A%2F%2Flowendbox.com%2Fblog%2Fhost-your-own-dns-now-with-100-more-ad-block%2F&amp;title=Host%20your%20own%20DNS%2C%20now%20with%20100%25%20more%20ad%20block%21&amp;mini=true\" class=\"dpsp-network-btn dpsp-linkedin dpsp-no-label dpsp-last\" title=\"Share on LinkedIn\"><span class=\"dpsp-network-icon\"></span><span class=\"dpsp-network-label-wrapper\"></span></a></li></ul><div class=\"dpsp-total-share-wrapper\"><span class=\"dpsp-icon-total-share\"></span><span class=\"dpsp-total-share-count\">1</span><span>shares</span></div></div><div id=\"author-bio-box\" style=\"background: #f8f8f8; border-top: 2px solid #cccccc; border-bottom: 2px solid #cccccc; color: #333333\"><h3><a style=\"color: #555555;\" href=\"https://lowendbox.com/blog/author/sysadmin/\" title=\"All posts by SysAdmin\" rel=\"author\">SysAdmin</a></h3><div class=\"bio-gravatar\"><img data-lazyloaded=\"1\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3MCIgaGVpZ2h0PSI3MCIgdmlld0JveD0iMCAwIDcwIDcwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjY2ZkNGRiIi8+PC9zdmc+\" alt=\"\" data-src=\"https://secure.gravatar.com/avatar/5643ecc712d8cfd7617ed9f0e45dc348?s=70&amp;d=retro&amp;r=pg\" data-srcset=\"https://secure.gravatar.com/avatar/5643ecc712d8cfd7617ed9f0e45dc348?s=140&amp;d=retro&amp;r=pg 2x\" class=\"avatar avatar-70 photo\" height=\"70\" width=\"70\" loading=\"lazy\"></div><a target=\"_blank\" rel=\"nofollow noopener noreferrer\" href=\"http://www.lowendbox.com\" class=\"bio-icon bio-icon-website\"></a><p class=\"bio-description\"></p></div></div><div class=\"feedback\"></div></div>"}