{"id": "22792", "post": "<div class=\"post-22792 post type-post status-publish format-standard hentry category-tutorials tag-inbucket tag-mailinator tag-setupinbucket tag-tutorial\" id=\"post-22792\"><h2 class=\"storytitle\"><a href=\"https://lowendbox.com/blog/create-your-own-self-hosting-mailinator-with-inbucket/\" rel=\"bookmark\">Create Your Own Self-Hosting Mailinator With inbucket</a></h2><div class=\"meta\"><img data-lazyloaded=\"1\" src=\"data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=\" data-src=\"/media/icons/tag_green.png\" alt=\"Tags: \"> <a href=\"https://lowendbox.com/tag/inbucket/\" rel=\"tag\">inbucket</a>, <a href=\"https://lowendbox.com/tag/mailinator/\" rel=\"tag\">mailinator</a>, <a href=\"https://lowendbox.com/tag/setupinbucket/\" rel=\"tag\">setupinbucket</a>, <a href=\"https://lowendbox.com/tag/tutorial/\" rel=\"tag\">tutorial</a> <img data-lazyloaded=\"1\" src=\"data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=\" data-src=\"https://lowendbox.com/media/icons/calendar.png\" alt=\"Date/Time: \"> August 12, 2020 @ 8:32 am, by raindog308</div><div class=\"storycontent tablelook\"><p><a target=\"_blank\" rel=\"noopener noreferrer\"><img data-lazyloaded=\"1\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0MTYiIGhlaWdodD0iMjQ1IiB2aWV3Qm94PSIwIDAgNDE2IDI0NSI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iI2NmZDRkYiIvPjwvc3ZnPg==\" loading=\"lazy\" class=\"screenshot\" title=\"Create Your Own Self Hosting Mailinator with inbucket\" data-src=\"https://lowendbox.com/wp-content/uploads/2020/04/create-self-hosting-mailinator-with-inbucket.png.webp\" alt=\"Create Your Own Self Hosting Mailinator with inbucket\" width=\"416\" height=\"245\"></a>Does this sound familiar: you want to look at the content on some web site, but it requires you to sign up with your email address.&nbsp; You know that if you do, you\u2019ll be spammed continuously until you go through the chore of unsubscribing.&nbsp; You\u2019re tempted to make up a random email address, but you figure you\u2019ll have to confirm the email by clicking on a link mailed to you.</p><p><a href=\"https://www.mailinator.com\">Mailinator</a> solves this problem by providing the Internet with unlimited disposable email addresses.&nbsp; If you go to mailinotor.com, you can make up any email address @mailintor.com you want \u2013 flaming.hotdog, burpingtoad, xyz123, etc. \u2013 and any email sent to that email address will show up on mailinator.&nbsp; You don\u2019t have to pre-register the email or sign up or anything \u2013 just make up any email address you want (@mailintor.com), give it out, and then return and read the email by going to that mailbox on mailinator.com.&nbsp; Sweet!&nbsp; But\u2026</p><p><span id=\"more-22792\"></span></p><h1>The Problems With Mailinator.com</h1><p>Mailinator is cool but there are a couple issues:</p><ul><li>All inboxes are public.&nbsp; If you use tomatojuice@mailinator.com, anyone else can come along and read anything in the tomatojuice@mailinator.com inbox.&nbsp; Probably not a big deal if it\u2019s just a one-time click-to-confirm throwaway, but sometimes email signups want personal info.&nbsp; You can ameliorate this somewhat by picking random-string inboxes or using UUID-style inboxes, but this is obviously suboptimal.</li><li>Companies and marketers have gotten wise to Mailinator (and its legions of competitors) and some will not allow you to sign up with anything @mailinator.com.</li></ul><p>Fortunately, you can easily self-host your own private Mailinator clone with a neat program called <a href=\"https://github.com/inbucket/inbucket\">inbucket</a>.</p><h1>Setting Up inbucket</h1><p>In this example, I\u2019m going to be using a Debian 10 VPS.</p><p>First, make sure port 25 is not blocked by your VPS provider or your firewall.&nbsp; Second, adjust your MX records for your domain to point to your VPS.&nbsp; In this case, I\u2019m using the domain lowend.party, the VPS is mail.lowend.party, and MX priority 10 (the only record) points to mail.lowend.party.</p><p>Let\u2019s start by installing some pre-reqs:</p><pre>apt-get update &amp;&amp; apt-get upgrade\napt-get install git npm golang</pre><p>Next, we\u2019ll disable the exim4 mail system that comes with Debian:</p><pre>systemctl stop exim4\nsystemctl disable exim4</pre><p>For simplicity\u2019s sake, I\u2019m going to put everything in /inbucket, but you can put things wherever you want.</p><pre>cd /\ngit clone https://github.com/inbucket/inbucket.git\ncd inbucket/ui\nnpm i\nnpm run build\ncd ..\ngo build ./cmd/inbucket</pre><h1>Configuring inbucket</h1><p>inbucket is configured by environment variables.&nbsp; We\u2019ll create a systemd unit to handle these, but to get a feeling for things you may want to change, you can either read the docs (at doc/config.md) or use the on-line <a href=\"https://www.inbucket.org/configurator/\">configurator</a>.</p><p>In this example, we\u2019re using the following variables:</p><pre>export INBUCKET_SMTP_DOMAIN=\"mail.lowend.party\"\nexport INBUCKET_STORAGE_MAILBOXMSGCAP=\"0\"\nexport INBUCKET_SMTP_ADDR=\"0.0.0.0:25\"\nexport INBUCKET_WEB_ADDR=\"0.0.0.0:80\"</pre><p>These set the SMTP domain, say that every mailbox has unlimited storage, set inbucket\u2019s SMTP server to run on port 25, and set the inbucket web interface to port 80.&nbsp; Since this is a tutorial, I\u2019m not going to cover setting up https and an nginx proxy, so we\u2019ll just expose inbucket\u2019s web interface directly, which in effect makes it a public Mailinator clone.&nbsp; If you are using inbucket for serious use, you may wish to protect it behind https and perhaps basic web authorization.</p><p>Here is the systemd unit file we\u2019ll use.&nbsp; In /etc/systemd/system/inbucket.service, I\u2019ve placed the following:</p><pre class=\"p1\"><span class=\"s1\">[Unit]</span>\n<span class=\"s1\">Description=inbucket</span>\n<span class=\"s1\">\n[Service]</span>\n<span class=\"s1\">ExecStart=/inbucket/inbucket</span>\n<span class=\"s1\">Restart=always</span>\n<span class=\"s1\">StartIntervalLimit=5</span>\n<span class=\"s1\">TimeoutStartSec=30</span>\nEnvironment=INBUCKET_SMTP_DOMAIN=\"mail.lowend.party\"\nEnvironment=INBUCKET_STORAGE_MAILBOXMSGCAP=\"0\"\nEnvironment=INBUCKET_SMTP_ADDR=\"0.0.0.0:25\"\nEnvironment=INBUCKET_WEB_ADDR=\"0.0.0.0:80\"\n\n<span class=\"s1\">[Install]</span>\n\n<span class=\"s1\">WantedBy=multi-user.target</span></pre><p>Then enable and start:</p><pre>systemctl enable inbucket\nsystemctl start inbucket</pre><p>And inbucket is now up and running</p><h1>Testing inbucket</h1><p>I mailed several emails to various random @lowend.party emails, then visited mail.lowend.party in my web browser.&nbsp; By clicking \u2018Monitor\u2019 at the top, I could see everything that\u2019s arrived:</p><p><img data-lazyloaded=\"1\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI5NzMiIGhlaWdodD0iMjczIiB2aWV3Qm94PSIwIDAgOTczIDI3MyI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iI2NmZDRkYiIvPjwvc3ZnPg==\" loading=\"lazy\" class=\"alignnone size-full wp-image-22795\" data-src=\"https://lowendbox.com/wp-content/uploads/2020/04/inbucket1-e1588090111785.png.webp\" alt=\"\" width=\"973\" height=\"273\"></p><p>&nbsp;</p><p>In the upper right corner, I can specify which mailbox I want to view.&nbsp; You need to enter the full email address (since you could have multiple domains), so I entered debian.thanks@lowend.party:</p><p><img data-lazyloaded=\"1\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI5NjMiIGhlaWdodD0iMTg2IiB2aWV3Qm94PSIwIDAgOTYzIDE4NiI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iI2NmZDRkYiIvPjwvc3ZnPg==\" loading=\"lazy\" class=\"alignnone size-full wp-image-22796\" data-src=\"https://lowendbox.com/wp-content/uploads/2020/04/inbucket2-e1588090135571.png.webp\" alt=\"\" width=\"963\" height=\"186\"></p><p>And then I can read individual messages:</p><p><img data-lazyloaded=\"1\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI5NjAiIGhlaWdodD0iMzU5IiB2aWV3Qm94PSIwIDAgOTYwIDM1OSI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iI2NmZDRkYiIvPjwvc3ZnPg==\" loading=\"lazy\" class=\"alignnone size-full wp-image-22797\" data-src=\"https://lowendbox.com/wp-content/uploads/2020/04/inbucket3-e1588090150880.png.webp\" alt=\"\" width=\"960\" height=\"359\"></p><h1>Further Config</h1><p>Here\u2019s my actual production config:</p><pre class=\"p1\"><span class=\"s1\">Environment=INBUCKET_SMTP_ADDR=\"0.0.0.0:25\"\n</span><span class=\"s1\">Environment=INBUCKET_SMTP_DEFAULTACCEPT=\"false\"\n</span><span class=\"s1\">Environment=INBUCKET_SMTP_ACCEPTDOMAINS=\"lowend.party\"\n</span><span class=\"s1\">Environment=INBUCKET_STORAGE_TYPE=\"file\"\n</span><span class=\"s1\">Environment=INBUCKET_STORAGE_PARAMS=\"path:/inbucket_storage\"\n</span><span class=\"s1\">Environment=INBUCKET_STORAGE_RETENTIONPERIOD=\"1317600h\"\n</span><span class=\"s1\">Environment=INBUCKET_STORAGE_RETENTIONSLEEP=\"3600s\"\n</span><span class=\"s1\">Environment=INBUCKET_STORAGE_MAILBOXMSGCAP=\"0\"\n</span><span class=\"s1\">Environment=INBUCKET_POP3_ADDR=127.0.0.1:1100</span></pre><p>What these parameters do:</p><ul><li>Accept SMTP on port 25</li><li>Only accept mail for something@lowend.party and reject everything else</li><li>Store the mail on disk (not in memory) in a path called /inbucket_storage</li><li>Retain all emails for 1 year</li><li>Check only once an hour to delete old email (reduces disk thrashing)</li><li>Unlimited capacity for each mailbox</li><li>Since I don\u2019t use POP3, I bind it only to localhost, which effectively disables it</li></ul><p>On a 512MB VPS dedicated to inbucket:</p><pre class=\"p1\"><span class=\"s1\"><span class=\"Apple-converted-space\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>total<span class=\"Apple-converted-space\">&nbsp; &nbsp; &nbsp; &nbsp; </span>used<span class=\"Apple-converted-space\">&nbsp; &nbsp; &nbsp; &nbsp; </span>free<span class=\"Apple-converted-space\">&nbsp; &nbsp; &nbsp; </span>shared<span class=\"Apple-converted-space\">&nbsp; </span>buff/cache <span class=\"Apple-converted-space\">&nbsp; </span>available</span>\n<span class=\"s1\">Mem:<span class=\"Apple-converted-space\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>483<span class=\"Apple-converted-space\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>62 <span class=\"Apple-converted-space\">&nbsp; &nbsp; &nbsp; &nbsp; </span>110 <span class=\"Apple-converted-space\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>1 <span class=\"Apple-converted-space\">&nbsp; &nbsp; &nbsp; &nbsp; </span>309 <span class=\"Apple-converted-space\">&nbsp; &nbsp; &nbsp; &nbsp; </span>406</span>\n<span class=\"s1\">Swap: <span class=\"Apple-converted-space\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>511<span class=\"Apple-converted-space\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>10 <span class=\"Apple-converted-space\">&nbsp; &nbsp; &nbsp; &nbsp; </span>501</span></pre><p>And that\u2019s all there is to it!&nbsp; Now you have your own private Mailinator and can easily keep your spammy signup and throwaway web form emails separate from your main inbox.&nbsp; Enjoy!</p><p>&nbsp;</p><p class=\"dpsp-share-text\"></p><div id=\"dpsp-content-bottom\" class=\"dpsp-content-wrapper dpsp-shape-rounded dpsp-column-auto dpsp-has-spacing dpsp-no-labels dpsp-show-on-mobile dpsp-button-style-1 dpsp-has-icon-background dpsp-has-button-background dpsp-show-total-share-count dpsp-show-total-share-count-after\"><ul class=\"dpsp-networks-btns-wrapper dpsp-networks-btns-content dpsp-has-button-icon-animation\"><li><a rel=\"nofollow\" href=\"https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Flowendbox.com%2Fblog%2Fcreate-your-own-self-hosting-mailinator-with-inbucket%2F&amp;t=Create%20Your%20Own%20Self-Hosting%20Mailinator%20With%20inbucket\" class=\"dpsp-network-btn dpsp-facebook dpsp-no-label dpsp-first\" title=\"Share on Facebook\"><span class=\"dpsp-network-icon\"></span><span class=\"dpsp-network-label-wrapper\"></span></a></li><li><a rel=\"nofollow\" href=\"https://twitter.com/intent/tweet?text=Create%20Your%20Own%20Self-Hosting%20Mailinator%20With%20inbucket&amp;url=https%3A%2F%2Flowendbox.com%2Fblog%2Fcreate-your-own-self-hosting-mailinator-with-inbucket%2F&amp;via=LowEndNetwork\" class=\"dpsp-network-btn dpsp-twitter dpsp-no-label\" title=\"Share on Twitter\"><span class=\"dpsp-network-icon\"></span><span class=\"dpsp-network-label-wrapper\"></span></a></li><li><a rel=\"nofollow\" href=\"https://www.linkedin.com/shareArticle?url=https%3A%2F%2Flowendbox.com%2Fblog%2Fcreate-your-own-self-hosting-mailinator-with-inbucket%2F&amp;title=Create%20Your%20Own%20Self-Hosting%20Mailinator%20With%20inbucket&amp;mini=true\" class=\"dpsp-network-btn dpsp-linkedin dpsp-no-label dpsp-last\" title=\"Share on LinkedIn\"><span class=\"dpsp-network-icon\"></span><span class=\"dpsp-network-label-wrapper\"></span></a></li></ul><div class=\"dpsp-total-share-wrapper\"><span class=\"dpsp-icon-total-share\"></span><span class=\"dpsp-total-share-count\">5</span><span>shares</span></div></div><div class=\"relpost-thumb-wrapper\"><div class=\"relpost-thumb-container\"><h3>Related posts:</h3><div style=\"clear: both\"></div><div style=\"clear: both\"></div><div class=\"relpost-block-container\"><a class=\"relpost-block-single\" href=\"https://lowendbox.com/blog/managing-your-lowendempire-with-ansible-part-1/\"><div style=\"width: 150px; height: 215px;\"><div class=\"relpost-block-single-image\" alt=\"Managing Your LowEndEmpire With Ansible, Part 1\" style=\"background: transparent url(https://lowendbox.com/wp-content/uploads/2020/03/leb-banner-150x150.png) no-repeat scroll 0% 0%; width: 150px; height: 150px;\"></div><div class=\"relpost-block-single-text\" style=\"font-family: Arial;  font-size: 12px;  color: #333333;\">Managing Your LowEndEmpire With Ansible, Part 1</div></div></a><a class=\"relpost-block-single\" href=\"https://lowendbox.com/blog/setup-a-dns-nameserver-using-nsd/\"><div style=\"width: 150px; height: 215px;\"><div class=\"relpost-block-single-image\" alt=\"Setup a DNS Nameserver Using NSD\" style=\"background: transparent url(https://lowendbox.com/wp-content/uploads/2020/03/leb-banner-150x150.png) no-repeat scroll 0% 0%; width: 150px; height: 150px;\"></div><div class=\"relpost-block-single-text\" style=\"font-family: Arial;  font-size: 12px;  color: #333333;\">Setup a DNS Nameserver Using NSD</div></div></a><a class=\"relpost-block-single\" href=\"https://lowendbox.com/blog/keeping-a-logwatchful-eye-on-your-vps-with-logwatch/\"><div style=\"width: 150px; height: 215px;\"><div class=\"relpost-block-single-image\" alt=\"Keeping A (log)Watchful Eye on Your VPS With logwatch\" style=\"background: transparent url(https://lowendbox.com/wp-content/uploads/2020/04/logwatch-150x150.png) no-repeat scroll 0% 0%; width: 150px; height: 150px;\"></div><div class=\"relpost-block-single-text\" style=\"font-family: Arial;  font-size: 12px;  color: #333333;\">Keeping A (log)Watchful Eye on Your VPS With logwatch</div></div></a><a class=\"relpost-block-single\" href=\"https://lowendbox.com/blog/nginx-vs-openlitespeed-vs-apache/\"><div style=\"width: 150px; height: 215px;\"><div class=\"relpost-block-single-image\" alt=\"Nginx vs. OpenLiteSpeed vs. Apache\" style=\"background: transparent url(https://lowendbox.com/wp-content/uploads/2020/04/nginx-vs-openlitespeed-vs-apache-150x150.png) no-repeat scroll 0% 0%; width: 150px; height: 150px;\"></div><div class=\"relpost-block-single-text\" style=\"font-family: Arial;  font-size: 12px;  color: #333333;\">Nginx vs. OpenLiteSpeed vs. Apache</div></div></a></div><div style=\"clear: both\"></div></div></div><div id=\"author-bio-box\" style=\"background: #f8f8f8; border-top: 2px solid #cccccc; border-bottom: 2px solid #cccccc; color: #333333\"><h3><a style=\"color: #555555;\" href=\"https://lowendbox.com/blog/author/raindog308/\" title=\"All posts by raindog308\" rel=\"author\">raindog308</a></h3><div class=\"bio-gravatar\"><img data-lazyloaded=\"1\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3MCIgaGVpZ2h0PSI3MCIgdmlld0JveD0iMCAwIDcwIDcwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjY2ZkNGRiIi8+PC9zdmc+\" alt=\"\" data-src=\"https://secure.gravatar.com/avatar/4ce3b8640a70e05bd73ac25b8a37821c?s=70&amp;d=retro&amp;r=pg\" data-srcset=\"https://secure.gravatar.com/avatar/4ce3b8640a70e05bd73ac25b8a37821c?s=140&amp;d=retro&amp;r=pg 2x\" class=\"avatar avatar-70 photo\" height=\"70\" width=\"70\" loading=\"lazy\"></div><a target=\"_blank\" rel=\"nofollow noopener noreferrer\" href=\"https://www.lowendtalk.com/profile/raindog308\" class=\"bio-icon bio-icon-website\"></a><p class=\"bio-description\">I'm Andrew, techno polymath and long-time LowEndTalk community Moderator. My technical interests include all things Unix, perl, python, shell scripting, and relational database systems. I enjoy writing technical articles here on LowEndBox to help people get more out of their VPSes.</p></div></div><div class=\"feedback\"></div></div>"}