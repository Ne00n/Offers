{"id": "23472", "post": "<div class=\"post-23472 post type-post status-publish format-standard hentry category-tutorials tag-highly-available tag-rqlite tag-setup-sqlite tag-sqlite tag-tutorial\" id=\"post-23472\"><h2 class=\"storytitle\"><a href=\"https://lowendbox.com/blog/how-to-setup-replicated-highly-available-sqlite-with-rqlite/\" rel=\"bookmark\">How to Setup Replicated Highly Available SQLite with rqlite</a></h2><div class=\"meta\"><img data-lazyloaded=\"1\" src=\"/media/icons/tag_green.png\" data-src=\"/media/icons/tag_green.png\" width=\"16\" height=\"16\" alt=\"Tags: \" class=\"litespeed-loaded\" data-was-processed=\"true\"> <a href=\"https://lowendbox.com/tag/highly-available/\" rel=\"tag\">highly available</a>, <a href=\"https://lowendbox.com/tag/rqlite/\" rel=\"tag\">rqlite</a>, <a href=\"https://lowendbox.com/tag/setup-sqlite/\" rel=\"tag\">setup sqlite</a>, <a href=\"https://lowendbox.com/tag/sqlite/\" rel=\"tag\">sqlite</a>, <a href=\"https://lowendbox.com/tag/tutorial/\" rel=\"tag\">tutorial</a> <img data-lazyloaded=\"1\" src=\"https://lowendbox.com/media/icons/calendar.png\" data-src=\"https://lowendbox.com/media/icons/calendar.png\" width=\"16\" height=\"16\" alt=\"Date/Time: \" class=\"litespeed-loaded\" data-was-processed=\"true\"> June 3, 2021 @ 12:00 pm, by raindog308</div><div class=\"storycontent tablelook\"><p><a target=\"_blank\" rel=\"noopener noreferrer\"><img data-lazyloaded=\"1\" src=\"https://lowendbox.com/wp-content/uploads/2020/05/Replicated-highly-available-SQLITE-with-RQLITE.jpg.webp\" loading=\"lazy\" class=\"screenshot litespeed-loaded\" title=\"Replicated Highly Availably SQLite with rqlite\" data-src=\"https://lowendbox.com/wp-content/uploads/2020/05/Replicated-highly-available-SQLITE-with-RQLITE.jpg.webp\" alt=\"Replicated Highly Availably SQLite with rqlite\" width=\"410\" height=\"236\" data-was-processed=\"true\"></a>If you need a highly available database configuration where the loss of one node doesn\u2019t result in loss of service and changes on one node are replicated to other nodes, you would probably reach for MariaDB, PostgreSQL, or one of the big boys like Oracle or SQL Server. &nbsp;Probably the last thing that would cross your mind is sqlite. &nbsp;After all, sqlite is not even multi-user, much less multi-node.</p><p>That\u2019s very true for sqlite, but there\u2019s a project called <a href=\"https://github.com/rqlite/rqlite\">rqlite</a> that adds both replication and high availability to SQLite, as well as other features such an an http(s) API, encrypted traffic, read-only nodes, and even hot backups. &nbsp;It\u2019s kind of the ultimate LowEndDatabase :-)</p><p>In this tutorial we\u2019ll setup a 3-node rqlite cluster.</p><h1>Setting Up the VPSes</h1><p>I\u2019m going to use three VPSes for the cluster. &nbsp;rqlite uses the <a href=\"https://en.wikipedia.org/wiki/Raft_(computer_science)\">RAFT consensus algorithm</a> for high availability and replication, which means that you need to size your clusters in odd numbers \u2013 3, 5, etc.</p><p><span id=\"more-23472\"></span></p><p>I\u2019ll be using the following config, in which I\u2019ve replace the real IPs with fake numbers:</p><pre>1.1.1.1 rqlite1.lowend.party\n2.2.2.2 rqlite2.lowend.party\n3.3.3.3 rqlite3.lowend.party</pre><p>To install rqlite, I\u2019ll grab the latest release from Github and set it up in /usr/local:</p><pre># cd /usr/local\n# curl -L https://github.com/rqlite/rqlite/releases/download/v5.3.0/rqlite-v5.3.0-linux-amd64.tar.gz -o rqlite-v5.3.0-linux-amd64.tar.gz\n# tar xvfz rqlite-v5.3.0-linux-amd64.tar.gz\n# ln -s rqlite-v5.3.0-linux-amd64 rqlite\n# cd rqlite</pre><p>I did this on all three nodes.</p><h1>Startup rqlite the First Time</h1><p>The first time you start rqlite, it won\u2019t have any configuration information about the nodes, so we\u2019ll start rqlite1 as the cluster leader and then manually join the other nodes. &nbsp;In future starts/restarts, rqlite will know its config and we can start things in any order.</p><p>On rqlite1, I type:</p><pre># ./rqlited -node-id 1 -http-addr 1.1.1.1:4001 -raft-addr 1.1.1.1:4002 /usr/local/rqlite/db</pre><p>The arguments break down as follows:</p><ul><li>-node-id: This can be any string, as long as it\u2019s unique in the cluster</li><li>-http-addr: This is the address and port I\u2019m going to use for the HTTP interface, which is also used by the rqlite command-line client, etc.</li><li>-raft-addr: This is the address and port that other nodes will connect to for intra-cluster traffic.</li><li>/usr/local/rqlite/db: This directory (which will be crated if it doesn\u2019t exist) will hold the database and state inforamtion.</li></ul><p>After issuing the command, I see a lot of info go by:</p><pre><span class=\"Apple-converted-space\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>_ _ _\n<span class=\"Apple-converted-space\">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>| (_) |\n<span class=\"Apple-converted-space\">&nbsp; </span>_ __ __ _| |_| |_ ___\n<span class=\"Apple-converted-space\">&nbsp;</span>| '__/ _<span class=\"Apple-converted-space\">&nbsp; </span>| | | __/ _ \\ <span class=\"Apple-converted-space\">&nbsp; </span>The lightweight, distributed\n<span class=\"Apple-converted-space\">&nbsp;</span>| | | (_| | | | ||<span class=\"Apple-converted-space\">&nbsp; </span>__/ <span class=\"Apple-converted-space\">&nbsp; </span>relational database.\n<span class=\"Apple-converted-space\">&nbsp;</span>|_|<span class=\"Apple-converted-space\">&nbsp; </span>\\__, |_|_|\\__\\___|\n<span class=\"Apple-converted-space\">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; </span>| |\n<span class=\"Apple-converted-space\">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; </span>|_|\n\n[rqlited] 2020/05/25 11:08:14 rqlited starting, version v5.3.0, commit 5f762f01ecf2ad74ea398e20258239fca89777e2, branch master\n[rqlited] 2020/05/25 11:08:14 go1.14, target architecture is amd64, operating system target is linux\n[store] 2020/05/25 11:08:14 opening store with node ID 1\n[store] 2020/05/25 11:08:14 ensuring directory at /usr/local/rqlite/db exists\n[store] 2020/05/25 11:08:14 SQLite in-memory database opened\n2020-05-25T11:08:14.117-0700 [INFO]<span class=\"Apple-converted-space\">&nbsp; </span>raft: Initial configuration (index=0): []\n[store] 2020/05/25 11:08:14 bootstrap needed\n2020-05-25T11:08:14.117-0700 [INFO]<span class=\"Apple-converted-space\">&nbsp; </span>raft: Node at 1.1.1.1:4002 [Follower] entering Follower state (Leader: \"\")\n[rqlited] 2020/05/25 11:08:14 no join addresses set\n2020-05-25T11:08:15.752-0700 [WARN]<span class=\"Apple-converted-space\">&nbsp; </span>raft: Heartbeat timeout from \"\" reached, starting election\n2020-05-25T11:08:15.752-0700 [INFO]<span class=\"Apple-converted-space\">&nbsp; </span>raft: Node at 1.1.1.1:4002 [Candidate] entering Candidate state in term 2\n2020-05-25T11:08:15.754-0700 [INFO]<span class=\"Apple-converted-space\">&nbsp; </span>raft: Election won. Tally: 1\n2020-05-25T11:08:15.754-0700 [INFO]<span class=\"Apple-converted-space\">&nbsp; </span>raft: Node at 1.1.1.1:4002 [Leader] entering Leader state\n[store] 2020/05/25 11:08:15 waiting for up to 2m0s for application of initial logs\n[http] 2020/05/25 11:08:15 service listening on 1.1.1.1:4001\nstart node 2</pre><p>Wait until you see the \u201cservice listening\u201d before proceeding.</p><p>On node2, the command is the same with the addition of the -join parameter, which tells rqlite where to join the cluster:</p><pre># ./rqlited -node-id 2 -http-addr 2.2.2.2:4001 -raft-addr 2.2.2.2:4002 -join http://1.1.1.1:4001 /usr/local/rqlite/db</pre><p>Note that rqlite is instructed to join the http address, not the RAFT address.</p><p>And now on node 3:</p><p># ./rqlited -node-id 3 -http-addr 3.3.3.3:4001 -raft-addr 3.3.3.3:4002 -join http://1.1.1.1:4001 /usr/local/rqlite/db</p><p>And if you go back to node 1 you should see messages like this:</p><pre>2020/05/25 11:09:53 [DEBUG] raft-net: 1.1.1.1:4002 accepted connection from: 3.3.3.3:36882</pre><h1>Restarting rqlite</h1><p>At this point, you could stop all the rqlited sessions and restart them without the -join parameter, or with the other two nodes specified in -join. &nbsp;It\u2019s not necessary for a human to pick a leader and manually join, so you can write startup scripts without worrying about which node is coming up first, etc.</p><h1>rqlite Command Line Client</h1><p>Your command line client will be at /usr/local/rqlite/rqlite. &nbsp;You can use it the same way you would the sqlite3 CLI, except that you\u2019ll need to put in the hostname (and port, if you\u2019ve changed it from the default). &nbsp;Let\u2019s create and populate a table:</p><pre>root@rqlite3:/usr/local/rqlite# ./rqlite -H rqlite3.lowend.party\nWelcome to the rqlite CLI. Enter \".help\" for usage hints.\nrqlite3.lowend.party:4001&gt; create table planets (from_sun integer not null primary key, name varchar(30));\nrqlite3.lowend.party:4001&gt; insert into planets (from_sun, name) values (1, 'Mercury');\n1 row affected\nrqlite3.lowend.party:4001&gt; insert into planets (from_sun, name) values (2, 'Venus');\n1 row affected\nrqlite3.lowend.party:4001&gt; insert into planets (from_sun, name) values (3, 'Earth');\n1 row affected</pre><p>Now on node 1:</p><pre>root@rqlite1:/usr/local/rqlite# ./rqlite -H rqlite1.lowend.party\nWelcome to the rqlite CLI. Enter \".help\" for usage hints.\nrqlite1.lowend.party:4001&gt; select * from planets;\n+----------+---------+\n| from_sun | name<span class=\"Apple-converted-space\">&nbsp; &nbsp; </span>|\n+----------+---------+\n| 1<span class=\"Apple-converted-space\">&nbsp; &nbsp; &nbsp; &nbsp; </span>| Mercury |\n+----------+---------+\n| 2<span class=\"Apple-converted-space\">&nbsp; &nbsp; &nbsp; &nbsp; </span>| Venus <span class=\"Apple-converted-space\">&nbsp; </span>|\n+----------+---------+\n| 3<span class=\"Apple-converted-space\">&nbsp; &nbsp; &nbsp; &nbsp; </span>| Earth <span class=\"Apple-converted-space\">&nbsp; </span>|\n+----------+---------+\nrqlite1.lowend.party:4001&gt;</pre><p>We can see that replication is working.</p><p>Testing rqlite High Avilability</p><pre>Let's crash node 1 by hitting control-C in its rqlited session. &nbsp;Looking then on rqlite2, we see:\n\n2020-05-25T11:09:52.883-0700 [WARN]<span class=\"Apple-converted-space\">&nbsp; </span>raft: Heartbeat timeout from \"1.1.1.1:4002\" reached, starting election\n2020-05-25T11:09:52.883-0700 [INFO]<span class=\"Apple-converted-space\">&nbsp; </span>raft: Node at 2.2.2.2:4002 [Candidate] entering Candidate state in term 3\n2020-05-25T11:09:52.885-0700 [ERROR] raft: Failed to make RequestVote RPC to {Voter 1 1.1.1.1:4002}: dial tcp 1.1.1.1:4002: connect: connection refused\n2020/05/25 11:09:53 [DEBUG] raft-net: 2.2.2.2:4002 accepted connection from: 3.3.3.3:36882\n2020-05-25T11:09:53.627-0700 [INFO]<span class=\"Apple-converted-space\">&nbsp; </span>raft: Duplicate RequestVote for same term: 3\n2020-05-25T11:09:54.288-0700 [WARN]<span class=\"Apple-converted-space\">&nbsp; </span>raft: Election timeout reached, restarting election\n2020-05-25T11:09:54.288-0700 [INFO]<span class=\"Apple-converted-space\">&nbsp; </span>raft: Node at 2.2.2.2:4002 [Candidate] entering Candidate state in term 4\n2020-05-25T11:09:54.290-0700 [ERROR] raft: Failed to make RequestVote RPC to {Voter 1 1.1.1.1:4002}: dial tcp 1.1.1.1:4002: connect: connection refused\n2020-05-25T11:09:54.293-0700 [INFO]<span class=\"Apple-converted-space\">&nbsp; </span>raft: Election won. Tally: 2\n2020-05-25T11:09:54.293-0700 [INFO]<span class=\"Apple-converted-space\">&nbsp; </span>raft: Node at 2.2.2.2:4002 [Leader] entering Leader state\n2020-05-25T11:09:54.293-0700 [INFO]<span class=\"Apple-converted-space\">&nbsp; </span>raft: Added peer 1, starting replication\n2020-05-25T11:09:54.293-0700 [INFO]<span class=\"Apple-converted-space\">&nbsp; </span>raft: Added peer 3, starting replication</pre><p>Then let\u2019s restart node1:</p><pre><span class=\"Apple-converted-space\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>_ _ _\n<span class=\"Apple-converted-space\">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>| (_) |\n<span class=\"Apple-converted-space\">&nbsp; </span>_ __ __ _| |_| |_ ___\n<span class=\"Apple-converted-space\">&nbsp;</span>| '__/ _<span class=\"Apple-converted-space\">&nbsp; </span>| | | __/ _ \\ <span class=\"Apple-converted-space\">&nbsp; </span>The lightweight, distributed\n<span class=\"Apple-converted-space\">&nbsp;</span>| | | (_| | | | ||<span class=\"Apple-converted-space\">&nbsp; </span>__/ <span class=\"Apple-converted-space\">&nbsp; </span>relational database.\n<span class=\"Apple-converted-space\">&nbsp;</span>|_|<span class=\"Apple-converted-space\">&nbsp; </span>\\__, |_|_|\\__\\___|\n<span class=\"Apple-converted-space\">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; </span>| |\n<span class=\"Apple-converted-space\">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; </span>|_|\n\n[rqlited] 2020/05/25 11:10:43 rqlited starting, version v5.3.0, commit 5f762f01ecf2ad74ea398e20258239fca89777e2, branch master\n[rqlited] 2020/05/25 11:10:43 go1.14, target architecture is amd64, operating system target is linux\n[store] 2020/05/25 11:10:43 opening store with node ID 1\n[store] 2020/05/25 11:10:43 ensuring directory at /usr/local/rqlite/db exists\n[store] 2020/05/25 11:10:43 SQLite in-memory database opened\n2020-05-25T11:10:43.144-0700 [INFO]<span class=\"Apple-converted-space\">&nbsp; </span>raft: Initial configuration (index=6): [{Suffrage:Voter ID:1 Address:1.1.1.1:4002} {Suffrage:Voter ID:2 Address:2.2.2.2:4002} {Suffrage:Voter ID:3 Address:3.3.3.3:4002}]\n[store] 2020/05/25 11:10:43 no bootstrap needed\n[rqlited] 2020/05/25 11:10:43 no join addresses set\n2020-05-25T11:10:43.144-0700 [INFO]<span class=\"Apple-converted-space\">&nbsp; </span>raft: Node at 1.1.1.1:4002 [Follower] entering Follower state (Leader: \"\")\n2020-05-25T11:10:44.825-0700 [WARN]<span class=\"Apple-converted-space\">&nbsp; </span>raft: Heartbeat timeout from \"\" reached, starting election\n2020-05-25T11:10:44.825-0700 [INFO]<span class=\"Apple-converted-space\">&nbsp; </span>raft: Node at 1.1.1.1:4002 [Candidate] entering Candidate state in term 3\n2020-05-25T11:10:44.829-0700 [INFO]<span class=\"Apple-converted-space\">&nbsp; </span>raft: Node at 1.1.1.1:4002 [Follower] entering Follower state (Leader: \"\")\n2020/05/25 11:10:46 [DEBUG] raft-net: 1.1.1.1:4002 accepted connection from: 2.2.2.2:47180\n[store] 2020/05/25 11:10:46 waiting for up to 2m0s for application of initial logs\n[http] 2020/05/25 11:10:46 service listening on 1.1.1.1:4001\n2020/05/25 11:10:47 [DEBUG] raft-net: 1.1.1.1:4002 accepted connection from: 2.2.2.2:47182</pre><p>on node2:</p><pre>2020/05/25 11:10:44 [DEBUG] raft-net: 2.2.2.2:4002 accepted connection from: 1.1.1.1:46620 2020-05-25T11:10:44.829-0700 [WARN]<span class=\"Apple-converted-space\">&nbsp; </span>raft: Rejecting vote request from 1.1.1.1:4002 since we have a leader: 2.2.2.2:4002 2020-05-25T11:10:46.479-0700 [INFO]<span class=\"Apple-converted-space\">&nbsp; </span>raft: pipelining replication to peer {Voter 1 1.1.1.1:4002}</pre><p>You don\u2019t really have to worry about all the \u201crejecting vote request\u201d, \u201csuffrage\u201d, etc. info \u2013 it\u2019s just there for informational purposes. &nbsp;The point is that if you test your queries again, you\u2019ll see that all three nodes are in perfect sync. &nbsp;rqlite2 is now the leader, but if it were to die, one of the other two nodes would immediately hold an election per the RAFT protocol and pick a new leader.</p><h1>Checking Cluster Status</h1><p>rqlite comes with some sqlite3 language extensions, one of which is the .status command, which prints out a lot of information. &nbsp;I\u2019ve trimmed off some of it in the output below:</p><pre>rqlite2.lowend.party:4001&gt; .status\nbuild:\n<span class=\"Apple-converted-space\">&nbsp; </span>branch: master\n<span class=\"Apple-converted-space\">&nbsp; </span>build_time: 2020-05-13T13:00:25-0400\n<span class=\"Apple-converted-space\">&nbsp; </span>commit: 5f762f01ecf2ad74ea398e20258239fca89777e2\n<span class=\"Apple-converted-space\">&nbsp; </span>version: v5.3.0\nhttp:\n<span class=\"Apple-converted-space\">&nbsp; </span>addr: 2.2.2.2:4001\n<span class=\"Apple-converted-space\">&nbsp; </span>redirect: 3.3.3.3:4001\nnode:\n<span class=\"Apple-converted-space\">&nbsp; </span>uptime: 4m15.059332819s\n<span class=\"Apple-converted-space\">&nbsp; </span>start_time: 2020-05-25T11:19:45.205084102-07:00\nleader:\n<span class=\"Apple-converted-space\">&nbsp; &nbsp; </span>addr: 3.3.3.3:4002\n<span class=\"Apple-converted-space\">&nbsp; &nbsp; </span>node_id: 3\n<span class=\"Apple-converted-space\">&nbsp; </span>raft:\n<span class=\"Apple-converted-space\">&nbsp; &nbsp; </span>latest_configuration: [{Suffrage:Voter ID:1 Address:1.1.1.1:4002} {Suffrage:Voter ID:2 Address:2.2.2.2:4002} {Suffrage:Voter ID:3 Address:3.3.3.3:4002}]\n<span class=\"Apple-converted-space\">&nbsp; &nbsp; </span>num_peers: 2\n<span class=\"Apple-converted-space\">&nbsp; </span>dir: /usr/local/rqlite/db\n<span class=\"Apple-converted-space\">&nbsp; </span>metadata:\n<span class=\"Apple-converted-space\">&nbsp; &nbsp; </span>1:\n<span class=\"Apple-converted-space\">&nbsp; &nbsp; &nbsp; </span>api_addr: 1.1.1.1:4001\n<span class=\"Apple-converted-space\">&nbsp; &nbsp; </span>2:\n<span class=\"Apple-converted-space\">&nbsp; &nbsp; &nbsp; </span>api_addr: 2.2.2.2:4001\n<span class=\"Apple-converted-space\">&nbsp; &nbsp; </span>3:\n<span class=\"Apple-converted-space\">&nbsp; &nbsp; &nbsp; </span>api_addr: 3.3.3.3:4001\n<span class=\"Apple-converted-space\">&nbsp; </span>nodes: [map[addr:1.1.1.1:4002 id:1] map[addr:2.2.2.2:4002 id:2] map[addr:3.3.3.3:4002 id:3]]</pre><p>Here you can see that this node (rqlite2) has two peers, and the entire cluster configuration (and lots of other data) is displayed.</p><pre>Securing rqlite</pre><p>By default, rqlite transmits unencrypted. &nbsp;We can fix that by putting HTTPS in place. &nbsp;We\u2019re going to use self-signed certificates in this tutorial.</p><p>First, generate the certificate:</p><pre>root@rqlite1:/usr/local/rqlite# openssl req -x509 -nodes -newkey rsa:4096 -keyout key.pem -out cert.pem -days 3650\nGenerating a RSA private key\n................................................................++++\n....................................................................................................................................++++\nwriting new private key to 'key.pem'\n-----\nYou are about to be asked to enter information that will be incorporated\ninto your certificate request.\nWhat you are about to enter is what is called a Distinguished Name or a DN.\nThere are quite a few fields but you can leave some blank\nFor some fields there will be a default value,\nIf you enter '.', the field will be left blank.\n-----\nCountry Name (2 letter code) [AU]:US\nState or Province Name (full name) [Some-State]:Oregon\nLocality Name (eg, city) []:Portland\nOrganization Name (eg, company) [Internet Widgits Pty Ltd]:raindog\nOrganizational Unit Name (eg, section) []:raindog\nCommon Name (e.g. server FQDN or YOUR name) []:raindog\nEmail Address []:raindog308@raindog308.com</pre><p>Now shut down all nodes and restart them with additional HTTPS parameters. &nbsp;Here is rqlite1\u2019s startup, with the new parameters bolded:</p><pre>./rqlited -node-id 1 -http-addr 1.1.1.1:4001 -raft-addr 1.1.1.1:4002 <strong>-http-no-verify -node-encrypt -node-cert /usr/local/rqlite/cert.pem -node-key /usr/local/rqlite/key.pem</strong> /usr/local/rqlite/db</pre><h1>Backing Up rqlite</h1><p>rqlite can do hot backups via the .backup command:</p><pre>root@rqlite3:/usr/local/rqlite# ./rqlite -H rqlite3.lowend.party\nWelcome to the rqlite CLI. Enter \".help\" for usage hints.\nrqlite3.lowend.party:4001&gt; .backup bak.sqlite3\nbackup file written successfully\nrqlite3.lowend.party:4001&gt;<span class=\"Apple-converted-space\">&nbsp;</span>\nEOF (CTRL+D)\nroot@rqlite3:/usr/local/rqlite# ls -l bak.sqlite3<span class=\"Apple-converted-space\">&nbsp;</span>\n-rw-r--r-- 1 root root 8192 May 25 12:24 bak.sqlite3</pre><p>This file is just a normal sqlite3 file:</p><pre>root@rqlite1:/usr/local/rqlite# sqlite3 bak.sqlite3<span class=\"Apple-converted-space\">&nbsp;</span>\nSQLite version 3.27.2 2019-02-25 16:06:06\nEnter \".help\" for usage hints.\nsqlite&gt; .schema\nCREATE TABLE planets (from_sun integer not null primary key, name varchar(30));\nsqlite&gt;<span class=\"Apple-converted-space\">&nbsp;</span></pre><p>From this I could create a dump file and then restore it:</p><pre>root@rqlite3:/usr/local/rqlite# echo \".dump\" | sqlite3 bak.sqlite3 &gt; restore.dump\nroot@rqlite3:/usr/local/rqlite# cat restore.dump<span class=\"Apple-converted-space\">&nbsp;</span>\nPRAGMA foreign_keys=OFF;\nBEGIN TRANSACTION;\nCREATE TABLE planets (from_sun integer not null primary key, name varchar(30));\nINSERT INTO planets VALUES(1,'Mercury');\nINSERT INTO planets VALUES(2,'Venus');\nINSERT INTO planets VALUES(3,'Earth');\nINSERT INTO planets VALUES(4,'Mars');\nCOMMIT;\nroot@rqlite1:/usr/local/rqlite# ./rqlite -H rqlite3.lowend.party\nWelcome to the rqlite CLI. Enter \".help\" for usage hints.\nrqlite3.lowend.party:4001&gt; drop table planets;\n1 row affected\nrqlite3.lowend.party:4001&gt; .restore restore.dump\nlast inserted ID: 4\nrows affected: 1\ndatabase restored successfully</pre><h1>More Info</h1><p>There\u2019s more to rqlite, including APIs and clients for many programming languages. &nbsp;Visit the <a href=\"https://github.com/rqlite/rqlite\">Github project page</a> for full details.</p><div class=\"relpost-thumb-wrapper\"><div class=\"relpost-thumb-container\"><h3>Related posts:</h3><div style=\"clear: both\"></div><div style=\"clear: both\"></div><div class=\"relpost-block-container\"><a class=\"relpost-block-single\" href=\"https://lowendbox.com/blog/guide-to-understanding-file-permissions-in-linux/\"><div class=\"relpost-custom-block-single\" style=\"width: 150px; height: 215px;\"><div class=\"relpost-block-single-image\" alt=\"Understanding File Permissions in Linux Guide\" style=\"background: transparent url(https://lowendbox.com/wp-content/uploads/2020/05/Understanding-File-Permissions-in-Linux-150x150.jpg) no-repeat scroll 0% 0%; width: 150px; height: 150px;\"></div><div class=\"relpost-block-single-text\" style=\"font-family: Arial;  font-size: 12px;  color: #333333;\">Guide to Understanding File Permissions in Linux</div></div></a><a class=\"relpost-block-single\" href=\"https://lowendbox.com/blog/how-to-find-files-in-linux/\"><div class=\"relpost-custom-block-single\" style=\"width: 150px; height: 215px;\"><div class=\"relpost-block-single-image\" alt=\"How to Find Files in Linux\" style=\"background: transparent url(https://lowendbox.com/wp-content/uploads/2020/05/Finding-files-in-linux-150x150.jpg) no-repeat scroll 0% 0%; width: 150px; height: 150px;\"></div><div class=\"relpost-block-single-text\" style=\"font-family: Arial;  font-size: 12px;  color: #333333;\">How to Find Files in Linux</div></div></a><a class=\"relpost-block-single\" href=\"https://lowendbox.com/blog/lowendboxtv-how-to-find-that-file-you-lost-in-linux/\"><div class=\"relpost-custom-block-single\" style=\"width: 150px; height: 215px;\"><div class=\"relpost-block-single-image\" alt=\"LowEndBoxTV: How to Find That File You Lost in Linux\" style=\"background: transparent url(https://lowendbox.com/wp-content/uploads/2021/05/find-files-leb-150x150.png) no-repeat scroll 0% 0%; width: 150px; height: 150px;\"></div><div class=\"relpost-block-single-text\" style=\"font-family: Arial;  font-size: 12px;  color: #333333;\">LowEndBoxTV: How to Find That File You Lost in Linux</div></div></a><a class=\"relpost-block-single\" href=\"https://lowendbox.com/blog/lowendboxtv-create-your-own-self-hosted-disposable-webmail-with-inbucket/\"><div class=\"relpost-custom-block-single\" style=\"width: 150px; height: 215px;\"><div class=\"relpost-block-single-image\" alt=\"LowEndBoxTV: Create Your Own Self-Hosted Disposable Webmail with Inbucket\" style=\"background: transparent url(https://lowendbox.com/wp-content/uploads/2021/05/inbucket-leb-150x150.png) no-repeat scroll 0% 0%; width: 150px; height: 150px;\"></div><div class=\"relpost-block-single-text\" style=\"font-family: Arial;  font-size: 12px;  color: #333333;\">LowEndBoxTV: Create Your Own Self-Hosted Disposable Webmail with Inbucket</div></div></a></div><div style=\"clear: both\"></div></div></div><div id=\"author-bio-box\" style=\"background: #f8f8f8; border-top: 2px solid #cccccc; border-bottom: 2px solid #cccccc; color: #333333\"><h3><a style=\"color: #555555;\" href=\"https://lowendbox.com/blog/author/raindog308/\" title=\"All posts by raindog308\" rel=\"author\">raindog308</a></h3><div class=\"bio-gravatar\"><img data-lazyloaded=\"1\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3MCIgaGVpZ2h0PSI3MCIgdmlld0JveD0iMCAwIDcwIDcwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjY2ZkNGRiIi8+PC9zdmc+\" alt=\"\" data-src=\"https://secure.gravatar.com/avatar/4ce3b8640a70e05bd73ac25b8a37821c?s=70&amp;d=retro&amp;r=pg\" data-srcset=\"https://secure.gravatar.com/avatar/4ce3b8640a70e05bd73ac25b8a37821c?s=140&amp;d=retro&amp;r=pg 2x\" class=\"avatar avatar-70 photo\" height=\"70\" width=\"70\" loading=\"lazy\"></div><a target=\"_blank\" rel=\"nofollow noopener noreferrer\" href=\"https://www.lowendtalk.com/profile/raindog308\" class=\"bio-icon bio-icon-website\"></a><p class=\"bio-description\">I'm Andrew, techno polymath and long-time LowEndTalk community Moderator. My technical interests include all things Unix, perl, python, shell scripting, and relational database systems. I enjoy writing technical articles here on LowEndBox to help people get more out of their VPSes.</p></div></div><div class=\"feedback\"></div></div>"}