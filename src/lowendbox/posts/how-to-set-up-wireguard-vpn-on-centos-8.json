{"id": "23739", "post": "<div class=\"post-23739 post type-post status-publish format-standard hentry category-tutorials tag-proxy tag-setup-wireguard-vpn tag-tutorial tag-vpn tag-wireguard\" id=\"post-23739\"><h2 class=\"storytitle\"><a href=\"https://lowendbox.com/blog/how-to-set-up-wireguard-vpn-on-centos-8/\" rel=\"bookmark\">How to Set Up WireGuard VPN on CentOS 8</a></h2><div class=\"meta\"><img data-lazyloaded=\"1\" src=\"/media/icons/tag_green.png\" data-src=\"/media/icons/tag_green.png\" alt=\"Tags: \" class=\"litespeed-loaded\" data-was-processed=\"true\"> <a href=\"https://lowendbox.com/tag/proxy/\" rel=\"tag\">proxy</a>, <a href=\"https://lowendbox.com/tag/setup-wireguard-vpn/\" rel=\"tag\">setup wireguard vpn</a>, <a href=\"https://lowendbox.com/tag/tutorial/\" rel=\"tag\">tutorial</a>, <a href=\"https://lowendbox.com/tag/vpn/\" rel=\"tag\">vpn</a>, <a href=\"https://lowendbox.com/tag/wireguard/\" rel=\"tag\">wireguard</a> <img data-lazyloaded=\"1\" src=\"https://lowendbox.com/media/icons/calendar.png\" data-src=\"https://lowendbox.com/media/icons/calendar.png\" alt=\"Date/Time: \" class=\"litespeed-loaded\" data-was-processed=\"true\"> October 2, 2020 @ 4:33 am, by Jon Biloh</div><div class=\"storycontent tablelook\"><p><a><img data-lazyloaded=\"1\" src=\"https://lowendbox.com/wp-content/uploads/2020/06/how-to-setup-wireguard-vpn-on-centos-8.jpg.webp\" loading=\"lazy\" class=\"screenshot litespeed-loaded\" title=\"How to setup WireGuard VPN on CentOS 8\" data-src=\"https://lowendbox.com/wp-content/uploads/2020/06/how-to-setup-wireguard-vpn-on-centos-8.jpg.webp\" alt=\"How to setup WireGuard VPN on CentOS 8\" width=\"410\" height=\"239\" data-was-processed=\"true\"></a></p><p><span style=\"font-weight: 400;\">WireGuard is a modern VPN solution that runs on state-of-the-art cryptography such as the Noise protocol framework, and Curve25519. It provides a much faster experience and outperforms its competitors, such as IPsec and OpenVPN. It provides all this power in a simple and easy to use framework. All it takes to start a VPN connection is the exchange of public keys, just like SSH keys.</span></p><p><span style=\"font-weight: 400;\">WireGuard is available on multiple platforms, including Windows, macOS, iOS, Android, and Linux. Today, we will guide you on how to install and set up WireGuard VPN on your CentOS 8 machine. Let us get started.</span><span id=\"more-23739\"></span></p><p><span style=\"font-weight: 400;\">Before we start with the installation, make sure that you have root access on your CentOS 8 server.</span></p><p><span style=\"font-weight: 400;\">1)</span> <b>Add the repositories</b></p><p><span style=\"font-weight: 400;\">To install WireGuard VPN, you will have to add the Epel and Elrepo repositories to your server. To do that, run the following command in the terminal:</span></p><blockquote><p><i><span style=\"font-weight: 400;\">\u2018sudo dnf install epel-release elrepo-release\u2019</span></i></p></blockquote><p><span style=\"font-weight: 400;\">2)</span> <b>Install WireGuard</b></p><p><span style=\"font-weight: 400;\">Now to install WireGuard, run this command:</span></p><blockquote><p><i><span style=\"font-weight: 400;\">\u2018sudo dnf install kmod-wireguard wireguard-tools\u2019</span></i></p></blockquote><p><span style=\"font-weight: 400;\">If you are prompted for anything during the installation, press \u2018y\u2019.</span></p><p><span style=\"font-weight: 400;\">After the installation is done, we will be able to run a WireGuard VPN server on our machine. Now it is time to configure it, so the traffic goes through it.</span></p><p><span style=\"font-weight: 400;\">3)</span> <b>Configuration</b></p><p><span style=\"font-weight: 400;\">To configure the WireGuard, we will be using the command line tools \u201cwg\u201d and \u201cwg-quick\u201d provided by the WireGuard packages.</span></p><p><span style=\"font-weight: 400;\">To store the configuration, you need to manually a \u201c/etc/wireguard\u201d directory, or you can run this command:</span></p><blockquote><p><i><span style=\"font-weight: 400;\">\u2018sudo mkdir /etc/wireguard\u2019</span></i><span style=\"font-weight: 400;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p></blockquote><p><span style=\"font-weight: 400;\">4)</span> <b>Generate the keys</b></p><p><span style=\"font-weight: 400;\">We need to generate WireGuard private and public keys now. These will be used to start a VPN connection. The private key should always be kept somewhere safe and should never be shared with any third-party.</span></p><p><span style=\"font-weight: 400;\">To generate the keys, run the following command:</span></p><blockquote><p><i><span style=\"font-weight: 400;\">\u2018wg genkey | sudo tee /etc/wireguard/privatekey | wg pubkey | sudo tee /etc/wireguard/publickey\u2019</span></i></p></blockquote><p><span style=\"font-weight: 400;\">5)</span> <b>Create a configuration file</b></p><p><span style=\"font-weight: 400;\">Now, we need to create a new configuration file, do that with the following command:</span></p><blockquote><p><i><span style=\"font-weight: 400;\">\u2018cd /etc/wireguard/ &amp;&amp; sudo nano wg0.conf\u2019</span></i></p></blockquote><p><span style=\"font-weight: 400;\">In this file, you need to paste the following:</span></p><blockquote><p><span style=\"font-weight: 400;\">[Interface, could be named anything you want]</span></p><p><span style=\"font-weight: 400;\">Address = [A list of IP addresses for the wg0 interface such as 10.0.0.0/8]</span></p><p><span style=\"font-weight: 400;\">SaveConfig = true</span></p><p><span style=\"font-weight: 400;\">ListenPort = [Port number you want WireGuard to listen to]</span></p><p><span style=\"font-weight: 400;\">PrivateKey = [Your private key, run </span><i><span style=\"font-weight: 400;\">\u2018sudo cat /etc/wireguard/privatekey\u2019</span></i><span style=\"font-weight: 400;\">]</span></p><p><span style=\"font-weight: 400;\">PostUp </span> <span style=\"font-weight: 400;\">= firewall-cmd \u2013zone=public \u2013add-port [ListenPort]/udp &amp;&amp; firewall-cmd \u2013zone=public \u2013add-masquerade</span></p><p><span style=\"font-weight: 400;\">PostDown &nbsp; = firewall-cmd \u2013zone=public \u2013remove-port [ListenPort]/udp &amp;&amp; firewall-cmd \u2013zone=public \u2013remove-masquerade</span></p></blockquote><p><span style=\"font-weight: 400;\">6)</span> <b>Change permission for the configuration file</b></p><p><span style=\"font-weight: 400;\">You need to make sure that the configuration file and the private key cannot be accessed by anyone other than the admin. Run the command:</span></p><blockquote><p><i><span style=\"font-weight: 400;\">\u2018sudo chmod 600 /etc/wireguard/{privatekey, wg0.conf}\u2019</span></i></p></blockquote><p><span style=\"font-weight: 400;\">To check the interface state and the configuration for your WireGuard server, you can run the commands:</span></p><blockquote><p><i><span style=\"font-weight: 400;\">\u2018sudo wg show wg0\u2019</span></i><span style=\"font-weight: 400;\"> or </span><i><span style=\"font-weight: 400;\">\u2018sudo wg-quick show wg0\u2019</span></i></p></blockquote><p><span style=\"font-weight: 400;\">7)</span> <b>Enable to wg0 to start at boot</b></p><p><span style=\"font-weight: 400;\">Run the command:</span></p><blockquote><p><i><span style=\"font-weight: 400;\">\u2018sudo systemctl enable wg-quick@wg0\u2019</span></i></p></blockquote><p><span style=\"font-weight: 400;\">8)</span> <b>Enable IP forwarding</b></p><p><span style=\"font-weight: 400;\">This is the last step in the set up of your WireGuard VPN. We need to create a new config file. Run the command:</span></p><blockquote><p><i><span style=\"font-weight: 400;\">\u2018sudo nano /etc/sysctl.d/99-custom.conf\u2019</span></i></p></blockquote><p><span style=\"font-weight: 400;\">And paste the following into the file:</span></p><blockquote><p><span style=\"font-weight: 400;\">\u2018net.ipv4.ip_forward=1\u2019</span></p></blockquote><p><span style=\"font-weight: 400;\">Now, we need to save the file and apply the changes, do that by running this command:</span></p><blockquote><p><span style=\"font-weight: 400;\">\u2018sudo sysctl -p /etc/sysctl.d/99-custom.conf\u2019</span></p></blockquote><p><span style=\"font-weight: 400;\">With that, the configuration of the WireGuard VPN is complete on your CentOS 8 server.</span></p><p><b>Have you used WireGuard before? Share your experiences and feedback in the comments section below!</b></p><p class=\"dpsp-share-text\"></p><div id=\"dpsp-content-bottom\" class=\"dpsp-content-wrapper dpsp-shape-rounded dpsp-column-auto dpsp-has-spacing dpsp-no-labels dpsp-show-on-mobile dpsp-button-style-1 dpsp-has-icon-background dpsp-has-button-background dpsp-show-total-share-count dpsp-show-total-share-count-after\"><ul class=\"dpsp-networks-btns-wrapper dpsp-networks-btns-content dpsp-has-button-icon-animation\"><li><a rel=\"nofollow\" href=\"https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Flowendbox.com%2Fblog%2Fhow-to-set-up-wireguard-vpn-on-centos-8%2F&amp;t=How%20to%20Set%20Up%20WireGuard%20VPN%20on%20CentOS%208\" class=\"dpsp-network-btn dpsp-facebook dpsp-no-label dpsp-first\" title=\"Share on Facebook\"><span class=\"dpsp-network-icon\"></span><span class=\"dpsp-network-label-wrapper\"></span></a></li><li><a rel=\"nofollow\" href=\"https://twitter.com/intent/tweet?text=How%20to%20Set%20Up%20WireGuard%20VPN%20on%20CentOS%208&amp;url=https%3A%2F%2Flowendbox.com%2Fblog%2Fhow-to-set-up-wireguard-vpn-on-centos-8%2F&amp;via=LowEndNetwork\" class=\"dpsp-network-btn dpsp-twitter dpsp-no-label\" title=\"Share on Twitter\"><span class=\"dpsp-network-icon\"></span><span class=\"dpsp-network-label-wrapper\"></span></a></li><li><a rel=\"nofollow\" href=\"https://www.linkedin.com/shareArticle?url=https%3A%2F%2Flowendbox.com%2Fblog%2Fhow-to-set-up-wireguard-vpn-on-centos-8%2F&amp;title=How%20to%20Set%20Up%20WireGuard%20VPN%20on%20CentOS%208&amp;mini=true\" class=\"dpsp-network-btn dpsp-linkedin dpsp-no-label dpsp-last\" title=\"Share on LinkedIn\"><span class=\"dpsp-network-icon\"></span><span class=\"dpsp-network-label-wrapper\"></span></a></li></ul><div class=\"dpsp-total-share-wrapper\"><span class=\"dpsp-icon-total-share\"></span><span class=\"dpsp-total-share-count\">3</span><span>shares</span></div></div><div class=\"relpost-thumb-wrapper\"><div class=\"relpost-thumb-container\"><h3>Related posts:</h3><div style=\"clear: both\"></div><div style=\"clear: both\"></div><div class=\"relpost-block-container\"><a class=\"relpost-block-single\" href=\"https://lowendbox.com/blog/managing-your-lowendempire-with-ansible-part-1/\"><div style=\"width: 150px; height: 215px;\"><div class=\"relpost-block-single-image\" alt=\"Managing Your LowEndEmpire With Ansible, Part 1\" style=\"background: transparent url(https://lowendbox.com/wp-content/uploads/2020/03/leb-banner-150x150.png) no-repeat scroll 0% 0%; width: 150px; height: 150px;\"></div><div class=\"relpost-block-single-text\" style=\"font-family: Arial;  font-size: 12px;  color: #333333;\">Managing Your LowEndEmpire With Ansible, Part 1</div></div></a><a class=\"relpost-block-single\" href=\"https://lowendbox.com/blog/setup-a-dns-nameserver-using-nsd/\"><div style=\"width: 150px; height: 215px;\"><div class=\"relpost-block-single-image\" alt=\"Setup a DNS Nameserver Using NSD\" style=\"background: transparent url(https://lowendbox.com/wp-content/uploads/2020/03/leb-banner-150x150.png) no-repeat scroll 0% 0%; width: 150px; height: 150px;\"></div><div class=\"relpost-block-single-text\" style=\"font-family: Arial;  font-size: 12px;  color: #333333;\">Setup a DNS Nameserver Using NSD</div></div></a><a class=\"relpost-block-single\" href=\"https://lowendbox.com/blog/keeping-a-logwatchful-eye-on-your-vps-with-logwatch/\"><div style=\"width: 150px; height: 215px;\"><div class=\"relpost-block-single-image\" alt=\"Keeping A (log)Watchful Eye on Your VPS With logwatch\" style=\"background: transparent url(https://lowendbox.com/wp-content/uploads/2020/04/logwatch-150x150.png) no-repeat scroll 0% 0%; width: 150px; height: 150px;\"></div><div class=\"relpost-block-single-text\" style=\"font-family: Arial;  font-size: 12px;  color: #333333;\">Keeping A (log)Watchful Eye on Your VPS With logwatch</div></div></a><a class=\"relpost-block-single\" href=\"https://lowendbox.com/blog/nginx-vs-openlitespeed-vs-apache/\"><div style=\"width: 150px; height: 215px;\"><div class=\"relpost-block-single-image\" alt=\"Nginx vs. OpenLiteSpeed vs. Apache\" style=\"background: transparent url(https://lowendbox.com/wp-content/uploads/2020/04/nginx-vs-openlitespeed-vs-apache-150x150.png) no-repeat scroll 0% 0%; width: 150px; height: 150px;\"></div><div class=\"relpost-block-single-text\" style=\"font-family: Arial;  font-size: 12px;  color: #333333;\">Nginx vs. OpenLiteSpeed vs. Apache</div></div></a></div><div style=\"clear: both\"></div></div></div><div id=\"author-bio-box\" style=\"background: #f8f8f8; border-top: 2px solid #cccccc; border-bottom: 2px solid #cccccc; color: #333333\"><h3><a style=\"color: #555555;\" href=\"https://lowendbox.com/blog/author/jbiloh/\" title=\"All posts by Jon Biloh\" rel=\"author\">Jon Biloh</a></h3><div class=\"bio-gravatar\"><img data-lazyloaded=\"1\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3MCIgaGVpZ2h0PSI3MCIgdmlld0JveD0iMCAwIDcwIDcwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjY2ZkNGRiIi8+PC9zdmc+\" alt=\"\" data-src=\"https://secure.gravatar.com/avatar/f766d6dc4b5f406b9f3cb0339d48de95?s=70&amp;d=retro&amp;r=pg\" data-srcset=\"https://secure.gravatar.com/avatar/f766d6dc4b5f406b9f3cb0339d48de95?s=140&amp;d=retro&amp;r=pg 2x\" class=\"avatar avatar-70 photo\" height=\"70\" width=\"70\" loading=\"lazy\"></div><a target=\"_blank\" rel=\"nofollow noopener noreferrer\" href=\"https://www.lowendtalk.com/profile/jbiloh\" class=\"bio-icon bio-icon-website\"></a><a target=\"_blank\" rel=\"nofollow noopener noreferrer\" href=\"http://Jbiloh\" class=\"bio-icon bio-icon-twitter\"></a><a target=\"_blank\" rel=\"nofollow noopener noreferrer\" href=\"https://www.linkedin.com/in/jon-biloh-4b32598/\" class=\"bio-icon bio-icon-linkedin\"></a><p class=\"bio-description\">I'm Jon Biloh and I own LowEndBox and LowEndTalk. I've spent my nearly 20 year career in IT building companies and now I'm excited to focus on building and enhancing the community at LowEndBox and LowEndTalk.</p></div></div><div class=\"feedback\"></div></div>"}