{"id": "8374", "post": "<div class=\"post-8374 post type-post status-publish format-standard hentry category-tutorials tag-centos tag-debian tag-linux tag-migrate tag-rsync tag-ubuntu tag-vps\" id=\"post-8374\"><h2 class=\"storytitle\"><a href=\"https://lowendbox.com/blog/how-to-migrate-a-hosted-server-in-5-easy-steps-with-rsync/\" rel=\"bookmark\">How to Migrate a Hosted Server in 5 Easy Steps with Rsync</a></h2><div class=\"meta\"><img data-lazyloaded=\"1\" src=\"data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=\" data-src=\"/media/icons/tag_green.png\" alt=\"Tags: \"> <a href=\"https://lowendbox.com/tag/centos/\" rel=\"tag\">centos</a>, <a href=\"https://lowendbox.com/tag/debian/\" rel=\"tag\">debian</a>, <a href=\"https://lowendbox.com/tag/linux/\" rel=\"tag\">linux</a>, <a href=\"https://lowendbox.com/tag/migrate/\" rel=\"tag\">migrate</a>, <a href=\"https://lowendbox.com/tag/rsync/\" rel=\"tag\">rsync</a>, <a href=\"https://lowendbox.com/tag/ubuntu/\" rel=\"tag\">ubuntu</a>, <a href=\"https://lowendbox.com/tag/vps/\" rel=\"tag\">VPS</a> <img data-lazyloaded=\"1\" src=\"data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=\" data-src=\"https://lowendbox.com/media/icons/calendar.png\" alt=\"Date/Time: \"> January 25, 2016 @ 4:56 am, by Jarland Donnell</div><div class=\"storycontent tablelook\"><p>In order to migrate the files on a VPS box from one provider to another, one of the best solutions for the job is to use a tool called Rsync.</p><p>Let\u2019s take a closer look at Rsync and see how it can help you rapidly move virtual private servers from one provider to another.</p><p><span id=\"more-8374\"></span></p><h3>About Rsync</h3><p>Rsync is one of the most common ways to copy/backup/restore files and folders between two locations, regardless if these endpoints are local or remote servers.</p><p>It supports compression, encryption and incremental transfer which makes the app an extremely versatile and useful tool for systems administrators.</p><p><em>Note: Running Rsync does not require you to be logged in as root.</em></p><p>Since Rsync supports incremental file transfer, the first time you will run it, it will require the same time to copy all the files as any other command However, when you subsequently execute Rsync, it will determines which changes have been made and only transfers those files.</p><p>This mechanism is designed to save time for the system admin, load and bandwidth.<br>\nGetting Acquainted with Rsync</p><p>Let\u2019s get started and copy our live running server in a new location in 5 easy steps.</p><p><strong>Step 1) Ensure that your OS is in Place</strong></p><p>In order to migrate your server to a new location, the first step is to install your operating system onto new infrastructure. You can determine what architecture your current server is running on with the following command:</p><blockquote><p>uname \u2013a</p></blockquote><p>You will want to use a Linux distro and kernel as close as possible to the one installed on server you are migrating.</p><p>Most VPS providers will set this up for you when you buy your new VPS server.</p><p>Tip: You may only need to do this step if you are building out a server locally. Hypervisors such as VMware help administrators streamline the process of installing operating systems onto hardware.</p><p><strong>Step 2) Check the connection between the 2 servers</strong></p><p>Once you have the two systems up and running you will need to check to see if it will be possible to make a connection between the two servers.</p><p>You can easily do that with the command \u201cssh\u201d. Assuming you are running SSH from the new server and trying to connect to the old one, if the old server asks for the password, you passed the test!</p><blockquote><p>ssh user@oldserver</p></blockquote><p><strong>Step 3) Check Rsync</strong></p><p>At this point you will have to verify that Rsync is installed on both systems and if not, it\u2019s time to install it. You can check if the command is present in the following way:</p><blockquote><p>which rsync</p></blockquote><p>In case the tool should not be present, you can easily install it using the following commands:</p><blockquote><p>apt-get install rsync (on Ubunbu based distros)<br>\nyum install rsync (on CentOS based distros)</p></blockquote><p><strong>Step 4) Prepare the Exclude List</strong></p><p>You will now only need to decide which directories to exclude. This may vary from system to system, but I would never suggest you to include the following unless differently needed:</p><blockquote><p>/etc/fstab<br>\n/etc/sysconfig/network-scripts/* (CentOS distros)<br>\n/etc/network/* (Ubuntu distros)<br>\n/proc/*<br>\n/tmp/*<br>\n/sys/*<br>\n/dev/*<br>\n/mnt/*<br>\n/boot/*</p></blockquote><p><strong>Step 5) Run Rsync</strong></p><p>Some VPS administrators may be worried about running Rsync while a MySQL instance running.</p><p>In most cases, this won\u2019t present a problem. You might consider running it outside of heavy load periods if your server is hosting a live system, but other than that you should not have any problems.</p><p>Of course you will not have a consistent copy of the DB unless you stop the service before beginning Rsync, so please keep that in mind.</p><p>In this instance, Rsync will create a copy and it will allow you to test the system on the new server, which is usually always a big plus.</p><p><strong>An Example of Rsync at Work</strong></p><p>Assuming you are logged into the destination server, you\u2019d implement a command that looks like this:</p><blockquote><p>rsync -auHxv \u2013numeric-ids \u2013exclude=/etc/fstab \u2013exclude=/etc/network/* \u2013exclude=/proc/* \u2013exclude=/tmp/* \u2013exclude=/sys/* \u2013exclude=/dev/* \u2013exclude=/mnt/* \u2013exclude=/boot/* \u2013exclude=/root/* root@SRC-IP:/* /</p></blockquote><p>Once it finishes, simply reboot your destination server and you will notice that you will have a precise copy of the files located on your source VPS.</p><p>(Tutorial written by a contributor)</p><p class=\"dpsp-share-text\"></p><div id=\"dpsp-content-bottom\" class=\"dpsp-content-wrapper dpsp-shape-rounded dpsp-column-auto dpsp-has-spacing dpsp-no-labels dpsp-show-on-mobile dpsp-button-style-1 dpsp-has-icon-background dpsp-has-button-background dpsp-show-total-share-count dpsp-show-total-share-count-after\"><ul class=\"dpsp-networks-btns-wrapper dpsp-networks-btns-content dpsp-has-button-icon-animation\"><li><a rel=\"nofollow\" href=\"https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Flowendbox.com%2Fblog%2Fhow-to-migrate-a-hosted-server-in-5-easy-steps-with-rsync%2F&amp;t=How%20to%20Migrate%20a%20Hosted%20Server%20in%205%20Easy%20Steps%20with%20Rsync\" class=\"dpsp-network-btn dpsp-facebook dpsp-no-label dpsp-first\" title=\"Share on Facebook\"><span class=\"dpsp-network-icon\"></span><span class=\"dpsp-network-label-wrapper\"></span></a></li><li><a rel=\"nofollow\" href=\"https://twitter.com/intent/tweet?text=How%20to%20Migrate%20a%20Hosted%20Server%20in%205%20Easy%20Steps%20with%20Rsync&amp;url=https%3A%2F%2Flowendbox.com%2Fblog%2Fhow-to-migrate-a-hosted-server-in-5-easy-steps-with-rsync%2F&amp;via=LowEndNetwork\" class=\"dpsp-network-btn dpsp-twitter dpsp-no-label\" title=\"Share on Twitter\"><span class=\"dpsp-network-icon\"></span><span class=\"dpsp-network-label-wrapper\"></span></a></li><li><a rel=\"nofollow\" href=\"https://www.linkedin.com/shareArticle?url=https%3A%2F%2Flowendbox.com%2Fblog%2Fhow-to-migrate-a-hosted-server-in-5-easy-steps-with-rsync%2F&amp;title=How%20to%20Migrate%20a%20Hosted%20Server%20in%205%20Easy%20Steps%20with%20Rsync&amp;mini=true\" class=\"dpsp-network-btn dpsp-linkedin dpsp-no-label dpsp-last\" title=\"Share on LinkedIn\"><span class=\"dpsp-network-icon\"></span><span class=\"dpsp-network-label-wrapper\"></span></a></li></ul><div class=\"dpsp-total-share-wrapper\"><span class=\"dpsp-icon-total-share\"></span><span class=\"dpsp-total-share-count\">12</span><span>shares</span></div></div><div class=\"relpost-thumb-wrapper\"><div class=\"relpost-thumb-container\"><h3>Related posts:</h3><div style=\"clear: both\"></div><div style=\"clear: both\"></div><div class=\"relpost-block-container\"><a class=\"relpost-block-single\" href=\"https://lowendbox.com/blog/nginx-vs-openlitespeed-vs-apache/\"><div style=\"width: 150px; height: 215px;\"><div class=\"relpost-block-single-image\" alt=\"Nginx vs. OpenLiteSpeed vs. Apache\" style=\"background: transparent url(https://lowendbox.com/wp-content/uploads/2020/04/nginx-vs-openlitespeed-vs-apache-150x150.png) no-repeat scroll 0% 0%; width: 150px; height: 150px;\"></div><div class=\"relpost-block-single-text\" style=\"font-family: Arial;  font-size: 12px;  color: #333333;\">Nginx vs. OpenLiteSpeed vs. Apache</div></div></a><a class=\"relpost-block-single\" href=\"https://lowendbox.com/blog/how-to-set-up-nameservers-on-a-vps/\"><div style=\"width: 150px; height: 215px;\"><div class=\"relpost-block-single-image\" alt=\"How to Set Up Nameservers on a VPS\" style=\"background: transparent url(https://lowendbox.com/wp-content/uploads/2020/04/how-to-setup-nameservers-on-a-vps-150x150.png) no-repeat scroll 0% 0%; width: 150px; height: 150px;\"></div><div class=\"relpost-block-single-text\" style=\"font-family: Arial;  font-size: 12px;  color: #333333;\">How to Set Up Nameservers on a VPS</div></div></a><a class=\"relpost-block-single\" href=\"https://lowendbox.com/blog/top-ten-things-that-should-be-in-your-dot-files/\"><div style=\"width: 150px; height: 215px;\"><div class=\"relpost-block-single-image\" alt=\"Top Ten Things That Should Be In Your Dot Files\" style=\"background: transparent url(https://lowendbox.com/wp-content/uploads/2013/05/lowendtutorial-150x150.png) no-repeat scroll 0% 0%; width: 150px; height: 150px;\"></div><div class=\"relpost-block-single-text\" style=\"font-family: Arial;  font-size: 12px;  color: #333333;\">Top Ten Things That Should Be In Your Dot Files</div></div></a><a class=\"relpost-block-single\" href=\"https://lowendbox.com/blog/top-ten-ways-to-save-on-vps-hosting-and-a-bonus-eleventh-way/\"><div style=\"width: 150px; height: 215px;\"><div class=\"relpost-block-single-image\" alt=\"LowEndBox - The best place for hosting and cheap VPS deals!\" style=\"background: transparent url(https://lowendbox.com/wp-content/uploads/2020/03/leb-banner-150x150.png) no-repeat scroll 0% 0%; width: 150px; height: 150px;\"></div><div class=\"relpost-block-single-text\" style=\"font-family: Arial;  font-size: 12px;  color: #333333;\">Top Ten Ways to Save on VPS Hosting (and a Bonus Eleventh Way)</div></div></a></div><div style=\"clear: both\"></div></div></div><div id=\"author-bio-box\" style=\"background: #f8f8f8; border-top: 2px solid #cccccc; border-bottom: 2px solid #cccccc; color: #333333\"><h3><a style=\"color: #555555;\" href=\"https://lowendbox.com/blog/author/jarland/\" title=\"All posts by Jarland Donnell\" rel=\"author\">Jarland Donnell</a></h3><div class=\"bio-gravatar\"><img data-lazyloaded=\"1\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3MCIgaGVpZ2h0PSI3MCIgdmlld0JveD0iMCAwIDcwIDcwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjY2ZkNGRiIi8+PC9zdmc+\" alt=\"\" data-src=\"https://secure.gravatar.com/avatar/dc84c83792d2153562104e1830035d6c?s=70&amp;d=retro&amp;r=pg\" data-srcset=\"https://secure.gravatar.com/avatar/dc84c83792d2153562104e1830035d6c?s=140&amp;d=retro&amp;r=pg 2x\" class=\"avatar avatar-70 photo\" height=\"70\" width=\"70\" loading=\"lazy\"></div><p class=\"bio-description\">Jarland Donnell was the administrator of LowEndBox from 2015 to 2016 and continues to be an active member of our community on LowEndTalk.</p></div></div><div class=\"feedback\"></div></div>"}