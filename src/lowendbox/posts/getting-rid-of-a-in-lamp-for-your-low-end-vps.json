{"id": "98", "post": "<div class=\"post-98 post type-post status-publish format-standard hentry category-tutorials tag-apache tag-lighttpd tag-nginx tag-web-server\" id=\"post-98\"><h2 class=\"storytitle\"><a href=\"https://lowendbox.com/blog/getting-rid-of-a-in-lamp-for-your-low-end-vps/\" rel=\"bookmark\">Getting Rid of A in LAMP for Your Low End VPS</a></h2><div class=\"meta\"><img data-lazyloaded=\"1\" src=\"/media/icons/tag_green.png\" data-src=\"/media/icons/tag_green.png\" alt=\"Tags: \" class=\"litespeed-loaded\" data-was-processed=\"true\"> <a href=\"https://lowendbox.com/tag/apache/\" rel=\"tag\">apache</a>, <a href=\"https://lowendbox.com/tag/lighttpd/\" rel=\"tag\">lighttpd</a>, <a href=\"https://lowendbox.com/tag/nginx/\" rel=\"tag\">nginx</a>, <a href=\"https://lowendbox.com/tag/web-server/\" rel=\"tag\">web server</a> <img data-lazyloaded=\"1\" src=\"https://lowendbox.com/media/icons/calendar.png\" data-src=\"https://lowendbox.com/media/icons/calendar.png\" alt=\"Date/Time: \" class=\"litespeed-loaded\" data-was-processed=\"true\"> September 11, 2008 @ 2:13 am, by LowEndAdmin</div><div class=\"storycontent tablelook\"><p>Got your dirt cheap VPS with only 64MB guaranteed memory on OpenVZ? Want to move your WordPress blog from some insanely oversold shared hosting to your shining low end box? If you follow the \u201ctraditional way\u201d of setting up a Linux web server \u2014 installing Apache, MySQL and Mod_PHP \u2014 you will soon find that your site dying a horrible death, with pre-forked Apache processes killing themselves left and right. Or your entire Xen box descending into swapping hell before completely locking itself up.</p><p>So is it possible to host a low traffic PHP site on a low end VPS? <b>Yes</b>, but the first thing you need to do is <b>getting rid of the <a href=\"http://httpd.apache.org/\">A</a> in <a href=\"http://en.wikipedia.org/wiki/LAMP_(software_bundle)\">LAMP</a></b>.</p><p>While infinitely configurable, pre-forked Apache (which is required for mod_php) is not really scalable to suit low memory requirement. I won\u2019t get into all the details, but there are several free/open source alternatives.</p><p>At LowEndBox, I am running <a href=\"http://www.lighttpd.net/\">Lighttpd</a> + PHP in FastCGI mode. I am running 2x slave FastCGI process and it works quite well for 3x very low usage sites on this box, using less than 15MB of memory all together.</p><pre class=\"code\"># ps -u www-data u\nUSER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND\nwww-data 27509  0.0  3.1   6672  2092 ?        S    11:50   0:00 /usr/sbin/lighttpd -f /etc/lighttpd/lighttpd.conf\nwww-data 27510  0.0  7.3  16656  4848 ?        S    11:50   0:00 /usr/bin/php5-cgi\nwww-data 27512  1.1 11.9  16652  7868 ?        S    11:50   0:04 /usr/bin/php5-cgi\n</pre><p>Installing them is easy \u2014</p><pre class=\"code\"># apt-get install lighttpd php5-cgi\n</pre><p>Then just install other PHP modules (MySQL, GD, etc). Here is a <a href=\"http://trac.lighttpd.net/trac/wiki/TutorialLighttpdAndPHP\">comprehensive guide on running PHP on Lighttpd</a>, but on Debian/Ubuntu, you usually just need do:</p><pre class=\"code\"># ln -s /etc/lighttpd/conf-available/10-fastcgi.conf /etc/lighttpd/conf-enabled\n</pre><p>Make sure you edit the <code>10-fastcgi.conf</code> and (1) leave max-procs at <b>2</b> (2) reduce PHP_FCGI_CHILDREN to <b>1</b>. After starting the daemon, you\u2019ll see 2x <code>php5-cgi</code> process running. With PHP 5.2.x it would not spawn a manager process. However, if you intend to use PHP op-code cache/accelerator, then it would be a good idea to change max-procs to <b>1</b> and PHP_FCGI_CHILDREN to <b>2</b> so that your 2 worker processes can share the cache (but you\u2019ll see a 3rd php5-cgi process running as manager/dispatcher).</p><p>While it\u2019s lighter and faster, Lighttpd does not offer as much functionality as Apache, nor as configurable. For applications that depend on Apache\u2019s mod_rewrite capability, there is <em>usually</em> hacks and work-around for Lighttpd. For WordPress to get clean URL, just add</p><pre class=\"code\">server.error-handler-404 = \"/index.php\"\n</pre><p>to your configuration file for your WP sites.</p><p>Another alternative web server that I\u2019ve used for my other projects is <a href=\"http://nginx.net/\">Nginx</a>. It uses slightly more memory (at least 7MB on 32bit Ubuntu) and does not support spawning CGI processes (so all FastCGI procs have to be external). A great piece software if you have very hight traffic site.</p><p class=\"dpsp-share-text\"></p><div id=\"dpsp-content-bottom\" class=\"dpsp-content-wrapper dpsp-shape-rounded dpsp-column-auto dpsp-has-spacing dpsp-no-labels dpsp-show-on-mobile dpsp-button-style-1 dpsp-has-icon-background dpsp-has-button-background dpsp-show-total-share-count dpsp-show-total-share-count-after\"><ul class=\"dpsp-networks-btns-wrapper dpsp-networks-btns-content dpsp-has-button-icon-animation\"><li><a rel=\"nofollow\" href=\"https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Flowendbox.com%2Fblog%2Fgetting-rid-of-a-in-lamp-for-your-low-end-vps%2F&amp;t=Getting%20Rid%20of%20A%20in%20LAMP%20for%20Your%20Low%20End%20VPS\" class=\"dpsp-network-btn dpsp-facebook dpsp-no-label dpsp-first\" title=\"Share on Facebook\"><span class=\"dpsp-network-icon\"></span><span class=\"dpsp-network-label-wrapper\"></span></a></li><li><a rel=\"nofollow\" href=\"https://twitter.com/intent/tweet?text=Getting%20Rid%20of%20A%20in%20LAMP%20for%20Your%20Low%20End%20VPS&amp;url=https%3A%2F%2Flowendbox.com%2Fblog%2Fgetting-rid-of-a-in-lamp-for-your-low-end-vps%2F&amp;via=LowEndNetwork\" class=\"dpsp-network-btn dpsp-twitter dpsp-no-label\" title=\"Share on Twitter\"><span class=\"dpsp-network-icon\"></span><span class=\"dpsp-network-label-wrapper\"></span></a></li><li><a rel=\"nofollow\" href=\"https://www.linkedin.com/shareArticle?url=https%3A%2F%2Flowendbox.com%2Fblog%2Fgetting-rid-of-a-in-lamp-for-your-low-end-vps%2F&amp;title=Getting%20Rid%20of%20A%20in%20LAMP%20for%20Your%20Low%20End%20VPS&amp;mini=true\" class=\"dpsp-network-btn dpsp-linkedin dpsp-no-label dpsp-last\" title=\"Share on LinkedIn\"><span class=\"dpsp-network-icon\"></span><span class=\"dpsp-network-label-wrapper\"></span></a></li></ul><div class=\"dpsp-total-share-wrapper\"><span class=\"dpsp-icon-total-share\"></span><span class=\"dpsp-total-share-count\">0</span><span>shares</span></div></div><div class=\"relpost-thumb-wrapper\"><div class=\"relpost-thumb-container\"><h3>Related posts:</h3><div style=\"clear: both\"></div><div style=\"clear: both\"></div><div class=\"relpost-block-container\"><a class=\"relpost-block-single\" href=\"https://lowendbox.com/blog/nginx-vs-openlitespeed-vs-apache/\"><div style=\"width: 150px; height: 215px;\"><div class=\"relpost-block-single-image\" alt=\"Nginx vs. OpenLiteSpeed vs. Apache\" style=\"background: transparent url(https://lowendbox.com/wp-content/uploads/2020/04/nginx-vs-openlitespeed-vs-apache-150x150.png) no-repeat scroll 0% 0%; width: 150px; height: 150px;\"></div><div class=\"relpost-block-single-text\" style=\"font-family: Arial;  font-size: 12px;  color: #333333;\">Nginx vs. OpenLiteSpeed vs. Apache</div></div></a><a class=\"relpost-block-single\" href=\"https://lowendbox.com/blog/how-to-configure-reverse-proxy-with-nginx/\"><div style=\"width: 150px; height: 215px;\"><div class=\"relpost-block-single-image\" alt=\"How to Configure Reverse Proxy with NGINX\" style=\"background: transparent url(https://lowendbox.com/wp-content/uploads/2020/03/leb-banner-150x150.png) no-repeat scroll 0% 0%; width: 150px; height: 150px;\"></div><div class=\"relpost-block-single-text\" style=\"font-family: Arial;  font-size: 12px;  color: #333333;\">How to Configure Reverse Proxy with NGINX</div></div></a><a class=\"relpost-block-single\" href=\"https://lowendbox.com/blog/from-zero-to-encrypted-with-nginx-and-lets-encrypt/\"><div style=\"width: 150px; height: 215px;\"><div class=\"relpost-block-single-image\" alt=\"Free SSL with NGINX and LetsEncrypt on Debian 10\" style=\"background: transparent url(https://lowendbox.com/wp-content/uploads/2020/04/nginx-and-lets-encrypt-150x150.png) no-repeat scroll 0% 0%; width: 150px; height: 150px;\"></div><div class=\"relpost-block-single-text\" style=\"font-family: Arial;  font-size: 12px;  color: #333333;\">Free SSL with NGINX and LetsEncrypt on Debian 10</div></div></a><a class=\"relpost-block-single\" href=\"https://lowendbox.com/blog/how-to-secure-apache-with-lets-encrypt-on-ubuntu-18-04/\"><div style=\"width: 150px; height: 215px;\"><div class=\"relpost-block-single-image\" alt=\"How To Secure Apache with Let's Encrypt on Ubuntu 18.04\" style=\"background: transparent url(https://lowendbox.com/wp-content/uploads/2020/04/leb-centered-small.jpg) no-repeat scroll 0% 0%; width: 150px; height: 150px;\"></div><div class=\"relpost-block-single-text\" style=\"font-family: Arial;  font-size: 12px;  color: #333333;\">How To Secure Apache with Let's Encrypt on Ubuntu 18.04</div></div></a></div><div style=\"clear: both\"></div></div></div><div id=\"author-bio-box\" style=\"background: #f8f8f8; border-top: 2px solid #cccccc; border-bottom: 2px solid #cccccc; color: #333333\"><h3><a style=\"color: #555555;\" href=\"https://lowendbox.com/blog/author/admin/\" title=\"All posts by LowEndAdmin\" rel=\"author\">LowEndAdmin</a></h3><div class=\"bio-gravatar\"><img data-lazyloaded=\"1\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3MCIgaGVpZ2h0PSI3MCIgdmlld0JveD0iMCAwIDcwIDcwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjY2ZkNGRiIi8+PC9zdmc+\" alt=\"\" data-src=\"https://secure.gravatar.com/avatar/11a4d9191634a9374eeca7d0e8982ba2?s=70&amp;d=retro&amp;r=pg\" data-srcset=\"https://secure.gravatar.com/avatar/11a4d9191634a9374eeca7d0e8982ba2?s=140&amp;d=retro&amp;r=pg 2x\" class=\"avatar avatar-70 photo\" height=\"70\" width=\"70\" loading=\"lazy\"></div><p class=\"bio-description\">The original owner of LowEndBox known as \"LowEndAdmin\" or \"LEA\" for short founded LowEndBox in 2008 and created the concept of hosting applications on low resource \"Low End Boxes\". After creating the roots of the community that we know today, \"LEA\" stepped aside and allowed others to carry the torch forward.</p></div></div><div class=\"feedback\"></div></div>"}