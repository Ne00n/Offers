{"id": "24133", "post": "<div class=\"post-24133 post type-post status-publish format-standard hentry category-tutorials tag-docker tag-linux tag-wordpress\" id=\"post-24133\"><h2 class=\"storytitle\"><a href=\"https://lowendbox.com/blog/how-to-fire-up-wordpress-in-three-commands/\" rel=\"bookmark\">How to Fire Up WordPress in Three Commands</a></h2><div class=\"meta\"><img data-lazyloaded=\"1\" src=\"/media/icons/tag_green.png\" data-src=\"/media/icons/tag_green.png\" alt=\"Tags: \" class=\"litespeed-loaded\" data-was-processed=\"true\"> <a href=\"https://lowendbox.com/tag/docker/\" rel=\"tag\">docker</a>, <a href=\"https://lowendbox.com/tag/linux/\" rel=\"tag\">linux</a>, <a href=\"https://lowendbox.com/tag/wordpress/\" rel=\"tag\">wordpress</a> <img data-lazyloaded=\"1\" src=\"https://lowendbox.com/media/icons/calendar.png\" data-src=\"https://lowendbox.com/media/icons/calendar.png\" alt=\"Date/Time: \" class=\"litespeed-loaded\" data-was-processed=\"true\"> February 20, 2021 @ 12:00 am, by raindog308</div><div class=\"storycontent tablelook\"><p>Typically when you setup WordPress, you\u2019ve got to do the following:</p><ul><li>Install MySQL</li><li>Run mysql_secure_installation (not strictly necessary but you should!)</li><li>Create the MySQL database</li><li>Create the MySQL user</li><li>Grant the MySQL user database privileges</li><li>Install a web server such as Apache or NginX</li><li>Install PHP</li><li>Configure the web server to support PHP</li><li>Create the web root directory and set permissions</li><li>Create log files if necessary, and setup logfile rotation</li><li>Configure your web server for the site you want to run</li><li>Download WordPress and untar</li><li>Set permissions on the files and directories</li></ul><p>\u2026and then you\u2019re ready to run the WordPress install script.</p><p>True, if you\u2019re on shared hosting, you may have a 1-click installer such as Softaculous or Fantastico available. But if you\u2019re running things on your VPS, you\u2019ll have to do these things manually.</p><p>If only there was a way to\u2026oh, I don\u2019t know\u2026bundle up all these tasks and setup and components and put them in some sort of\u2026what would we call it\u2026container\u2026</p><p><span id=\"more-24133\"></span></p><h1>Enter Docker</h1><p>Try this on Debian 10 (obviously, replace wordpress.lowend.party with whatever your site hostname is):</p><pre>curl -fsSL https://get.docker.com -o get-docker.sh\nsh get-docker.sh\ndocker container run --detach --publish=80:80 --hostname=wordpress.lowend.party wordpress</pre><p>Or if you want be cheeky, you could even do it in a single cut-and-paste, though I think using &amp;&amp; doesn\u2019t qualify it as one command:</p><pre>curl -fsSL https://get.docker.com -o get-docker.sh &amp;&amp; sh get-docker.sh &amp;&amp; docker container run --detach --publish=80:80 --hostname=wordpress.lowend.party wordpress</pre><p>Now go that address in your browser and WordPress will be running!</p><p><img data-lazyloaded=\"1\" src=\"https://lowendbox.com/wp-content/uploads/2020/07/wordpress.png.webp\" loading=\"lazy\" class=\"alignnone size-full wp-image-24136 litespeed-loaded\" data-src=\"https://lowendbox.com/wp-content/uploads/2020/07/wordpress.png.webp\" alt=\"\" width=\"500\" height=\"689\" data-srcset=\"https://lowendbox.com/wp-content/uploads/2020/07/wordpress.png.webp 500w, https://lowendbox.com/wp-content/uploads/2020/07/wordpress-218x300.png.webp 218w\" data-sizes=\"(max-width: 500px) 100vw, 500px\" sizes=\"(max-width: 500px) 100vw, 500px\" srcset=\"https://lowendbox.com/wp-content/uploads/2020/07/wordpress.png.webp 500w, https://lowendbox.com/wp-content/uploads/2020/07/wordpress-218x300.png.webp 218w\" data-was-processed=\"true\"></p><h1>Behind the Scenes</h1><pre>curl -fsSL https://get.docker.com -o get-docker.sh</pre><p>This command pulls down the get-docker.sh setup script.</p><pre>sh get-docker.sh</pre><p>This script runs them. Note that we save a step by running in a new shell as opposed to having to chmod first. The script sets up the repo, updates apt, downloads the docker packages and installs them, etc.</p><p>Here\u2019s the output. As you can see, the script tells you what it\u2019s doing:</p><pre>root@wordpress:~# curl -fsSL https://get.docker.com -o get-docker.sh\nroot@wordpress:~# sh get-docker.sh \n# Executing docker install script, commit: 26ff363bcf3b3f5a00498ac43694bf1c7d9ce16c\n+ sh -c apt-get update -qq &gt;/dev/null\n+ sh -c DEBIAN_FRONTEND=noninteractive apt-get install -y -qq apt-transport-https ca-certificates curl gnupg &gt;/dev/null\n+ sh -c curl -fsSL \"https://download.docker.com/linux/debian/gpg\" | apt-key add -qq - &gt;/dev/null\nWarning: apt-key output should not be parsed (stdout is not a terminal)\n+ sh -c echo \"deb [arch=amd64] https://download.docker.com/linux/debian buster stable\" &gt; /etc/apt/sources.list.d/docker.list\n+ sh -c apt-get update -qq &gt;/dev/null\n+ [ -n ]\n+ sh -c apt-get install -y -qq --no-install-recommends docker-ce &gt;/dev/null\n+ sh -c docker version\nClient: Docker Engine - Community\nVersion: 19.03.12\nAPI version: 1.40\nGo version: go1.13.10\nGit commit: 48a66213fe\nBuilt: Mon Jun 22 15:45:50 2020\nOS/Arch: linux/amd64\nExperimental: false\n\nServer: Docker Engine - Community\nEngine:\nVersion: 19.03.12\nAPI version: 1.40 (minimum version 1.12)\nGo version: go1.13.10\nGit commit: 48a66213fe\nBuilt: Mon Jun 22 15:44:21 2020\nOS/Arch: linux/amd64\nExperimental: false\ncontainerd:\nVersion: 1.2.13\nGitCommit: 7ad184331fa3e55e52b890ea95e65ba581ae3429\nrunc:\nVersion: 1.0.0-rc10\nGitCommit: dc9208a3303feef5b3839f4323d9beb36df0a9dd\ndocker-init:\nVersion: 0.18.0\nGitCommit: fec3683\nIf you would like to use Docker as a non-root user, you should now consider\nadding your user to the \"docker\" group with something like:\n\nsudo usermod -aG docker your-user\n\nRemember that you will have to log out and back in for this to take effect!\n\nWARNING: Adding a user to the \"docker\" group will grant the ability to run\ncontainers which can be used to obtain root privileges on the\ndocker host.\nRefer to https://docs.docker.com/engine/security/security/#docker-daemon-attack-surface\nfor more information.</pre><p>Finally, we run the container. Let\u2019s break down the docker command:</p><ul><li><strong>docker container run:</strong> The docker CLI has over 30 commands. You can type \u201cdocker help\u201d or \u201cdocker container help\u201d to read more about them. Or read the docker man pages (\u201cman docker\u201d or \u201cman docker-run\u201d).</li><li><strong>\u2013detach:</strong> tells Docker to run this container in the background.</li><li><strong>\u2013publish=80:80:</strong> this tells Docker to take this container\u2019s port 80 and map the VPS\u2019s port 80 to it.</li><li><strong>\u2013hostname=wordpress.lowend.party:</strong> Apache needs to set a ServerName so it\u2019s appropriate to set the hostname inside the container.</li><li><strong>wordpress:</strong> the name of the container</li></ul><p>When run, Docker will pull down the \u201cwordpress\u201d container (and all its dependencies) and run them. You\u2019ll see a lot of messages like this as it works:</p><pre>eb2d00c10344: Extracting 72.42MB/76.65MB</pre><p>Here\u2019s the complete output:</p><pre>root@wordpress:~# docker container run --detach --publish=80:80 --hostname=wordpress.lowend.party wordpress\nUnable to find image 'wordpress:latest' locally\nlatest: Pulling from library/wordpress\n8559a31e96f4: Pull complete\ne0276193a084: Pull complete\neb2d00c10344: Pull complete\nf54006e0dc29: Pull complete\ne0d3d1244592: Pull complete\n3a60f364b0c5: Pull complete\n3e309988c00b: Pull complete\nf65316e96b10: Pull complete\nb22875b95a2a: Pull complete\n0c78caf16ec3: Pull complete\n4fc30aae7ee5: Pull complete\n37b016cacdc6: Pull complete\nfd56bf3cc539: Pull complete\nb0ba72715b92: Pull complete\n03888322beaa: Pull complete\n7e7ce3c89644: Pull complete\nf6556df913cf: Pull complete\n11b2e0de50b5: Pull complete\n1c79bd2495a6: Pull complete\n0f2fb876982e: Pull complete\nDigest: sha256:6f609ebf8518069516df36f0ab504735f8e563c1e303c37eba4902e732fcc6c6\nStatus: Downloaded newer image for wordpress:latest\n168421e25271c47c08d12b6130f4d99751a691ad42f5fd8f5ccede52f955689b</pre><p>You can see the container running with \u201cdocker ps\u201d:</p><pre>root@wordpress:~# docker ps\nCONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES\n168421e25271 wordpress \"docker-entrypoint.s\u2026\" 15 seconds ago Up 13 seconds 0.0.0.0:80-&gt;80/tcp objective_neumann</pre><p>In fact, check out ps -ef:</p><pre>root 11698 11682 0 10:04 ? 00:00:00 apache2 -DFOREGROUND\nwww-data 11742 11698 0 10:04 ? 00:00:00 apache2 -DFOREGROUND\nwww-data 11743 11698 0 10:04 ? 00:00:00 apache2 -DFOREGROUND\nwww-data 11744 11698 0 10:04 ? 00:00:00 apache2 -DFOREGROUND\nwww-data 11745 11698 0 10:04 ? 00:00:00 apache2 -DFOREGROUND\nwww-data 11746 11698 0 10:04 ? 00:00:00 apache2 -DFOREGROUND</pre><p>What jiggery-pokery is this?!? Why is apache running in the main process table? Remember that a container is not a VM. You can see the difference by looking at the cgroup. First, here is the cgroup for sshd, a standard system process started when the VM booted and running on PID 9040:</p><pre>root@wordpress:~# ps -o cgroup 9040\nCGROUP\n11:devices:/user.slice,8:blkio:/user.slice,4:pids:/user.slice/user-0.slice/sessi</pre><p>Now here\u2019s the cgroup for PID 11698, one of the apache2 processes shown above:</p><pre>root@wordpress:~# ps -o cgroup 11698\nCGROUP\n11:devices:/docker/168421e25271c47c08d12b6130f4d99751a691ad42f5fd8f5ccede52f9556</pre><h1>Wrapping Up</h1><p>There\u2019s a lot more you could do with this setup to make it more production-worthy, such as setting up Let\u2019s Encrypt for SSL (yes, there\u2019s a cerbot image on DockerHub) or mapping a directory for uploads, images, etc. into the container. But the point of this tutorial was to show you how radically simple Docker can make software setups.</p><div class=\"relpost-thumb-wrapper\"><div class=\"relpost-thumb-container\"><h3>Related posts:</h3><div style=\"clear: both\"></div><div style=\"clear: both\"></div><div class=\"relpost-block-container\"><a class=\"relpost-block-single\" href=\"https://lowendbox.com/blog/lowendbuckets-setting-up-an-maintainable-minio/\"><div style=\"width: 150px; height: 215px;\"><div class=\"relpost-block-single-image\" alt=\"LowEndBuckets: Setting Up an Maintainable Minio\" style=\"background: transparent url(https://lowendbox.com/wp-content/uploads/2020/06/minio1a-150x150.png) no-repeat scroll 0% 0%; width: 150px; height: 150px;\"></div><div class=\"relpost-block-single-text\" style=\"font-family: Arial;  font-size: 12px;  color: #333333;\">LowEndBuckets: Setting Up an Maintainable Minio</div></div></a><a class=\"relpost-block-single\" href=\"https://lowendbox.com/blog/installing-linux-on-your-vps-template-or-iso/\"><div style=\"width: 150px; height: 215px;\"><div class=\"relpost-block-single-image\" alt=\"Installing Linux on Your VPS: Template or ISO?\" style=\"background: transparent url(https://lowendbox.com/wp-content/uploads/2021/02/linux-templates-150x150.png) no-repeat scroll 0% 0%; width: 150px; height: 150px;\"></div><div class=\"relpost-block-single-text\" style=\"font-family: Arial;  font-size: 12px;  color: #333333;\">Installing Linux on Your VPS: Template or ISO?</div></div></a><a class=\"relpost-block-single\" href=\"https://lowendbox.com/blog/no-support-linux-hosting-hacked-shuts-down/\"><div style=\"width: 150px; height: 215px;\"><div class=\"relpost-block-single-image\" alt=\"No Support Linux Hosting Hacked, Shuts Down\" style=\"background: transparent url(https://lowendbox.com/wp-content/uploads/2021/02/NoSupportLinuxHosting-150x150.png) no-repeat scroll 0% 0%; width: 150px; height: 150px;\"></div><div class=\"relpost-block-single-text\" style=\"font-family: Arial;  font-size: 12px;  color: #333333;\">No Support Linux Hosting Hacked, Shuts Down</div></div></a><a class=\"relpost-block-single\" href=\"https://lowendbox.com/blog/vulnerability-in-debian-10-solusvm-templates-you-need-to-take-action/\"><div style=\"width: 150px; height: 215px;\"><div class=\"relpost-block-single-image\" alt=\"Vulnerability in Debian 10 SolusVM Templates - You Need to Take Action\" style=\"background: transparent url(https://lowendbox.com/wp-content/uploads/2020/04/leb-centered-small.jpg) no-repeat scroll 0% 0%; width: 150px; height: 150px;\"></div><div class=\"relpost-block-single-text\" style=\"font-family: Arial;  font-size: 12px;  color: #333333;\">Vulnerability in Debian 10 SolusVM Templates - You Need to Take Action</div></div></a></div><div style=\"clear: both\"></div></div></div><div id=\"author-bio-box\" style=\"background: #f8f8f8; border-top: 2px solid #cccccc; border-bottom: 2px solid #cccccc; color: #333333\"><h3><a style=\"color: #555555;\" href=\"https://lowendbox.com/blog/author/raindog308/\" title=\"All posts by raindog308\" rel=\"author\">raindog308</a></h3><div class=\"bio-gravatar\"><img data-lazyloaded=\"1\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3MCIgaGVpZ2h0PSI3MCIgdmlld0JveD0iMCAwIDcwIDcwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjY2ZkNGRiIi8+PC9zdmc+\" alt=\"\" data-src=\"https://secure.gravatar.com/avatar/4ce3b8640a70e05bd73ac25b8a37821c?s=70&amp;d=retro&amp;r=pg\" data-srcset=\"https://secure.gravatar.com/avatar/4ce3b8640a70e05bd73ac25b8a37821c?s=140&amp;d=retro&amp;r=pg 2x\" class=\"avatar avatar-70 photo\" height=\"70\" width=\"70\" loading=\"lazy\"></div><a target=\"_blank\" rel=\"nofollow noopener noreferrer\" href=\"https://www.lowendtalk.com/profile/raindog308\" class=\"bio-icon bio-icon-website\"></a><p class=\"bio-description\">I'm Andrew, techno polymath and long-time LowEndTalk community Moderator. My technical interests include all things Unix, perl, python, shell scripting, and relational database systems. I enjoy writing technical articles here on LowEndBox to help people get more out of their VPSes.</p></div></div><div class=\"feedback\"></div></div>"}