{"id": "19835", "post": "<div class=\"post-19835 post type-post status-publish format-standard hentry category-virtual-servers category-tutorials tag-debian-9 tag-lets-encrypt tag-nginx tag-node-js\" id=\"post-19835\"><h2 class=\"storytitle\"><a href=\"https://lowendbox.com/blog/how-to-set-up-a-node-js-application-for-production-on-a-debian-9-vps/\" rel=\"bookmark\">How To Set Up a Node.js Application for Production on a Debian 9 VPS</a></h2><div class=\"meta\"><img data-lazyloaded=\"1\" src=\"/media/icons/tag_green.png\" data-src=\"/media/icons/tag_green.png\" alt=\"Tags: \" class=\"litespeed-loaded\" data-was-processed=\"true\"> <a href=\"https://lowendbox.com/tag/debian-9/\" rel=\"tag\">Debian 9</a>, <a href=\"https://lowendbox.com/tag/lets-encrypt/\" rel=\"tag\">Let's Encrypt</a>, <a href=\"https://lowendbox.com/tag/nginx/\" rel=\"tag\">nginx</a>, <a href=\"https://lowendbox.com/tag/node-js/\" rel=\"tag\">node.js</a> <img data-lazyloaded=\"1\" src=\"https://lowendbox.com/media/icons/calendar.png\" data-src=\"https://lowendbox.com/media/icons/calendar.png\" alt=\"Date/Time: \" class=\"litespeed-loaded\" data-was-processed=\"true\"> August 19, 2019 @ 4:13 pm, by Dusko Savic</div><div class=\"storycontent tablelook\"><p><strong><img data-lazyloaded=\"1\" src=\"https://nodejs.org/static/images/logos/nodejs-new-pantone-black.png\" loading=\"lazy\" class=\"error\" data-src=\"https://nodejs.org/static/images/logos/nodejs-new-pantone-black.png\" alt=\"\" width=\"322\" height=\"197\" data-was-processed=\"true\"></strong></p><p>In this tutorial, we will create a simple Node.js application and put it into a production ready environment on Debian 9, \u201cStretch\u201d.</p><ul><li>To make the app accessible from your browser, we\u2019ll use <a href=\"https://www.nginx.com/\"><strong>Nginx</strong></a> as a reverse proxy. Nginx is a fast and versatile web server, and can also be used as a Load Balancer.</li><li>To make the access to the app secure, we\u2019ll use <a href=\"https://certbot.eff.org/\"><strong>Certbot</strong></a> to install Let\u2019s Encrypt certificates. Then, we\u2019ll be able to use HTTPS requests instead of unsecure HTTP requests.</li><li>Finally, we will make sure that the app is running continually, by turning it into a service with a special NPM package called <a href=\"https://pm2.io/doc/en/runtime/overview/\"><strong>PM2</strong></a>. PM2 will daemonize the <a href=\"https://nodejs.org/en/\"><strong>Node.js</strong></a> app and run it in the background, even after system crashes or reboots.</li></ul><p><span id=\"more-19835\"></span></p><p>&nbsp;</p><h2 id=\"whatwearegoingtocover\">What We Are Going To Cover</h2><ul><li>Install Nginx</li><li>First install <em>firewall-cmd</em>, then change its rules to enable Nginx</li><li>Install the latest version of Node.js</li><li>Add NPM packages for the app that we are making</li><li>Create the example app to show all characters in upper case</li><li>Configure Nginx as a reverse proxy</li><li>Install Let\u2019s Encrypt certificates to serve HTTPS requests</li><li>Access the app from the browser</li><li>Install PM2, which is a production process manager for Node.js applications with a built-in traffic Load Balancer</li><li>Use PM2 to restart the Node.js app on every restart or reboot of the system</li></ul><h2 id=\"prerequisites\">Prerequisites</h2><p>We use Debian 9:</p><ul><li>Starting with a clean VPS with</li><li>At least 512Mb of RAM and</li><li>15Gb of free disk space.</li><li>You will need root user access via SSH</li><li>A domain name pointed to your server\u2019s IP address (it can also be a subdomain) using A records at your DNS service provider</li><li>We use <em>nano</em> as our editor of choice, and you can install it with this command:</li></ul><pre><code>sudo apt install nano\n</code></pre><h2 id=\"step1installnginxfromarepository\">Step 1: Install Nginx From a Repository</h2><p>After you have logged in as a root user, install Nginx. Let\u2019s refresh the cache and start the installation:</p><pre><code>sudo apt update\nsudo apt upgrade -y\n</code></pre><p>Now install Nginx:</p><pre><code>sudo apt install nginx -y\n</code></pre><p>In the browser, go to address</p><pre><code>http://YOUR_DOMAIN/\n</code></pre><p>and verify that Nginx is running:</p><p><img data-lazyloaded=\"1\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0MjMiIGhlaWdodD0iMTg2IiB2aWV3Qm94PSIwIDAgNDIzIDE4NiI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iI2NmZDRkYiIvPjwvc3ZnPg==\" loading=\"lazy\" class=\"\" data-src=\"https://i.imgur.com/8WbeZhR.png\" alt=\"\" width=\"423\" height=\"186\"></p><h2 id=\"step2changefirewallrulestoenablenginx\">Step 2: Change Firewall Rules to Enable Nginx</h2><p>On Debian, the <em>iptables</em> firewall is installed by default, but we prefer <em>ufw</em>, the uncomplicated firewall. First install it:</p><pre><code>sudo apt install ufw\n</code></pre><p>List all the port profiles <em>ufw</em> already knows about:</p><pre><code>sudo ufw app list\n</code></pre><p>That is quite a list:</p><p><img data-lazyloaded=\"1\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1NDciIGhlaWdodD0iNjMyIiB2aWV3Qm94PSIwIDAgNTQ3IDYzMiI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iI2NmZDRkYiIvPjwvc3ZnPg==\" loading=\"lazy\" class=\"\" data-src=\"https://i.imgur.com/emw86Ql.png\" alt=\"\" width=\"547\" height=\"632\"></p><p>There are three options fo Nginx:</p><ul><li><strong>Nginx Full</strong>: Opens ports 80 and 443 for normal, unencrypted web traffic and TLS/SSL for encrypted traffic, respectively.</li><li><strong>Nginx HTTP</strong>: Only port 80 (normal, unencrypted web traffic)</li><li><strong>Nginx HTTPS</strong>: Only port 443 (TLS/SSL encrypted traffic)</li></ul><p>In theory, we should use the most restrictive type of access. However, there is a possibility that someone will use a HTTP request instead of a HTTPS, so we enable the full option:</p><pre><code>sudo ufw allow 'Nginx Full'\n</code></pre><p>Node.js apps require a port that is not used by the system, but is dedicated to that one app only. In our examples, we might use ports such as 3000, 8080 and so on, so we need to declare them explicitly, otherwise your app won\u2019t run.</p><p>Here is a list of ports and feel free to add any other that your host requires for the normal functioning of the system:</p><pre><code>sudo ufw allow ssh\nsudo ufw allow http\nsudo ufw allow https\nsudo ufw allow 20/tcp\nsudo ufw allow 21/tcp\nsudo ufw allow 3000\nsudo ufw allow 8080\nsudo ufw allow 'Nginx Full'\nsudo ufw enable\n</code></pre><h3 id=\"warning\">WARNING:</h3><p>Always execute <em>ufw</em> commands with <em>ssh</em>, <em>http</em>, <em>https</em> and so on, otherwise you will <strong>NOT</strong> be able to log back into your VPS server!</p><p>To see the changes, run:</p><pre><code>sudo ufw status\n</code></pre><p><img data-lazyloaded=\"1\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1MTEiIGhlaWdodD0iMzIwIiB2aWV3Qm94PSIwIDAgNTExIDMyMCI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iI2NmZDRkYiIvPjwvc3ZnPg==\" loading=\"lazy\" class=\"\" data-src=\"https://i.imgur.com/EcCENe1.png\" alt=\"\" width=\"511\" height=\"320\"></p><h2 id=\"step3installlatestnodejs\">Step 3: Install Latest Node.js</h2><p>Execute this series of commands to install node.js:</p><pre><code>cd /tmp\nsudo apt install curl -y\nsudo curl -sLO https://deb.nodesource.com/setup_12.x\nsudo bash setup_12.x\nsudo apt-get install gcc g++ make\napt install nodejs\nsudo nodejs -v\n</code></pre><p>The script sets up the proper Debian package repositories and also installs <em>gcc</em>, <em>g++</em> and <em>make</em>. They may be required by some Node.js packages during their installation to compile their parts written in C or C++. Finally, it inspects the Node.js version:</p><p><img data-lazyloaded=\"1\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1MzMiIGhlaWdodD0iNTgiIHZpZXdCb3g9IjAgMCA1MzMgNTgiPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9IiNjZmQ0ZGIiLz48L3N2Zz4=\" loading=\"lazy\" class=\"\" title=\"Node.js version\" data-src=\"https://i.imgur.com/4w4SaJK.png\" alt=\"Node.js version\" width=\"533\" height=\"58\"></p><p>It shows v12.3.1, which was the actual version of at the time of this writing. If it shows an error, double check the commands you entered against the ones shown above.</p><h2 id=\"step4addingnpmpackages\">Step 4: Adding NPM Packages</h2><p>We of course know what packages our Node.js app will need, so we install the required npm packages in advance. First we install prerequisite packages for NPM:</p><pre><code>sudo apt install build-essential libssl-dev\n</code></pre><p>With that, we will be able to install all other packages out there.</p><p>Since our app will turn any input into uppercase letters, we install a package for that:</p><pre><code>npm install upper-case\n</code></pre><p>Most Node.js apps will now use Express.js, so let\u2019s install that as well:</p><pre><code>npm install --save express\n</code></pre><p><img data-lazyloaded=\"1\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1NzIiIGhlaWdodD0iMTkzIiB2aWV3Qm94PSIwIDAgNTcyIDE5MyI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iI2NmZDRkYiIvPjwvc3ZnPg==\" loading=\"lazy\" class=\"\" data-src=\"https://i.imgur.com/jDq2F5u.png\" alt=\"\" width=\"572\" height=\"193\"></p><p>Execute this command as well:</p><pre><code>npm install -g nginx-generator\n</code></pre><p>It will globally install an NPM package to generate the reverse proxy config for Nginx. We will apply it after the app is running on port 8080.</p><h2 id=\"step5creatingtheapp\">Step 5: Creating The App</h2><p>Open a file named <em>uppercase-http.js</em> for editing:</p><pre><code>nano uppercase-http.js\n</code></pre><p>Add the following lines:</p><pre><code>var http = require('http');\nvar uc = require('upper-case');\nconsole.log('starting...');\nhttp.createServer(function (req, res) {\n  console.log('received request for url: ' + req.url);\n  res.writeHead(200, {'Content-Type': 'text/html'});\n  res.write(uc(req.url + '\\n'));\n  res.end();\n}).listen(8080);\n</code></pre><p>Save and close the file.</p><p>The HTTP server will listen to port 8080. You can specify any other port that you like, provided that it will be free when the app is running (and that you have previously opened access to it in <em>ufw</em>).</p><p>Run the app:</p><pre><code>node uppercase-http.js\n</code></pre><p>You will see the following message:</p><pre><code>starting...\n</code></pre><p><img data-lazyloaded=\"1\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2OTEiIGhlaWdodD0iNTAiIHZpZXdCb3g9IjAgMCA2OTEgNTAiPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9IiNjZmQ0ZGIiLz48L3N2Zz4=\" loading=\"lazy\" class=\"\" title=\"Node.js app starting\" data-src=\"https://i.imgur.com/cpRvvCA.png\" alt=\"Node.js app starting\" width=\"691\" height=\"50\"></p><p>To test it, fire up another terminal, connect to your VPS as <em>root</em> via SSH and curl <em>localhost:8080</em>:</p><pre><code>curl localhost:8080\ncurl localhost:8080/test\n</code></pre><p><img data-lazyloaded=\"1\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1ODkiIGhlaWdodD0iMjEzIiB2aWV3Qm94PSIwIDAgNTg5IDIxMyI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iI2NmZDRkYiIvPjwvc3ZnPg==\" loading=\"lazy\" class=\"\" data-src=\"https://i.imgur.com/3rQVm4X.png\" alt=\"\" width=\"589\" height=\"213\"></p><p>The program correctly converted the path to uppercase. If you look at the server app itself, it showed a status message for both requests:</p><pre><code>received request for url: /\nreceived request for url: /test\n</code></pre><p><img data-lazyloaded=\"1\" src=\"data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=\" title=\"App server messages\" data-src=\"https://i.imgur.com/jA24Bs1.png\" alt=\"App server messages\"></p><p>Now you have two windows, one with an active app and the other with the curl statement. From now on, enter commands only into the second window, otherwise you would have to stop the app and then the rest of the procedure would make no sense.</p><h2 id=\"step6configurenginxasreverseproxy\">Step 6: Configure Nginx as Reverse Proxy</h2><p>Let\u2019s now access this app from your web browser. Empty the <em>default</em> file in folder /etc/nginx/sites-available/ with the following two commands:</p><pre><code>rm /etc/nginx/sites-available/default\nsudo nano /etc/nginx/sites-available/default\n</code></pre><p>That file has to be empty in order for Nginx to read files in the /etc/nginx/sites-enabled/ folder. Enter one space into this otherwise empty file, save and close it.</p><p>Now, we will use the NPM package <em>nginx-generator</em> that we have installed earlier in this tutorial, to generate files that will tell Nginx to act as a reverse proxy. In the command line, execute the following:</p><pre><code>nginx-generator \\\n      --name site_nginx \\\n      --domain YOUR_DOMAIN \\\n      --type proxy \\\n      --var host=localhost \\\n      --var port=8080 \\\n      /etc/nginx/sites-enabled/site_nginx\n</code></pre><p>Replace YOUR_DOMAIN with your domain before running this command.</p><p>That command creates a file called <em>site_nginx</em> and puts it into the directory /etc/nginx/sites-enabled/. (We could have used any other file name instead of <em>site_nginx</em>.)</p><p>We can see it with this command:</p><pre><code>sudo nano /etc/nginx/sites-enabled/site_nginx\n</code></pre><p><img data-lazyloaded=\"1\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1NjYiIGhlaWdodD0iNDc4IiB2aWV3Qm94PSIwIDAgNTY2IDQ3OCI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iI2NmZDRkYiIvPjwvc3ZnPg==\" loading=\"lazy\" class=\"\" data-src=\"https://i.imgur.com/iUjfJk0.png\" alt=\"\" width=\"566\" height=\"478\"></p><p>Test the configuration:</p><pre><code>sudo nginx -t\n</code></pre><p>and if everything is OK, restart Nginx:</p><pre><code>systemctl restart nginx\n</code></pre><p>In your browser, go to address</p><pre><code>http://YOUR_DOMAIN/test\n</code></pre><p>and the result should be</p><pre><code>/TEST\n</code></pre><p><img data-lazyloaded=\"1\" src=\"data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=\" data-src=\"https://i.imgur.com/6RrAMxi.png\" alt=\"\"></p><h2 id=\"step7securingyoursitetoserveonlyhttps\">Step 7: Securing Your Site To Serve Only HTTPS</h2><p>Our goal is to run a production version of a Node.js app, which means we must serve it for HTTPS requests. If you have a domain name and DNS records properly set up to point to your VPS, you can use <a href=\"https://certbot.eff.org/\">certbot</a> to generate Let\u2019s Encrypt certificates. This means that you will always access the app as well as the rest of your domain, via HTTPS.</p><p>We will folow the <a href=\"https://certbot.eff.org/\">original documentation to install Let\u2019s Encrypt</a>. Choose Nginx for software and Debian 9 (stretch) for System \u2013 it should look like this:</p><p><img data-lazyloaded=\"1\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1OTAiIGhlaWdodD0iMzM2IiB2aWV3Qm94PSIwIDAgNTkwIDMzNiI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iI2NmZDRkYiIvPjwvc3ZnPg==\" loading=\"lazy\" class=\"\" title=\"Nginx Certbot Site\" data-src=\"https://i.imgur.com/klQquPR.png\" alt=\"Certbot Certbot Site\" width=\"590\" height=\"336\"></p><p>Certbot for Debian comes from the <a href=\"https://backports.debian.org/Instructions/\">Backports repo</a> so let us open the sources list</p><pre><code>nano /etc/apt/sources.list.d/nginx.list\n</code></pre><p>and enter the following line into that file:</p><pre><code>deb http://deb.debian.org/debian stretch-backports main\n</code></pre><p><img data-lazyloaded=\"1\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1OTkiIGhlaWdodD0iMjExIiB2aWV3Qm94PSIwIDAgNTk5IDIxMSI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iI2NmZDRkYiIvPjwvc3ZnPg==\" loading=\"lazy\" class=\"\" data-src=\"https://i.imgur.com/m86vYYX.png\" alt=\"\" width=\"599\" height=\"211\"></p><p>Run</p><pre><code>apt-get update\n</code></pre><p>and install backports:</p><pre><code>sudo apt-get install certbot python-certbot-nginx -t stretch-backports\n</code></pre><p>Finally, activate it with:</p><pre><code>sudo certbot --nginx\n</code></pre><p><img data-lazyloaded=\"1\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1NjUiIGhlaWdodD0iNTk1IiB2aWV3Qm94PSIwIDAgNTY1IDU5NSI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iI2NmZDRkYiIvPjwvc3ZnPg==\" loading=\"lazy\" class=\"\" data-src=\"https://i.imgur.com/w2GMSoE.png\" alt=\"\" width=\"565\" height=\"595\"></p><p>What certbot will ask you will depend on the previous events. If you are installing it for the fist time, it will ask for an emergency email address, then several less important questions and finally \u2013 do you want to redirect all HTTP traffic to HTTPS? Select 2 to confirm this redirection, and you\u2019re all set!</p><p>Test the configuration:</p><pre><code>sudo nginx -t\n</code></pre><p>and if everything is OK, restart Nginx again:</p><pre><code>systemctl restart nginx\n</code></pre><p>In your browser, go to address</p><pre><code>http://YOUR_DOMAIN/test\n</code></pre><p>and the result should be</p><pre><code>/TEST\n</code></pre><p>Note that this address started with HTTP, but that it ended up as HTTPS.</p><p><img data-lazyloaded=\"1\" src=\"data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=\" data-src=\"https://i.imgur.com/3e8FzfM.png\" alt=\"\"></p><h2 id=\"step8installpm2\">Step 8: Install PM2</h2><p>PM2 is a production process manager for Node.js applications. With PM2, we can monitor applications, their memory and CPU usage. It also provides easy commands to stop/start/restart all apps or individual apps.</p><p>Once the app is started through PM2, it will always be restarted after system crashes or restarts. In effect, it will \u201calways be there\u201d.</p><p>We use NPM to install PM2:</p><pre><code>sudo npm install pm2@latest -g\n</code></pre><p>Option <em>-g</em> tells it install pm2 globally, meaning that we shall be able to run it from all paths in the system.</p><p><img data-lazyloaded=\"1\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1NDkiIGhlaWdodD0iMjA2IiB2aWV3Qm94PSIwIDAgNTQ5IDIwNiI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iI2NmZDRkYiIvPjwvc3ZnPg==\" loading=\"lazy\" class=\"\" data-src=\"https://i.imgur.com/83aCjbb.png\" alt=\"\" width=\"549\" height=\"206\"></p><p>Let\u2019s now run our application under PM2:</p><pre><code>cd ~\npm2 start uppercase-http.js\n</code></pre><p>The output of PM2 can be spectacular when run for the first time, but we really need to concentrate on the rows about the app:</p><p><img data-lazyloaded=\"1\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1NzEiIGhlaWdodD0iNjYwIiB2aWV3Qm94PSIwIDAgNTcxIDY2MCI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iI2NmZDRkYiIvPjwvc3ZnPg==\" loading=\"lazy\" class=\"\" data-src=\"https://i.imgur.com/ouDkhGW.png\" alt=\"\" width=\"571\" height=\"660\"></p><p>PM2 will use app name, and then show the <em>id</em> number of the app, mode, status, CPU usage and memory. If two or more apps are running in the background, they will all be presented in this table.</p><p>We can list the processes like this:</p><pre><code>sudo pm2 list\n</code></pre><p>The following command</p><pre><code>sudo pm2 show 0\n</code></pre><p>will show details of the app with ID of 0:</p><p><img data-lazyloaded=\"1\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2MjYiIGhlaWdodD0iNTk1IiB2aWV3Qm94PSIwIDAgNjI2IDU5NSI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iI2NmZDRkYiIvPjwvc3ZnPg==\" loading=\"lazy\" class=\"\" data-src=\"https://i.imgur.com/SqtF5Vt.png\" alt=\"\" width=\"626\" height=\"595\"></p><p>It is also possible to monitor CPU usage in real time:</p><pre><code>sudo pm2 monit\n</code></pre><p>Other useful PM2 commands are <em>stop</em>, <em>restart</em>, <em>delete</em>.</p><h2 id=\"whatcanyoudonext\">What Can You Do Next</h2><p>We have shown how to set up a Node.js app for a production environment, as a <em>root</em> user, on a Debian 9 VPS. You can study more about <a href=\"https://www.nginx.com/\">Nginx</a> and add several sites on one VPS server, each with its own non-root user, listening on different ports and so on. As a Node.js programmer, you would also pay attention to debugging processes and other good practices \u2013 all of which is, however, out of scope of this article.</p><p>Dusko Savic is a technical writer and programmer.</p><p><a href=\"https://duskosavic.com/blog/\">duskosavic.com</a></p><p class=\"dpsp-share-text\"></p><div id=\"dpsp-content-bottom\" class=\"dpsp-content-wrapper dpsp-shape-rounded dpsp-column-auto dpsp-has-spacing dpsp-no-labels dpsp-show-on-mobile dpsp-button-style-1 dpsp-has-icon-background dpsp-has-button-background dpsp-show-total-share-count dpsp-show-total-share-count-after\"><ul class=\"dpsp-networks-btns-wrapper dpsp-networks-btns-content dpsp-has-button-icon-animation\"><li><a rel=\"nofollow\" href=\"https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Flowendbox.com%2Fblog%2Fhow-to-set-up-a-node-js-application-for-production-on-a-debian-9-vps%2F&amp;t=How%20To%20Set%20Up%20a%20Node.js%20Application%20for%20Production%20on%20a%20Debian%209%20VPS\" class=\"dpsp-network-btn dpsp-facebook dpsp-no-label dpsp-first\" title=\"Share on Facebook\"><span class=\"dpsp-network-icon\"></span><span class=\"dpsp-network-label-wrapper\"></span></a></li><li><a rel=\"nofollow\" href=\"https://twitter.com/intent/tweet?text=How%20To%20Set%20Up%20a%20Node.js%20Application%20for%20Production%20on%20a%20Debian%209%20VPS&amp;url=https%3A%2F%2Flowendbox.com%2Fblog%2Fhow-to-set-up-a-node-js-application-for-production-on-a-debian-9-vps%2F&amp;via=LowEndNetwork\" class=\"dpsp-network-btn dpsp-twitter dpsp-no-label\" title=\"Share on Twitter\"><span class=\"dpsp-network-icon\"></span><span class=\"dpsp-network-label-wrapper\"></span></a></li><li><a rel=\"nofollow\" href=\"https://www.linkedin.com/shareArticle?url=https%3A%2F%2Flowendbox.com%2Fblog%2Fhow-to-set-up-a-node-js-application-for-production-on-a-debian-9-vps%2F&amp;title=How%20To%20Set%20Up%20a%20Node.js%20Application%20for%20Production%20on%20a%20Debian%209%20VPS&amp;mini=true\" class=\"dpsp-network-btn dpsp-linkedin dpsp-no-label dpsp-last\" title=\"Share on LinkedIn\"><span class=\"dpsp-network-icon\"></span><span class=\"dpsp-network-label-wrapper\"></span></a></li></ul><div class=\"dpsp-total-share-wrapper\"><span class=\"dpsp-icon-total-share\"></span><span class=\"dpsp-total-share-count\">0</span><span>shares</span></div></div><div class=\"relpost-thumb-wrapper\"><div class=\"relpost-thumb-container\"><h3>Related posts:</h3><div style=\"clear: both\"></div><div style=\"clear: both\"></div><div class=\"relpost-block-container\"><a class=\"relpost-block-single\" href=\"https://lowendbox.com/blog/nginx-vs-openlitespeed-vs-apache/\"><div style=\"width: 150px; height: 215px;\"><div class=\"relpost-block-single-image\" alt=\"Nginx vs. OpenLiteSpeed vs. Apache\" style=\"background: transparent url(https://lowendbox.com/wp-content/uploads/2020/04/nginx-vs-openlitespeed-vs-apache-150x150.png) no-repeat scroll 0% 0%; width: 150px; height: 150px;\"></div><div class=\"relpost-block-single-text\" style=\"font-family: Arial;  font-size: 12px;  color: #333333;\">Nginx vs. OpenLiteSpeed vs. Apache</div></div></a><a class=\"relpost-block-single\" href=\"https://lowendbox.com/blog/how-to-configure-reverse-proxy-with-nginx/\"><div style=\"width: 150px; height: 215px;\"><div class=\"relpost-block-single-image\" alt=\"How to Configure Reverse Proxy with NGINX\" style=\"background: transparent url(https://lowendbox.com/wp-content/uploads/2020/03/leb-banner-150x150.png) no-repeat scroll 0% 0%; width: 150px; height: 150px;\"></div><div class=\"relpost-block-single-text\" style=\"font-family: Arial;  font-size: 12px;  color: #333333;\">How to Configure Reverse Proxy with NGINX</div></div></a><a class=\"relpost-block-single\" href=\"https://lowendbox.com/blog/from-zero-to-encrypted-with-nginx-and-lets-encrypt/\"><div style=\"width: 150px; height: 215px;\"><div class=\"relpost-block-single-image\" alt=\"Free SSL with NGINX and LetsEncrypt on Debian 10\" style=\"background: transparent url(https://lowendbox.com/wp-content/uploads/2020/04/nginx-and-lets-encrypt-150x150.png) no-repeat scroll 0% 0%; width: 150px; height: 150px;\"></div><div class=\"relpost-block-single-text\" style=\"font-family: Arial;  font-size: 12px;  color: #333333;\">Free SSL with NGINX and LetsEncrypt on Debian 10</div></div></a><a class=\"relpost-block-single\" href=\"https://lowendbox.com/blog/how-to-set-up-a-node-js-application-for-production-on-ubuntu-16-04-vps/\"><div style=\"width: 150px; height: 215px;\"><div class=\"relpost-block-single-image\" alt=\"How To Set Up a Node.js Application for Production on Ubuntu 16.04 VPS\" style=\"background: transparent url(https://lowendbox.com/wp-content/uploads/2020/04/leb-centered-small.jpg) no-repeat scroll 0% 0%; width: 150px; height: 150px;\"></div><div class=\"relpost-block-single-text\" style=\"font-family: Arial;  font-size: 12px;  color: #333333;\">How To Set Up a Node.js Application for Production on Ubuntu 16.04 VPS</div></div></a></div><div style=\"clear: both\"></div></div></div><div id=\"author-bio-box\" style=\"background: #f8f8f8; border-top: 2px solid #cccccc; border-bottom: 2px solid #cccccc; color: #333333\"><h3><a style=\"color: #555555;\" href=\"https://lowendbox.com/blog/author/dusko/\" title=\"All posts by Dusko Savic\" rel=\"author\">Dusko Savic</a></h3><div class=\"bio-gravatar\"><img data-lazyloaded=\"1\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3MCIgaGVpZ2h0PSI3MCIgdmlld0JveD0iMCAwIDcwIDcwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjY2ZkNGRiIi8+PC9zdmc+\" alt=\"\" data-src=\"https://secure.gravatar.com/avatar/42872b609daecf21764ca315bcf13c04?s=70&amp;d=retro&amp;r=pg\" data-srcset=\"https://secure.gravatar.com/avatar/42872b609daecf21764ca315bcf13c04?s=140&amp;d=retro&amp;r=pg 2x\" class=\"avatar avatar-70 photo\" height=\"70\" width=\"70\" loading=\"lazy\"></div><a target=\"_blank\" rel=\"nofollow noopener noreferrer\" href=\"https://duskosavic.com\" class=\"bio-icon bio-icon-website\"></a><a target=\"_blank\" rel=\"nofollow noopener noreferrer\" href=\"https://www.linkedin.com/in/dusko-savic-741487149/\" class=\"bio-icon bio-icon-linkedin\"></a><p class=\"bio-description\"></p></div></div><div class=\"feedback\"></div></div>"}