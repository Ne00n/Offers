{"id": "24393", "post": "<div class=\"post-24393 post type-post status-publish format-standard hentry category-tutorials tag-nginx tag-nginx-server-blocks tag-tutorial tag-ubuntu-20-04\" id=\"post-24393\"><h2 class=\"storytitle\"><a href=\"https://lowendbox.com/blog/how-to-set-up-nginx-server-blocks-on-ubuntu-20-04/\" rel=\"bookmark\">How to Set Up Nginx Server Blocks on Ubuntu 20.04</a></h2><div class=\"meta\"><img data-lazyloaded=\"1\" src=\"/media/icons/tag_green.png\" data-src=\"/media/icons/tag_green.png\" width=\"16\" height=\"16\" alt=\"Tags: \" class=\"litespeed-loaded\" data-was-processed=\"true\"> <a href=\"https://lowendbox.com/tag/nginx/\" rel=\"tag\">nginx</a>, <a href=\"https://lowendbox.com/tag/nginx-server-blocks/\" rel=\"tag\">nginx server blocks</a>, <a href=\"https://lowendbox.com/tag/tutorial/\" rel=\"tag\">tutorial</a>, <a href=\"https://lowendbox.com/tag/ubuntu-20-04/\" rel=\"tag\">ubuntu 20.04</a> <img data-lazyloaded=\"1\" src=\"https://lowendbox.com/media/icons/calendar.png\" data-src=\"https://lowendbox.com/media/icons/calendar.png\" width=\"16\" height=\"16\" alt=\"Date/Time: \" class=\"litespeed-loaded\" data-was-processed=\"true\"> June 18, 2021 @ 4:54 am, by Jon Biloh</div><div class=\"storycontent tablelook\"><p><a target=\"_blank\" rel=\"noopener noreferrer\"><img data-lazyloaded=\"1\" src=\"https://lowendbox.com/wp-content/uploads/2021/06/how-to-setup-nginx-server-blocks-ubuntu.jpg.webp\" loading=\"lazy\" class=\"screenshot litespeed-loaded\" title=\"How to Set Up Nginx Server Blocks on Ubuntu 20.04\" data-src=\"https://lowendbox.com/wp-content/uploads/2021/06/how-to-setup-nginx-server-blocks-ubuntu.jpg.webp\" alt=\"How to Set Up Nginx Server Blocks on Ubuntu 20.04\" width=\"416\" height=\"245\" data-was-processed=\"true\"></a></p><p><span style=\"font-weight: 400;\">This article was contributed by the folks at </span><a href=\"https://www.racknerd.com/\"><span style=\"font-weight: 400;\">RackNerd</span></a><span style=\"font-weight: 400;\"> \u2013 a provider of shared hosting, reseller hosting, VPS hosting, dedicated servers, DRaaS, colocation, and more. If you are looking for a VPS with full root access to set up Nginx on, be sure to review their latest LowEndBox special offers </span><a href=\"https://lowendbox.com/?s=racknerd&amp;searchsubmit=Find\"><span style=\"font-weight: 400;\">here</span></a><span style=\"font-weight: 400;\">.</span></p><p><span style=\"font-weight: 400;\">If you want to run more than one website on a single server, the Nginx server block is an incredible tool. It lets you define separate settings for different domain names, and thus enables you to host multiple domains on one server.</span></p><p><span style=\"font-weight: 400;\">With the Nginx server blocks, you can configure separate security policies such as different SSL certificates as well.</span></p><p><span style=\"font-weight: 400;\">In this article, we will guide you on how you can set up Nginx server blocks on your own Ubuntu 20.04 server.</span></p><p><span id=\"more-24393\"></span></p><p><b>Prerequisites:</b></p><p><span style=\"font-weight: 400;\">Before you continue with the setup, make sure that you fulfill the following requirements:</span></p><p><span style=\"font-weight: 400;\">1- You should already have Nginx installed on your server.</span></p><p><span style=\"font-weight: 400;\">2- You should have a domain name for your public server IP</span></p><p><span style=\"font-weight: 400;\">3- You should have root privileges to your server.</span></p><p><b>Step 1. Create the directory</b></p><p><span style=\"font-weight: 400;\">You can create the directory at any location of your choice. In your chosen location, create a directory with the following structure:</span></p><p><span style=\"font-weight: 400;\">/var/www/</span></p><p><span style=\"font-weight: 400;\">-&gt; first-domain.com</span></p><p><span style=\"font-weight: 400;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span style=\"font-weight: 400;\">-&gt; public_html</span></p><p><span style=\"font-weight: 400;\">-&gt; second-domain.com</span></p><p><span style=\"font-weight: 400;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span> <span style=\"font-weight: 400;\">-&gt;public_html</span></p><p><span style=\"font-weight: 400;\">The public_html folder you see in the structure above would contain the public HTML file for your website. You can create the directory with the following command:</span></p><blockquote><p><span style=\"font-weight: 400;\">sudo mkdir -p /var/www/first-domain.com/public_html</span></p></blockquote><p><span style=\"font-weight: 400;\">Inside the public_html folder, place the files for your existing website, or you can make a temporary \u201cindex.html\u201d file to check the setup.</span></p><p><span style=\"font-weight: 400;\">Place the following code in the temporary index.html file:</span></p><blockquote><p><span style=\"font-weight: 400;\">&lt;!DOCTYPE html&gt;</span></p><p><span style=\"font-weight: 400;\">&lt;html lang=\u201den\u201d&gt;</span></p><p><span style=\"font-weight: 400;\">&nbsp;&nbsp;&lt;head&gt;</span></p><p><span style=\"font-weight: 400;\">&lt;meta charset=\u201dutf-8\u2033&gt;</span></p><p><span style=\"font-weight: 400;\">&lt;title&gt;Nginx Server block&lt;/title&gt;</span></p><p><span style=\"font-weight: 400;\">&nbsp;&nbsp;&lt;/head&gt;</span></p><p><span style=\"font-weight: 400;\">&nbsp;&nbsp;&lt;body&gt;</span></p><p><span style=\"font-weight: 400;\">&lt;h1&gt;Success&lt;/h1&gt;</span></p><p><span style=\"font-weight: 400;\">&nbsp;&nbsp;&lt;/body&gt;</span></p><p><span style=\"font-weight: 400;\">&lt;/html&gt;</span></p></blockquote><p><b>Step 2- Change permission</b></p><p><span style=\"font-weight: 400;\">The directories and files created in step 1 were done with the sudo commands, and therefore are owned by root. We will change the permission and ownership of these files with the following command:</span></p><blockquote><p><span style=\"font-weight: 400;\">sudo chown -R www-data: /var/www/first-domain.com</span><b></b></p></blockquote><p><b>Step 3- Create the server blocks</b></p><p><span style=\"font-weight: 400;\">The Nginx server block config files on Ubuntu servers are placed in the /etc/nginx/sites-available folder. You can enable these configs by placing a link to them in the /etc/nginx/sites-enabled folder. This folder is read by Nginx at the boot time.</span></p><p><span style=\"font-weight: 400;\">In the /etc/nginx/sites-available folder, create a config file for your website and paste the following code in it:</span></p><blockquote><p><span style=\"font-weight: 400;\">server {</span></p><p><span style=\"font-weight: 400;\">listen 80;</span></p><p><span style=\"font-weight: 400;\">server_name example.com</span><a href=\"http://www.example.com\"> <span style=\"font-weight: 400;\">www.example.com</span></a><span style=\"font-weight: 400;\">;</span></p><p><span style=\"font-weight: 400;\">root /var/www/example.com/public_html;</span></p><p><span style=\"font-weight: 400;\">index index.html;</span></p><p><span style=\"font-weight: 400;\">access_log /var/log/nginx/example.com.access.log;</span></p><p><span style=\"font-weight: 400;\">error_log /var/log/nginx/example.com.error.log;</span></p><p><span style=\"font-weight: 400;\">}</span><span style=\"font-weight: 400;\"><br>\n</span></p></blockquote><p><b>Step 4- Enable the configuration</b></p><p><span style=\"font-weight: 400;\">You can enable the server block created above with the following command:</span></p><blockquote><p><span style=\"font-weight: 400;\">sudo ln -s /etc/nginx/sites-available/example.com /etc/nginx/sites-enabled/</span></p></blockquote><p><span style=\"font-weight: 400;\">This command creates a symbolic link to the config file. This would be read by Nginx during startup.</span></p><p><b>Step 5- Test the setup</b></p><p><span style=\"font-weight: 400;\">Now, you are done with the configuration. You can check if it\u2019s working with the following command:</span></p><blockquote><p><span style=\"font-weight: 400;\">sudo nginx -t</span></p></blockquote><p><span style=\"font-weight: 400;\">If the setup is successful, then the output would not contain any errors.</span></p><p><span style=\"font-weight: 400;\">Now, you can restart the Nginx service with this command to get your server block started:</span></p><blockquote><p><span style=\"font-weight: 400;\">sudo systemctl restart nginx</span></p></blockquote><p><span style=\"font-weight: 400;\">Congratulations! The Nginx server block should now be working as expected.</span></p><p><b>Have you set up Nginx Server Blocks on your Ubuntu 20.04 VPS? Leave your comments and feedback in the comments section below!</b></p><div class=\"relpost-thumb-wrapper\"><div class=\"relpost-thumb-container\"><h3>Related posts:</h3><div style=\"clear: both\"></div><div style=\"clear: both\"></div><div class=\"relpost-block-container\"><a class=\"relpost-block-single\" href=\"https://lowendbox.com/blog/guide-to-free-game-server-control-panels/\"><div class=\"relpost-custom-block-single\" style=\"width: 150px; height: 215px;\"><div class=\"relpost-block-single-image\" alt=\"lowendtutorial\" style=\"background: transparent url(https://lowendbox.com/wp-content/uploads/2013/05/lowendtutorial-150x150.png) no-repeat scroll 0% 0%; width: 150px; height: 150px;\"></div><div class=\"relpost-block-single-text\" style=\"font-family: Arial;  font-size: 12px;  color: #333333;\">Guide to Free Game Server Control Panels</div></div></a><a class=\"relpost-block-single\" href=\"https://lowendbox.com/blog/how-to-use-the-chattr-command-in-linux/\"><div class=\"relpost-custom-block-single\" style=\"width: 150px; height: 215px;\"><div class=\"relpost-block-single-image\" alt=\"How to Use the Chattr Command in Linux\" style=\"background: transparent url(https://lowendbox.com/wp-content/uploads/2021/05/rntut_chattr-150x150.jpg) no-repeat scroll 0% 0%; width: 150px; height: 150px;\"></div><div class=\"relpost-block-single-text\" style=\"font-family: Arial;  font-size: 12px;  color: #333333;\">How to Use the Chattr Command in Linux</div></div></a><a class=\"relpost-block-single\" href=\"https://lowendbox.com/blog/how-to-setup-replicated-highly-available-sqlite-with-rqlite/\"><div class=\"relpost-custom-block-single\" style=\"width: 150px; height: 215px;\"><div class=\"relpost-block-single-image\" alt=\"Replicated Highly Availably SQLite with rqlite\" style=\"background: transparent url(https://lowendbox.com/wp-content/uploads/2020/05/Replicated-highly-available-SQLITE-with-RQLITE-150x150.jpg) no-repeat scroll 0% 0%; width: 150px; height: 150px;\"></div><div class=\"relpost-block-single-text\" style=\"font-family: Arial;  font-size: 12px;  color: #333333;\">How to Setup Replicated Highly Available SQLite with rqlite</div></div></a><a class=\"relpost-block-single\" href=\"https://lowendbox.com/blog/lowendboxtv-building-a-highly-available-wordpress-site-part-6-does-it-work/\"><div class=\"relpost-custom-block-single\" style=\"width: 150px; height: 215px;\"><div class=\"relpost-block-single-image\" alt=\"LowEndBoxTV: Building a Highly Available WordPress Site, Part 6: Does It Work?!?\" style=\"background: transparent url(https://lowendbox.com/wp-content/uploads/2021/05/WP-HA-6-leb-150x150.png) no-repeat scroll 0% 0%; width: 150px; height: 150px;\"></div><div class=\"relpost-block-single-text\" style=\"font-family: Arial;  font-size: 12px;  color: #333333;\">LowEndBoxTV: Building a Highly Available WordPress Site, Part 6: Does It Work?!?</div></div></a></div><div style=\"clear: both\"></div></div></div><div id=\"author-bio-box\" style=\"background: #f8f8f8; border-top: 2px solid #cccccc; border-bottom: 2px solid #cccccc; color: #333333\"><h3><a style=\"color: #555555;\" href=\"https://lowendbox.com/blog/author/jbiloh/\" title=\"All posts by Jon Biloh\" rel=\"author\">Jon Biloh</a></h3><div class=\"bio-gravatar\"><img data-lazyloaded=\"1\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3MCIgaGVpZ2h0PSI3MCIgdmlld0JveD0iMCAwIDcwIDcwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjY2ZkNGRiIi8+PC9zdmc+\" alt=\"\" data-src=\"https://secure.gravatar.com/avatar/f766d6dc4b5f406b9f3cb0339d48de95?s=70&amp;d=retro&amp;r=pg\" data-srcset=\"https://secure.gravatar.com/avatar/f766d6dc4b5f406b9f3cb0339d48de95?s=140&amp;d=retro&amp;r=pg 2x\" class=\"avatar avatar-70 photo\" height=\"70\" width=\"70\" loading=\"lazy\"></div><a target=\"_blank\" rel=\"nofollow noopener noreferrer\" href=\"https://www.lowendtalk.com/profile/jbiloh\" class=\"bio-icon bio-icon-website\"></a><a target=\"_blank\" rel=\"nofollow noopener noreferrer\" href=\"http://Jbiloh\" class=\"bio-icon bio-icon-twitter\"></a><a target=\"_blank\" rel=\"nofollow noopener noreferrer\" href=\"https://www.linkedin.com/in/jon-biloh-4b32598/\" class=\"bio-icon bio-icon-linkedin\"></a><p class=\"bio-description\">I'm Jon Biloh and I own LowEndBox and LowEndTalk. I've spent my nearly 20 year career in IT building companies and now I'm excited to focus on building and enhancing the community at LowEndBox and LowEndTalk.</p></div></div><div class=\"feedback\"></div></div>"}