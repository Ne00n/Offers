{"id": "7218", "post": "<div class=\"post-7218 post type-post status-publish format-standard hentry category-tutorials tag-tutorial tag-tutorials-2\" id=\"post-7218\"><h2 class=\"storytitle\"><a href=\"https://lowendbox.com/blog/server-monitoring-with-icinga-2-part-1-the-server-ubuntu-host/\" rel=\"bookmark\">Server monitoring with Icinga 2 \u2013 Part 1: the server (Ubuntu host)</a></h2><div class=\"meta\"><img data-lazyloaded=\"1\" src=\"data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=\" data-src=\"/media/icons/tag_green.png\" alt=\"Tags: \"> <a href=\"https://lowendbox.com/tag/tutorial/\" rel=\"tag\">tutorial</a>, <a href=\"https://lowendbox.com/tag/tutorials-2/\" rel=\"tag\">tutorials</a> <img data-lazyloaded=\"1\" src=\"data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=\" data-src=\"https://lowendbox.com/media/icons/calendar.png\" alt=\"Date/Time: \"> June 29, 2015 @ 1:00 am, by Maarten Kossen</div><div class=\"storycontent tablelook\"><p><img data-lazyloaded=\"1\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNzEiIGhlaWdodD0iNzAiIHZpZXdCb3g9IjAgMCAyNzEgNzAiPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9IiNjZmQ0ZGIiLz48L3N2Zz4=\" loading=\"lazy\" class=\"alignnone size-full wp-image-3957 aligncenter\" data-src=\"https://lowendbox.com/wp-content/uploads/2013/05/lowendtutorial.png.webp\" alt=\"lowendtutorial\" width=\"271\" height=\"70\"></p><p>Nagios has, for a long time, been the defacto standard tool for server monitoring. These day that\u2019s surprising, as Nagios\u2019 visible development has been quite slow over the past years and new solutions have popped up meanwhile. Not just self-hosted solutions, but cloud-based solutions with fancy metrics voodoo as well.</p><p>Still, though, switching monitoring solutions can be a pain and cloud-based solutions arguably cost more than a self-hosted solution. So, say you want to switch from Nagios <em>or</em> you want to start with server monitoring, there is a solution. Icinga2!</p><p>Icinga started as a Nagios fork and did quite well, mostly considering Icinga Web which was better than Nagios\u2019 web interface. Icinga 2 is a complete rewrite and even adds a fancy new (optional) web interface which is responsive and customizable. On top of that, the communication between the monitoring server and the nodes it monitors has become more secure as NRPE has been ditched (it\u2019s still available, just not prefered).</p><p>I\u2019m going to show you how to set up an Icinga 2 server with Icinga Web 2. In two weeks, I\u2019ll let you know how to add nodes to it as well. Let\u2019s get to business!</p><p><span id=\"more-7218\"></span></p><p>As usual, I\u2019m assuming an Ubuntu (or other Debian-based) host that\u2019s up-to-date. These instructions work for Ubuntu versions 14.04 and up. You don\u2019t need a lot of resources for this, though depending on how many nodes you\u2019re going to monitor. A server with 256MB RAM should be sufficient for up to 100 nodes considering you\u2019ll also install Icinga Web 2 on it.</p><h2>Icinga 2</h2><p>Anyway, let\u2019s get started. To install Icinga 2, you first need to add the repository. On Ubuntu, this is done like this:</p><blockquote><p>add-apt-repository ppa:formorer/icinga</p></blockquote><p>Press ENTER when it asks you to.</p><p><em>Note:</em> If this command gives you an error, run \u2018sudo apt-get install software-properties-common\u2019 to get the \u2018add-apt-repository\u2019 command!</p><p>Once the repository has been added, update apt:</p><blockquote><p>sudo apt-get update</p></blockquote><p>And install Icinga 2:</p><blockquote><p>sudo apt-get install icinga2</p></blockquote><p>That\u2019s it! Make sure Icinga 2 is running:</p><blockquote><p>sudo service icinga2 status</p></blockquote><p>And start it if it isn\u2019t running:</p><blockquote><p>sudo service icinga2 start</p></blockquote><p>With that settled, let\u2019s go to the installation of Icinga Web 2.</p><h2>Icinga Web 2</h2><p>I\u2019m going to use PostgreSQL with Icinga Web 2 as it seems to be easier on resources than recent versions of MySQL. The database is used for the web interface, among other things, so it\u2019s going to be a key part of the system.</p><p>Install PostgreSQL by running the following command:</p><blockquote><p>sudo apt-get install postgresql</p></blockquote><p>Next, install the package Icinga 2 requires to work with PostgreSQL:</p><blockquote><p>sudo apt-get install icinga2-ido-pgsql</p></blockquote><p>You should be asked a question now: whether you\u2019d like to enable PostgreSQL for Icinga 2. Select \u2018Yes\u2019 here and hit ENTER.</p><p>Next you\u2019ll be asked if you want the installer to configure the database for you. Again, select \u2018Yes\u2019 and hit ENTER.</p><p>Finally, you\u2019ll be asked for a database password. Leave this empty and hit ENTER; a password will be generated for you.</p><p>With the database being set up, you can enable it for Icinga 2:</p><blockquote><p>sudo icinga2 feature enable ido-pgsql</p></blockquote><p>You\u2019ll also want to enable the external command module, since you\u2019ll need it later on:</p><blockquote><p>sudo icinga2 feature enable command</p></blockquote><p>In order to activate these changes, you need to restart Icinga 2:</p><blockquote><p>sudo service icinga2 restart</p></blockquote><p>You should get no errors for the restart. Icinga 2 is now taking to PostgreSQL and we can continue with our installation of Icinga Web 2.</p><p>It\u2019s possible to manually install Icinga Web 2 or do it automatically. I\u2019m taking the easy route and will should you how to install the package and go on from there. With this automatic installation comes Apache 2 as a web server. If you don\u2019t like that, please see here on how to set up Icinga Web 2 manually: https://github.com/Icinga/icingaweb2/blob/master/doc/installation.md</p><p>First, add the repository key for the repository that contains Icinga Web 2 (it\u2019s not in the PPA mentioned before):</p><blockquote><p>sudo wget -O \u2013 http://packages.icinga.org/icinga.key | apt-key add \u2013</p></blockquote><p>This will ensure packages\u2019 signature are considered valid. Next, add the repository:</p><blockquote><p>sudo add-apt-repository \u2018deb http://packages.icinga.org/ubuntu icinga-trusty main\u2019</p></blockquote><p>I\u2019m using Ubuntu 14.04 (Trusty). In case you\u2019re using a newer version, replace \u2018trusty\u2019 with the name of your distribution.</p><p>Update APT caches to make sure the package can be found:</p><blockquote><p>sudo apt-get update</p></blockquote><p>And install Icinga Web 2:</p><blockquote><p>sudo apt-get install icingaweb2</p></blockquote><p>When the installer is done, you should be able to go to your server\u2019s hostname or IP address and add \u2018/icingaweb2/setup\u2019 to it and you\u2019ll be met with the setup script for Icinga Web 2:</p><p><a href=\"https://lowendbox.com/wp-content/uploads/2015/06/one.png\"><img data-lazyloaded=\"1\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMDAiIGhlaWdodD0iMTcyIiB2aWV3Qm94PSIwIDAgMzAwIDE3MiI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iI2NmZDRkYiIvPjwvc3ZnPg==\" loading=\"lazy\" class=\"alignnone size-medium wp-image-7221\" data-src=\"https://lowendbox.com/wp-content/uploads/2015/06/one-300x172.png.webp\" alt=\"one\" width=\"300\" height=\"172\" data-srcset=\"https://lowendbox.com/wp-content/uploads/2015/06/one-300x172.png.webp 300w, https://lowendbox.com/wp-content/uploads/2015/06/one-1024x588.png.webp 1024w, https://lowendbox.com/wp-content/uploads/2015/06/one.png 1186w\" data-sizes=\"(max-width: 300px) 100vw, 300px\"></a></p><p>This asks for a setup token, so make sure you run the server this installation of Icinga Web 2 runs on. Go back to your terminal and run:</p><blockquote><p>sudo icingacli setup token create</p></blockquote><p>This should give you a token. Copy that and put that in the Setup Token field in your browser.</p><p>Next, you\u2019re asked which modules to enable:</p><p><a href=\"https://lowendbox.com/wp-content/uploads/2015/06/two.png\"><img data-lazyloaded=\"1\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMDAiIGhlaWdodD0iMTcyIiB2aWV3Qm94PSIwIDAgMzAwIDE3MiI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iI2NmZDRkYiIvPjwvc3ZnPg==\" loading=\"lazy\" class=\"alignnone size-medium wp-image-7224\" data-src=\"https://lowendbox.com/wp-content/uploads/2015/06/two-300x172.png.webp\" alt=\"two\" width=\"300\" height=\"172\" data-srcset=\"https://lowendbox.com/wp-content/uploads/2015/06/two-300x172.png.webp 300w, https://lowendbox.com/wp-content/uploads/2015/06/two-1024x588.png.webp 1024w, https://lowendbox.com/wp-content/uploads/2015/06/two.png 1186w\" data-sizes=\"(max-width: 300px) 100vw, 300px\"></a></p><p>Just click \u2018Next\u2019.</p><p>This is where the problems start. For some amazing reason, the installer couldn\u2019t fix some simple things for you, so you\u2019ll have to do that yourself.</p><p><a href=\"https://lowendbox.com/wp-content/uploads/2015/06/three.png\"><img data-lazyloaded=\"1\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMDAiIGhlaWdodD0iMTcyIiB2aWV3Qm94PSIwIDAgMzAwIDE3MiI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iI2NmZDRkYiIvPjwvc3ZnPg==\" loading=\"lazy\" class=\"alignnone size-medium wp-image-7227\" data-src=\"https://lowendbox.com/wp-content/uploads/2015/06/three-300x172.png.webp\" alt=\"three\" width=\"300\" height=\"172\" data-srcset=\"https://lowendbox.com/wp-content/uploads/2015/06/three-300x172.png.webp 300w, https://lowendbox.com/wp-content/uploads/2015/06/three-1024x588.png.webp 1024w, https://lowendbox.com/wp-content/uploads/2015/06/three.png 1186w\" data-sizes=\"(max-width: 300px) 100vw, 300px\"></a></p><p>I\u2019ve limited the size of the screenshot for convenience. Rest assured, the error and warnings will be there :-)</p><p>First of all, open up /etc/php5/apache2/php.ini and look for the following line:</p><blockquote><p>;date.timezone =</p></blockquote><p>Change that into this:</p><blockquote><p>date.timezone = \u201cAmerica/New_York\u201d</p></blockquote><p>Feel free to replace \u2018America/New_York\u2019 with your time zone. Please use this list to see which time zones are allowed: http://php.net/manual/en/timezones.php</p><p>This should have fixed the \u2018Red\u2019 error message. To apply these changes, you need to restart Apache 2, but we\u2019ll do that after the next step.</p><p>On to the warnings then. To fix those, install some packages:</p><blockquote><p>sudo apt-get install php5-json php5-gd php5-imagick php5-pgsql php5-intl</p></blockquote><p>Now restart Apache 2:</p><blockquote><p>sudo service apache2 restart</p></blockquote><p>And hit the \u2018Refresh\u2019 button at the bottom of the page in your browser. This should give you a nice green list and allow you to click \u2018Next\u2019. Do so.</p><p>It asks you to select an authentication type:</p><p><a href=\"https://lowendbox.com/wp-content/uploads/2015/06/four.png\"><img data-lazyloaded=\"1\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMDAiIGhlaWdodD0iMTcyIiB2aWV3Qm94PSIwIDAgMzAwIDE3MiI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iI2NmZDRkYiIvPjwvc3ZnPg==\" loading=\"lazy\" class=\"alignnone size-medium wp-image-7230\" data-src=\"https://lowendbox.com/wp-content/uploads/2015/06/four-300x172.png.webp\" alt=\"four\" width=\"300\" height=\"172\" data-srcset=\"https://lowendbox.com/wp-content/uploads/2015/06/four-300x172.png.webp 300w, https://lowendbox.com/wp-content/uploads/2015/06/four-1024x588.png.webp 1024w, https://lowendbox.com/wp-content/uploads/2015/06/four.png 1186w\" data-sizes=\"(max-width: 300px) 100vw, 300px\"></a></p><p>Select \u2018Database\u2019 and hit \u2018Next\u2019.</p><p>It asks you where you want to store user preferences:</p><p><a href=\"https://lowendbox.com/wp-content/uploads/2015/06/five.png\"><img data-lazyloaded=\"1\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMDAiIGhlaWdodD0iMTcyIiB2aWV3Qm94PSIwIDAgMzAwIDE3MiI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iI2NmZDRkYiIvPjwvc3ZnPg==\" loading=\"lazy\" class=\"alignnone size-medium wp-image-7233\" data-src=\"https://lowendbox.com/wp-content/uploads/2015/06/five-300x172.png.webp\" alt=\"five\" width=\"300\" height=\"172\" data-srcset=\"https://lowendbox.com/wp-content/uploads/2015/06/five-300x172.png.webp 300w, https://lowendbox.com/wp-content/uploads/2015/06/five-1024x588.png.webp 1024w, https://lowendbox.com/wp-content/uploads/2015/06/five.png 1186w\" data-sizes=\"(max-width: 300px) 100vw, 300px\"></a></p><p>Again, select \u2018Database\u2019 and hit \u2018Next\u2019.</p><p>This will give you the database configuration screen:</p><p><a href=\"https://lowendbox.com/wp-content/uploads/2015/06/six.png\"><img data-lazyloaded=\"1\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMDAiIGhlaWdodD0iMTcyIiB2aWV3Qm94PSIwIDAgMzAwIDE3MiI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iI2NmZDRkYiIvPjwvc3ZnPg==\" loading=\"lazy\" class=\"alignnone size-medium wp-image-7236\" data-src=\"https://lowendbox.com/wp-content/uploads/2015/06/six-300x172.png.webp\" alt=\"six\" width=\"300\" height=\"172\" data-srcset=\"https://lowendbox.com/wp-content/uploads/2015/06/six-300x172.png.webp 300w, https://lowendbox.com/wp-content/uploads/2015/06/six-1024x588.png.webp 1024w, https://lowendbox.com/wp-content/uploads/2015/06/six.png 1186w\" data-sizes=\"(max-width: 300px) 100vw, 300px\"></a></p><p>Select \u2018PostgreSQL\u2019 as the \u2018Database Type\u2019, change the \u2018Host\u2019 to \u2018127.0.0.1\u2019 and change the \u2018Port\u2019 to \u20185432\u2019.</p><p>Fill out a database name, a username, and a strong password and hit \u2018Next\u2019. Remember these details; you may need them later.</p><p><a href=\"https://lowendbox.com/wp-content/uploads/2015/06/seven.png\"><img data-lazyloaded=\"1\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMDAiIGhlaWdodD0iMTcyIiB2aWV3Qm94PSIwIDAgMzAwIDE3MiI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iI2NmZDRkYiIvPjwvc3ZnPg==\" loading=\"lazy\" class=\"alignnone size-medium wp-image-7239\" data-src=\"https://lowendbox.com/wp-content/uploads/2015/06/seven-300x172.png.webp\" alt=\"seven\" width=\"300\" height=\"172\" data-srcset=\"https://lowendbox.com/wp-content/uploads/2015/06/seven-300x172.png.webp 300w, https://lowendbox.com/wp-content/uploads/2015/06/seven-1024x588.png.webp 1024w, https://lowendbox.com/wp-content/uploads/2015/06/seven.png 1186w\" data-sizes=\"(max-width: 300px) 100vw, 300px\"></a></p><p>At the next screen, just hit \u2018Next\u2019: the backend name it has picked should be good.</p><p>The creation of the initial administration account is up next:</p><p><a href=\"https://lowendbox.com/wp-content/uploads/2015/06/eight.png\"><img data-lazyloaded=\"1\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMDAiIGhlaWdodD0iMTcyIiB2aWV3Qm94PSIwIDAgMzAwIDE3MiI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iI2NmZDRkYiIvPjwvc3ZnPg==\" loading=\"lazy\" class=\"alignnone size-medium wp-image-7242\" data-src=\"https://lowendbox.com/wp-content/uploads/2015/06/eight-300x172.png.webp\" alt=\"eight\" width=\"300\" height=\"172\" data-srcset=\"https://lowendbox.com/wp-content/uploads/2015/06/eight-300x172.png.webp 300w, https://lowendbox.com/wp-content/uploads/2015/06/eight-1024x588.png.webp 1024w, https://lowendbox.com/wp-content/uploads/2015/06/eight.png 1186w\" data-sizes=\"(max-width: 300px) 100vw, 300px\"></a></p><p>Fill out these details as you with and hit \u2018Next\u2019.</p><p><a href=\"https://lowendbox.com/wp-content/uploads/2015/06/nine.png\"><img data-lazyloaded=\"1\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMDAiIGhlaWdodD0iMTcyIiB2aWV3Qm94PSIwIDAgMzAwIDE3MiI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iI2NmZDRkYiIvPjwvc3ZnPg==\" loading=\"lazy\" class=\"alignnone size-medium wp-image-7245\" data-src=\"https://lowendbox.com/wp-content/uploads/2015/06/nine-300x172.png.webp\" alt=\"nine\" width=\"300\" height=\"172\" data-srcset=\"https://lowendbox.com/wp-content/uploads/2015/06/nine-300x172.png.webp 300w, https://lowendbox.com/wp-content/uploads/2015/06/nine-1024x588.png.webp 1024w, https://lowendbox.com/wp-content/uploads/2015/06/nine.png 1186w\" data-sizes=\"(max-width: 300px) 100vw, 300px\"></a></p><p>You are presented with some configuration options. You shouldn\u2019t have to change these, so click \u2018Next\u2019.</p><p>You\u2019ll now get a message that the database details you filled out before are not working. This is logical, because we didn\u2019t create the role and the database yet. From the command line, run these commands:</p><blockquote><p>cd /tmp<br>\nsudo -u postgres psql -c \u201cCREATE ROLE &lt; username &gt; WITH LOGIN PASSWORD \u2018&lt; password &gt;'\u201d;<br>\nsudo -u postgres createdb -O &lt; username &gt; &lt; database name &gt;</p></blockquote><p>This moves you to the /tmp directory so PostgreSQL has rights to write a temporary file. Then it created the role (or user). Please replace the tokens with their appropriate values. Next, it created a database that is owned by the role you just created.</p><p>Now, move back to the browser and hit \u2018Next\u2019. You\u2019ll now get an overview of what\u2019s about to be written to the database:</p><p><a href=\"https://lowendbox.com/wp-content/uploads/2015/06/eleven.png\"><img data-lazyloaded=\"1\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMDAiIGhlaWdodD0iMTcyIiB2aWV3Qm94PSIwIDAgMzAwIDE3MiI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iI2NmZDRkYiIvPjwvc3ZnPg==\" loading=\"lazy\" class=\"alignnone size-medium wp-image-7248\" data-src=\"https://lowendbox.com/wp-content/uploads/2015/06/eleven-300x172.png.webp\" alt=\"eleven\" width=\"300\" height=\"172\" data-srcset=\"https://lowendbox.com/wp-content/uploads/2015/06/eleven-300x172.png.webp 300w, https://lowendbox.com/wp-content/uploads/2015/06/eleven-1024x588.png.webp 1024w, https://lowendbox.com/wp-content/uploads/2015/06/eleven.png 1186w\" data-sizes=\"(max-width: 300px) 100vw, 300px\"></a></p><p>Hit \u2018Next\u2019 to apply these changes.</p><p>But wait, there\u2019s more\u2026! Another module to configure:</p><p><a href=\"https://lowendbox.com/wp-content/uploads/2015/06/twelve.png\"><img data-lazyloaded=\"1\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMDAiIGhlaWdodD0iMTcyIiB2aWV3Qm94PSIwIDAgMzAwIDE3MiI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iI2NmZDRkYiIvPjwvc3ZnPg==\" loading=\"lazy\" class=\"alignnone size-medium wp-image-7251\" data-src=\"https://lowendbox.com/wp-content/uploads/2015/06/twelve-300x172.png.webp\" alt=\"twelve\" width=\"300\" height=\"172\" data-srcset=\"https://lowendbox.com/wp-content/uploads/2015/06/twelve-300x172.png.webp 300w, https://lowendbox.com/wp-content/uploads/2015/06/twelve-1024x588.png.webp 1024w, https://lowendbox.com/wp-content/uploads/2015/06/twelve.png 1186w\" data-sizes=\"(max-width: 300px) 100vw, 300px\"></a></p><p>What we just configured was Icinga Web 2; now it\u2019s time to configure the connection with Icinga 2. Hit \u2018Next\u2019.</p><p><a href=\"https://lowendbox.com/wp-content/uploads/2015/06/thirteen.png\"><img data-lazyloaded=\"1\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMDAiIGhlaWdodD0iMTcyIiB2aWV3Qm94PSIwIDAgMzAwIDE3MiI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iI2NmZDRkYiIvPjwvc3ZnPg==\" loading=\"lazy\" class=\"alignnone size-medium wp-image-7254\" data-src=\"https://lowendbox.com/wp-content/uploads/2015/06/thirteen-300x172.png.webp\" alt=\"thirteen\" width=\"300\" height=\"172\" data-srcset=\"https://lowendbox.com/wp-content/uploads/2015/06/thirteen-300x172.png.webp 300w, https://lowendbox.com/wp-content/uploads/2015/06/thirteen-1024x588.png.webp 1024w, https://lowendbox.com/wp-content/uploads/2015/06/thirteen.png 1186w\" data-sizes=\"(max-width: 300px) 100vw, 300px\"></a></p><p>Accept the default values at this screen as they shouldn\u2019t require any changes, then hit \u2018Next\u2019.</p><p>This next screen is where it gets interesting:</p><p><a href=\"https://lowendbox.com/wp-content/uploads/2015/06/fourteen.png\"><img data-lazyloaded=\"1\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMDAiIGhlaWdodD0iMTcyIiB2aWV3Qm94PSIwIDAgMzAwIDE3MiI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iI2NmZDRkYiIvPjwvc3ZnPg==\" loading=\"lazy\" class=\"alignnone size-medium wp-image-7257\" data-src=\"https://lowendbox.com/wp-content/uploads/2015/06/fourteen-300x172.png.webp\" alt=\"fourteen\" width=\"300\" height=\"172\" data-srcset=\"https://lowendbox.com/wp-content/uploads/2015/06/fourteen-300x172.png.webp 300w, https://lowendbox.com/wp-content/uploads/2015/06/fourteen-1024x588.png.webp 1024w, https://lowendbox.com/wp-content/uploads/2015/06/fourteen.png 1186w\" data-sizes=\"(max-width: 300px) 100vw, 300px\"></a></p><p>You\u2019ll now need some details that you need to look up, but first set the \u2018Database Type\u2019 to PostgreSQL, the \u2018Host\u2019 to \u2018127.0.0.1\u2019, and the \u2018Port\u2019 to \u20185432\u2019.</p><p>Next, in your terminal, open the following file: /etc/icinga2/features-enabled/ido-pgsql.conf</p><p>In here you\u2019ll find the database name, username, and password you\u2019ll need. Please copy-and-paste these to your browser and hit \u2018Next\u2019.</p><p><a href=\"https://lowendbox.com/wp-content/uploads/2015/06/fifteen.png\"><img data-lazyloaded=\"1\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMDAiIGhlaWdodD0iMTcyIiB2aWV3Qm94PSIwIDAgMzAwIDE3MiI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iI2NmZDRkYiIvPjwvc3ZnPg==\" loading=\"lazy\" class=\"alignnone size-medium wp-image-7260\" data-src=\"https://lowendbox.com/wp-content/uploads/2015/06/fifteen-300x172.png.webp\" alt=\"fifteen\" width=\"300\" height=\"172\" data-srcset=\"https://lowendbox.com/wp-content/uploads/2015/06/fifteen-300x172.png.webp 300w, https://lowendbox.com/wp-content/uploads/2015/06/fifteen-1024x588.png.webp 1024w, https://lowendbox.com/wp-content/uploads/2015/06/fifteen.png 1186w\" data-sizes=\"(max-width: 300px) 100vw, 300px\"></a></p><p>Accept the default values and hit \u2018Next\u2019.</p><p><a href=\"https://lowendbox.com/wp-content/uploads/2015/06/sixteen.png\"><img data-lazyloaded=\"1\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMDAiIGhlaWdodD0iMTcyIiB2aWV3Qm94PSIwIDAgMzAwIDE3MiI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iI2NmZDRkYiIvPjwvc3ZnPg==\" loading=\"lazy\" class=\"alignnone size-medium wp-image-7263\" data-src=\"https://lowendbox.com/wp-content/uploads/2015/06/sixteen-300x172.png.webp\" alt=\"sixteen\" width=\"300\" height=\"172\" data-srcset=\"https://lowendbox.com/wp-content/uploads/2015/06/sixteen-300x172.png.webp 300w, https://lowendbox.com/wp-content/uploads/2015/06/sixteen-1024x588.png.webp 1024w, https://lowendbox.com/wp-content/uploads/2015/06/sixteen.png 1186w\" data-sizes=\"(max-width: 300px) 100vw, 300px\"></a></p><p>Once more, accept the default values and hit \u2018Next\u2019.</p><p>And finally, you are presented with the overview of this configuration as well:</p><p><a href=\"https://lowendbox.com/wp-content/uploads/2015/06/seventeen.png\"><img data-lazyloaded=\"1\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMDAiIGhlaWdodD0iMTcyIiB2aWV3Qm94PSIwIDAgMzAwIDE3MiI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iI2NmZDRkYiIvPjwvc3ZnPg==\" loading=\"lazy\" class=\"alignnone size-medium wp-image-7266\" data-src=\"https://lowendbox.com/wp-content/uploads/2015/06/seventeen-300x172.png.webp\" alt=\"seventeen\" width=\"300\" height=\"172\" data-srcset=\"https://lowendbox.com/wp-content/uploads/2015/06/seventeen-300x172.png.webp 300w, https://lowendbox.com/wp-content/uploads/2015/06/seventeen-1024x588.png.webp 1024w, https://lowendbox.com/wp-content/uploads/2015/06/seventeen.png 1186w\" data-sizes=\"(max-width: 300px) 100vw, 300px\"></a></p><p>Click \u2018Finish\u2019 to make sure all of what just has been prepared becomes reality. The next screen should thus give you good news and a button to log in to your Icinga Web 2 installation! Please do so, and be amazed:</p><p><a href=\"https://lowendbox.com/wp-content/uploads/2015/06/eighteen.png\"><img data-lazyloaded=\"1\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMDAiIGhlaWdodD0iMTcyIiB2aWV3Qm94PSIwIDAgMzAwIDE3MiI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iI2NmZDRkYiIvPjwvc3ZnPg==\" loading=\"lazy\" class=\"alignnone size-medium wp-image-7269\" data-src=\"https://lowendbox.com/wp-content/uploads/2015/06/eighteen-300x172.png.webp\" alt=\"eighteen\" width=\"300\" height=\"172\" data-srcset=\"https://lowendbox.com/wp-content/uploads/2015/06/eighteen-300x172.png.webp 300w, https://lowendbox.com/wp-content/uploads/2015/06/eighteen-1024x588.png.webp 1024w, https://lowendbox.com/wp-content/uploads/2015/06/eighteen.png 1186w\" data-sizes=\"(max-width: 300px) 100vw, 300px\"></a></p><p>IT\u2019S WORKING!</p><p>You\u2019ve worked hard, so enjoy your new (and for the next two weeks completely useless) installation and grab a beer. That\u2019s all for today!</p><hr><h2>Final notes</h2><p>Of course the installation isn\u2019t completely useless, because it monitors itself. This kind of supersedes the purpose, but at least you can look at the fancy statistics. Or you could try and add some hosts yourself. But if you want to be sure of what steps are next, come back here in two weeks for part 2!</p><p>Thanks for reading!</p><p class=\"dpsp-share-text\"></p><div id=\"dpsp-content-bottom\" class=\"dpsp-content-wrapper dpsp-shape-rounded dpsp-column-auto dpsp-has-spacing dpsp-no-labels dpsp-show-on-mobile dpsp-button-style-1 dpsp-has-icon-background dpsp-has-button-background dpsp-show-total-share-count dpsp-show-total-share-count-after\"><ul class=\"dpsp-networks-btns-wrapper dpsp-networks-btns-content dpsp-has-button-icon-animation\"><li><a rel=\"nofollow\" href=\"https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Flowendbox.com%2Fblog%2Fserver-monitoring-with-icinga-2-part-1-the-server-ubuntu-host%2F&amp;t=Server%20monitoring%20with%20Icinga%202%20-%20Part%201%3A%20the%20server%20%28Ubuntu%20host%29\" class=\"dpsp-network-btn dpsp-facebook dpsp-no-label dpsp-first\" title=\"Share on Facebook\"><span class=\"dpsp-network-icon\"></span><span class=\"dpsp-network-label-wrapper\"></span></a></li><li><a rel=\"nofollow\" href=\"https://twitter.com/intent/tweet?text=Server%20monitoring%20with%20Icinga%202%20-%20Part%201%3A%20the%20server%20%28Ubuntu%20host%29&amp;url=https%3A%2F%2Flowendbox.com%2Fblog%2Fserver-monitoring-with-icinga-2-part-1-the-server-ubuntu-host%2F&amp;via=LowEndNetwork\" class=\"dpsp-network-btn dpsp-twitter dpsp-no-label\" title=\"Share on Twitter\"><span class=\"dpsp-network-icon\"></span><span class=\"dpsp-network-label-wrapper\"></span></a></li><li><a rel=\"nofollow\" href=\"https://www.linkedin.com/shareArticle?url=https%3A%2F%2Flowendbox.com%2Fblog%2Fserver-monitoring-with-icinga-2-part-1-the-server-ubuntu-host%2F&amp;title=Server%20monitoring%20with%20Icinga%202%20-%20Part%201%3A%20the%20server%20%28Ubuntu%20host%29&amp;mini=true\" class=\"dpsp-network-btn dpsp-linkedin dpsp-no-label dpsp-last\" title=\"Share on LinkedIn\"><span class=\"dpsp-network-icon\"></span><span class=\"dpsp-network-label-wrapper\"></span></a></li></ul><div class=\"dpsp-total-share-wrapper\"><span class=\"dpsp-icon-total-share\"></span><span class=\"dpsp-total-share-count\">1</span><span>shares</span></div></div><div class=\"relpost-thumb-wrapper\"><div class=\"relpost-thumb-container\"><h3>Related posts:</h3><div style=\"clear: both\"></div><div style=\"clear: both\"></div><div class=\"relpost-block-container\"><a class=\"relpost-block-single\" href=\"https://lowendbox.com/blog/managing-your-lowendempire-with-ansible-part-1/\"><div style=\"width: 150px; height: 215px;\"><div class=\"relpost-block-single-image\" alt=\"Managing Your LowEndEmpire With Ansible, Part 1\" style=\"background: transparent url(https://lowendbox.com/wp-content/uploads/2020/03/leb-banner-150x150.png) no-repeat scroll 0% 0%; width: 150px; height: 150px;\"></div><div class=\"relpost-block-single-text\" style=\"font-family: Arial;  font-size: 12px;  color: #333333;\">Managing Your LowEndEmpire With Ansible, Part 1</div></div></a><a class=\"relpost-block-single\" href=\"https://lowendbox.com/blog/setup-a-dns-nameserver-using-nsd/\"><div style=\"width: 150px; height: 215px;\"><div class=\"relpost-block-single-image\" alt=\"Setup a DNS Nameserver Using NSD\" style=\"background: transparent url(https://lowendbox.com/wp-content/uploads/2020/03/leb-banner-150x150.png) no-repeat scroll 0% 0%; width: 150px; height: 150px;\"></div><div class=\"relpost-block-single-text\" style=\"font-family: Arial;  font-size: 12px;  color: #333333;\">Setup a DNS Nameserver Using NSD</div></div></a><a class=\"relpost-block-single\" href=\"https://lowendbox.com/blog/keeping-a-logwatchful-eye-on-your-vps-with-logwatch/\"><div style=\"width: 150px; height: 215px;\"><div class=\"relpost-block-single-image\" alt=\"Keeping A (log)Watchful Eye on Your VPS With logwatch\" style=\"background: transparent url(https://lowendbox.com/wp-content/uploads/2020/04/logwatch-150x150.png) no-repeat scroll 0% 0%; width: 150px; height: 150px;\"></div><div class=\"relpost-block-single-text\" style=\"font-family: Arial;  font-size: 12px;  color: #333333;\">Keeping A (log)Watchful Eye on Your VPS With logwatch</div></div></a><a class=\"relpost-block-single\" href=\"https://lowendbox.com/blog/nginx-vs-openlitespeed-vs-apache/\"><div style=\"width: 150px; height: 215px;\"><div class=\"relpost-block-single-image\" alt=\"Nginx vs. OpenLiteSpeed vs. Apache\" style=\"background: transparent url(https://lowendbox.com/wp-content/uploads/2020/04/nginx-vs-openlitespeed-vs-apache-150x150.png) no-repeat scroll 0% 0%; width: 150px; height: 150px;\"></div><div class=\"relpost-block-single-text\" style=\"font-family: Arial;  font-size: 12px;  color: #333333;\">Nginx vs. OpenLiteSpeed vs. Apache</div></div></a></div><div style=\"clear: both\"></div></div></div><div id=\"author-bio-box\" style=\"background: #f8f8f8; border-top: 2px solid #cccccc; border-bottom: 2px solid #cccccc; color: #333333\"><h3><a style=\"color: #555555;\" href=\"https://lowendbox.com/blog/author/mpkossen/\" title=\"All posts by Maarten Kossen\" rel=\"author\">Maarten Kossen</a></h3><div class=\"bio-gravatar\"><img data-lazyloaded=\"1\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3MCIgaGVpZ2h0PSI3MCIgdmlld0JveD0iMCAwIDcwIDcwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjY2ZkNGRiIi8+PC9zdmc+\" alt=\"\" data-src=\"https://secure.gravatar.com/avatar/67eeccea1ee5a1ce2f93adc061f69a5f?s=70&amp;d=retro&amp;r=pg\" data-srcset=\"https://secure.gravatar.com/avatar/67eeccea1ee5a1ce2f93adc061f69a5f?s=140&amp;d=retro&amp;r=pg 2x\" class=\"avatar avatar-70 photo\" height=\"70\" width=\"70\" loading=\"lazy\"></div><p class=\"bio-description\">Maarten Kossen was the administrator of LowEndBox from 2013 to 2015, and brought many ideas and improvements to the website during his leadership. Today he is member of our community and LowEndTalk.</p></div></div><div class=\"feedback\"></div></div>"}