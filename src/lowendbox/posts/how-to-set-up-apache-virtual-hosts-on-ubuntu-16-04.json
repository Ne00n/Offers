{"id": "20387", "post": "<div class=\"post-20387 post type-post status-publish format-standard hentry category-virtual-servers category-tutorials tag-apache tag-ubuntu-16-04 tag-virtual-hosts tag-virtual-hosts-files\" id=\"post-20387\"><h2 class=\"storytitle\"><a href=\"https://lowendbox.com/blog/how-to-set-up-apache-virtual-hosts-on-ubuntu-16-04/\" rel=\"bookmark\">How To Set Up Apache Virtual Hosts on Ubuntu 16.04</a></h2><div class=\"meta\"><img data-lazyloaded=\"1\" src=\"/media/icons/tag_green.png\" data-src=\"/media/icons/tag_green.png\" alt=\"Tags: \" class=\"litespeed-loaded\" data-was-processed=\"true\"> <a href=\"https://lowendbox.com/tag/apache/\" rel=\"tag\">apache</a>, <a href=\"https://lowendbox.com/tag/ubuntu-16-04/\" rel=\"tag\">Ubuntu 16.04</a>, <a href=\"https://lowendbox.com/tag/virtual-hosts/\" rel=\"tag\">Virtual Hosts</a>, <a href=\"https://lowendbox.com/tag/virtual-hosts-files/\" rel=\"tag\">Virtual Hosts Files</a> <img data-lazyloaded=\"1\" src=\"https://lowendbox.com/media/icons/calendar.png\" data-src=\"https://lowendbox.com/media/icons/calendar.png\" alt=\"Date/Time: \" class=\"litespeed-loaded\" data-was-processed=\"true\"> July 9, 2019 @ 2:35 pm, by Dusko Savic</div><div class=\"storycontent tablelook\"><p>In this tutorial, we shall start with an empty VPS screen of a freshly installed Ubuntu 16.04 and will finish up with three different sites sharing the same IP address.</p><p>Apache web server analyzes input from the browser and connects it to the directory structure inside VPS. The technical term for \u201csites\u201d inside VPS boxes is \u201cvirtual host\u201d \u2014 the server is the \u201chost\u201d many DNS addresses at the same time, hence, they are not real but only \u201cvirtual\u201d.</p><p>Let\u2019s see how it\u2019s done.</p><p><span id=\"more-20387\"></span></p><h2 id=\"whatwearegoingtocover\">What We Are Going To Cover</h2><ul><li>Creating a Non Root User</li><li>Installing Apache</li><li>Defining File Locations For the Default Apache Page</li><li>Creating File Structure For Our Demo Virtual Hosts</li><li>Granting Permissions</li><li>Creating index.html Pages For Our Demo Sites</li><li>Creating Virtual Hosts Files</li><li>Turning On the New Virtual Host Files</li><li>Testing the Virtual Hosts</li><li>Securing Your Domains With Let\u2019s Encrypt SSL</li></ul><h2 id=\"prerequisites\">Prerequisites</h2><p>We use Ubuntu 16.04:</p><ul><li>Starting with a clean VPS with</li><li>At least 512Mb of RAM and</li><li>15Gb of free disk space.</li><li>You will need root user access via SSH</li><li>Two domain names pointed to your server\u2019s IP address (it can also be a subdomain) using A records at your DNS service provider.</li></ul><h2 id=\"step1creatinganonrootuser\">Step 1: Creating a Non Root User</h2><p>Once you are logged in as <em>root</em>, you can create a new user account that you\u2019ll use to access the app once it is installed. We\u2019ll call the new user <em>simpleuser</em>. To create it, run:</p><pre><code>adduser simpleuser\n</code></pre><p>Enter the password twice and press Enter five times to create a new user.</p><p>Then, add it to the sudo group, so that you can run commands as sudo:</p><pre><code>usermod -aG sudo simpleuser\n</code></pre><p>Now you will be able to use the <em>simpleuser</em> as a root using the command <em>sudo</em>.</p><h2 id=\"step2installapache\">Step 2: Install Apache</h2><p>First, update your package manager\u2019s cache:</p><pre><code>sudo apt update -y\n</code></pre><p>Install the Apache web server:</p><pre><code>sudo apt install apache2 -y\n</code></pre><p>Enable its service to make it run on every system boot:</p><pre><code>sudo systemctl enable apache2\n</code></pre><p>Finally, start it:</p><pre><code>sudo systemctl start apache2\n</code></pre><p>To verify that Apache was installed successfully, access it from your local browser by navigating to http://YOUR_DOMAIN/. If that does not work, try adding :80 in the end, like this:</p><pre><code>http://YOUR_DOMAIN:80\n</code></pre><p>You should see a welcome page for Apache, which means that you now have Apache running.</p><p><img data-lazyloaded=\"1\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1ODciIGhlaWdodD0iNDgzIiB2aWV3Qm94PSIwIDAgNTg3IDQ4MyI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iI2NmZDRkYiIvPjwvc3ZnPg==\" loading=\"lazy\" class=\"\" title=\"Apache is running\" data-src=\"https://i.imgur.com/ZVZAcb1.png\" alt=\"Apache is running\" width=\"587\" height=\"483\"></p><h2 id=\"step3filelocationsforthedefaultapachepage\">Step 3: File Locations For the Default Apache Page</h2><p>What did just happen? How did Apache know to serve the page that you see above? Turns out that under Ubuntu, root document page is in directory <em>/var/www/html</em> and it is called <em>index.html</em>. You can see it after these commands:</p><pre><code>cd /var/www/html\nls -la\n</code></pre><p><img data-lazyloaded=\"1\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1NzAiIGhlaWdodD0iMTExIiB2aWV3Qm94PSIwIDAgNTcwIDExMSI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iI2NmZDRkYiIvPjwvc3ZnPg==\" loading=\"lazy\" class=\"\" data-src=\"https://i.imgur.com/3FyZQ3m.png\" alt=\"\" width=\"570\" height=\"111\"></p><p>Note that the directories and the index.html files belong to <em>root</em> user.</p><p>Execute this command</p><pre><code>sudo nano index.html\n</code></pre><p>to see the contents of the <em>index.html</em>:</p><p><img data-lazyloaded=\"1\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1ODciIGhlaWdodD0iNDA1IiB2aWV3Qm94PSIwIDAgNTg3IDQwNSI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iI2NmZDRkYiIvPjwvc3ZnPg==\" loading=\"lazy\" class=\"\" data-src=\"https://i.imgur.com/OvJYQgE.png\" alt=\"\" width=\"587\" height=\"405\"></p><p>It is a very long page so we can scroll through it, change it and so on.</p><p>Under Ubuntu, all Apache files are in folder <em>/etc/apache2</em>:</p><pre><code>cd /etc/apache2\nls -la\n</code></pre><p><img data-lazyloaded=\"1\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1ODciIGhlaWdodD0iMjk1IiB2aWV3Qm94PSIwIDAgNTg3IDI5NSI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iI2NmZDRkYiIvPjwvc3ZnPg==\" loading=\"lazy\" class=\"\" data-src=\"https://i.imgur.com/wrTYTFd.png\" alt=\"\" width=\"587\" height=\"295\"></p><p>Directory <em>sites-available</em> holds information on sites that exist, while <em>sites-enabled</em> holds information which of the available sites can be exposed to the Internet. File <em>000-default.conf</em> in the image above is light blue in color, which tells us that it is a symbolic link to the file of same name in folder <em>sites-available</em>. The existence of one such link enables Apache to read the contents of file</p><pre><code>/etc/apache2/sites-available/000-default.conf\n</code></pre><p>and serve it to the browser. By adding more config files into <em>/etc/apache2/sites-available</em> and creating the corresponding symbolic links in <em>/etc/apache2/sites-enabled</em>, we can serve different pages to the different site domains and that is how we can host multiple independent sites off of one and the same IP address.</p><p>Each site in Apache parlance is called \u201cvirtual host\u201d and will have to reside in its own subdirectory. The plan for adding new virtual hosts boils down to</p><ul><li>creating file structure for each site,</li><li>populating HTML and other files in the site,</li><li>creating a new .conf file in <em>/etc/apache2/sites-available</em>, and</li><li>creating a new symbolic link in <em>/etc/apache2/sites-enabled</em>.</li></ul><p>Apache will then do the rest, automatically.</p><h2 id=\"step4creatingfilestructureforourdemovirtualhosts\">Step 4: Creating File Structure For Our Demo Virtual Hosts</h2><p>We shall create two virtual hosts, let us call them <em>demo1.com</em> and <em>demo2.com</em> and they will correspond to DNS entries <em>demo1.duskosavic.com</em> and <em>demo2.duskosavic.com</em> that we have previously made using A records at our DNS service provider. (Instead of these, you should enter your own site domains and subdomains.) If we now entered <em>http://demo1.duskosavic.com/</em> in the browser, the default <em>index.html</em> page with basic Apache information would be served, again.</p><p>Let us now create a directory within VPS to hold our <em>demo1.com</em> site. Ubuntu will hold its HTML files under <em>/var/www/html</em> folder but we are free to install our files elsewhere. We can, for example, install it into the root folder, like this:</p><pre><code>cd ~\nsudo mkdir /demo1.com\n</code></pre><p>and put all our data into it. The address of the directory would be <em>/root/demo1.com</em>. As long as we entered that folder address into the rest of the configuration files, everything would be OK.</p><p>However, we could also use <em>/var/www/html/</em> folder to create our demo sites there. With commands such as</p><pre><code>cd /var/www/html\nsudo mkdir demo1.com\nsudo mkdir demo2.com\nls -la\n</code></pre><p>we would have the following directory structure:</p><p><img data-lazyloaded=\"1\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2MDYiIGhlaWdodD0iMTk4IiB2aWV3Qm94PSIwIDAgNjA2IDE5OCI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iI2NmZDRkYiIvPjwvc3ZnPg==\" loading=\"lazy\" class=\"\" data-src=\"https://i.imgur.com/0xNiU7O.png\" alt=\"\" width=\"606\" height=\"198\"></p><p>Or, we can go one level up the directory tree and create the demo sites in <em>/var/www</em>. Inside folders <em>demo1.com</em> and <em>demo2.com</em> we can install whatever directory structure we need, for example:</p><pre><code>sudo mkdir -p /var/www/demo1.com/{public_html,private,log,cgi-bin,backup}\nsudo mkdir -p /var/www/demo2.com/{public_html,private,log,cgi-bin,backup}\nls demo1.com -la\n</code></pre><p><img data-lazyloaded=\"1\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1NDMiIGhlaWdodD0iMjE0IiB2aWV3Qm94PSIwIDAgNTQzIDIxNCI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iI2NmZDRkYiIvPjwvc3ZnPg==\" loading=\"lazy\" class=\"\" data-src=\"https://i.imgur.com/O6vIiVt.png\" alt=\"\" width=\"543\" height=\"214\"></p><h2 id=\"step5grantingpermissions\">Step 5: Granting Permissions</h2><p>From the image above we see that <em>root</em> user is still the owner of <em>public_html</em> folder from which our public files will be served to the Internet. Let us now change the ownership so that our <em>simpleuser</em> can access the <em>public_html</em> files. The commands are:</p><pre><code>sudo chown -vR simpleuser:simpleuser /var/www/demo1.com/public_html\nsudo chown -vR simpleuser:simpleuser /var/www/demo2.com/public_html\n</code></pre><p>Also make sure that files in <em>/var/www</em> and its subfolders can be read correctly:</p><pre><code>sudo chmod -R 755 /var/www\n</code></pre><h2 id=\"step6createindexhtmlpagesforourdemosites\">Step 6: Create index.html Pages For Our Demo Sites</h2><p>Our public files will be in <em>/var/www/demo1.com/public</em>html_ and <em>/var/www/demo2.com/public</em>html<em>. Let us create an _index.html</em> in each of these two folders so that we have something to see while browsing. Use <em>nano</em> or editor of your choice to create <em>index.html</em> for <em>demo1.com</em>:</p><pre><code>sudo nano /var/www/demo1.com/public_html/index.html\n</code></pre><p>We need only one line of text, preferably in H1 format for better readability. Insert the following text into <em>nano</em>, save and close the file:</p><pre><code>&lt;!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.01 Transitional//EN\"\n\"http://www.w3.org/TR/html4/loose.dtd\"&gt;\n&lt;html&gt;\n&lt;head&gt;\n&lt;title&gt;demo1.com Title&lt;/title&gt;\n&lt;meta http-equiv=\"Content-Type\" content=\"text/html; charset=iso-8859-1\"&gt;\n&lt;style type=\"text/css\"&gt;\n&lt;!--\nbody,td,th {\n    color: #FF3333;\n}\n--&gt;\n&lt;/style&gt;&lt;/head&gt;\n\n&lt;body&gt;\n&lt;h1&gt;This is demo1.com \n&lt;/h1&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre><p>Create <em>index.html</em> for <em>demo2.com</em></p><pre><code>sudo nano /var/www/demo2.com/public_html/index.html\n</code></pre><p>and paste this in:</p><pre><code>&lt;!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.01 Transitional//EN\"\n\"http://www.w3.org/TR/html4/loose.dtd\"&gt;\n&lt;html&gt;\n&lt;head&gt;\n&lt;title&gt;demo2.com Title&lt;/title&gt;\n&lt;meta http-equiv=\"Content-Type\" content=\"text/html; charset=iso-8859-1\"&gt;\n&lt;style type=\"text/css\"&gt;\n&lt;!--\nbody,td,th {\n    color: #FF3333;\n}\n.style1 {color: #3333FF}\n--&gt;\n&lt;/style&gt;&lt;/head&gt;\n&lt;body&gt;\n&lt;h1 class=\"style1\"&gt;This is demo2.com&lt;/h1&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre><h2 id=\"step7createvirtualhostsfiles\">Step 7: Create Virtual Hosts Files</h2><p>Let us now inform Apache that there are two new sites to be served. We shall copy the default virtual host file, <em>000-default.conf</em> twice and then alter these new files to reflect the positions of <em>demo1.com</em> and <em>demo2.com</em> sites on disk.</p><h3 id=\"step7acreatethefirstvirtualhostsfile\">Step 7A: Create the First Virtual Hosts File</h3><p>Copy the original and rename it <em>demo1.com.conf</em>:</p><pre><code>sudo cp /etc/apache2/sites-available/000-default.conf /etc/apache2/sites-available/demo1.com.conf\n</code></pre><p>Through <em>nano</em> see what is in it:</p><pre><code>sudo nano /etc/apache2/sites-available/demo1.com.conf\n</code></pre><p><img data-lazyloaded=\"1\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1ODYiIGhlaWdodD0iNTQ2IiB2aWV3Qm94PSIwIDAgNTg2IDU0NiI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iI2NmZDRkYiIvPjwvc3ZnPg==\" loading=\"lazy\" class=\"\" data-src=\"https://i.imgur.com/y4HbXTs.png\" alt=\"\" width=\"586\" height=\"546\"></p><p>For clarity, let us remove comments and this is what you should return back into <em>nano</em>:</p><pre><code>&lt;VirtualHost *:80&gt;\n    ServerAdmin admin@demo1.com\n    ServerName demo1.com\n    ServerAlias demo1.duskosavic.com\n    ServerAlias www.demo1.com\n    DocumentRoot /var/www/demo1.com/public_html\n    ErrorLog ${APACHE_LOG_DIR}/error.log\n    CustomLog ${APACHE_LOG_DIR}/access.log combined\n&lt;/VirtualHost&gt;\n</code></pre><p>Let us explain in detail:</p><ul><li><strong>80</strong> This virtual host will listen on port 80. You can change port number through file <em>ports.conf</em> with this command:</li></ul><pre><code>sudo nano /etc/apache2/ports.conf\n</code></pre><p>The contents of the <em>ports.conf</em> file are here in case you want to actually change them:</p><pre><code># If you just change the port or add more ports here, you will likely also\n# have to change the VirtualHost statement in\n# /etc/apache2/sites-enabled/000-default.conf\n\nListen 80\n\n&lt;IfModule ssl_module&gt;\n        Listen 443\n&lt;/IfModule&gt;\n\n&lt;IfModule mod_gnutls.c&gt;\n        Listen 443\n&lt;/IfModule&gt;\n\n# vim: syntax=apache ts=4 sw=4 sts=4 sr noet\n</code></pre><ul><li><strong>ServerAdmin</strong> is the email address to which Apache will send messages for administrator in case of an error in the system.</li><li><strong>ServerName</strong> Server name, obviously, it should coincide with the domain name.</li><li><strong>ServerAlias</strong> Another name for the same server as above. You can have as many of these aliases as you like.</li><li><strong>DocumentRoot</strong> Points to the absolute address of the site on disk.</li><li><strong>ErrorLog</strong> The address of the error log.</li><li><strong>CustomLog</strong> The same for access logs \u2014 for example, have there been too many unauthorized accesses from the same IP address?</li></ul><h3 id=\"step7bcreatethesecondvirtualhostsfile\">Step 7B: Create the Second Virtual Hosts File</h3><p>Do the same for the other site / domain. Here are the commands:</p><pre><code>sudo cp /etc/apache2/sites-available/000-default.conf /etc/apache2/sites-available/demo2.com.conf\n</code></pre><p>Again use <em>nano</em> see what is in it:</p><pre><code>sudo nano /etc/apache2/sites-available/demo2.com.conf\n</code></pre><p>This is what you should return back into <em>nano</em>:</p><pre><code>&lt;VirtualHost *:80&gt;\n    ServerAdmin admin@demo2.com\n    ServerName demo2.duskosavic.com\n    ServerAlias www.demo2.com\n    DocumentRoot /var/www/demo2.com/public_html\n    ErrorLog ${APACHE_LOG_DIR}/error.log\n    CustomLog ${APACHE_LOG_DIR}/access.log combined\n&lt;/VirtualHost&gt;\n</code></pre><p>Save and close both files.</p><h2 id=\"step8turnonthenewvirtualhostfiles\">Step 8: Turn On the New Virtual Host Files</h2><p>Command <em>a2ensite</em> will create symbolic links from <em>sites-enabled</em> directory to <em>sites-available</em> and so Apache will routinely start serving the virtual hosts. The command are:</p><pre><code>sudo a2ensite demo1.com.conf\nsudo a2ensite demo2.com.conf\n</code></pre><p>If you want to disable the default site, the command would be:</p><pre><code>sudo a2dissite 000-default.conf\n</code></pre><p>You may want to leave it as it is in case that someone enters the IP address directly into the browser \u2014 then the default html code will be activated and the visitor would see what you have prepared for that case.</p><p>Once you use the <em>a2ensite</em> and <em>a2dissite</em> commands, you may see something like this in the terminal window:</p><p><img data-lazyloaded=\"1\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1NjAiIGhlaWdodD0iMzIyIiB2aWV3Qm94PSIwIDAgNTYwIDMyMiI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iI2NmZDRkYiIvPjwvc3ZnPg==\" loading=\"lazy\" class=\"\" data-src=\"https://i.imgur.com/ZeYJlJP.png\" alt=\"\" width=\"560\" height=\"322\"></p><p>If you try to activate a link that is already activated, you will be notified as <em>already enabled</em>. And then you will see two lines that say:</p><pre><code>To activate new configuration, you need to run:\n  service apache2 reload\n</code></pre><p>That is, however, an <strong>incorrect</strong> advice to follow. The proper command is:</p><pre><code>sudo service apache2 reload\n</code></pre><p>that is, run it as a <em>sudo</em>.</p><p>Also be sure to clear cache in your browser or it may start fooling you with old values instead of the properly refreshed ones.</p><h2 id=\"step9testingthevirtualhosts\">Step 9: Testing the Virtual Hosts</h2><p>If you have left the default IP address activated, it will currently show the welcome to Apache screen. If you enter address <em>demo1.duskosavic.com</em> you will see this:</p><p><img data-lazyloaded=\"1\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyOTQiIGhlaWdodD0iOTMiIHZpZXdCb3g9IjAgMCAyOTQgOTMiPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9IiNjZmQ0ZGIiLz48L3N2Zz4=\" loading=\"lazy\" class=\"\" data-src=\"https://i.imgur.com/Si2lp2E.png\" alt=\"\" width=\"294\" height=\"93\"></p><p>And entering <em>demo2.duskosavic.com</em> into the browser changes the image to:</p><p><img data-lazyloaded=\"1\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyODMiIGhlaWdodD0iOTciIHZpZXdCb3g9IjAgMCAyODMgOTciPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9IiNjZmQ0ZGIiLz48L3N2Zz4=\" loading=\"lazy\" class=\"\" data-src=\"https://i.imgur.com/Rqms0EN.png\" alt=\"\" width=\"283\" height=\"97\"></p><h2 id=\"step10securingyourdomainswithletsencryptssl\">Step 10: Securing Your Domains With Let\u2019s Encrypt SSL</h2><p>We can use free certificates to turn our HTTP traffic into HTTPS traffic, which will make access to the site more secure. Use this link to <a href=\"https://certbot.eff.org/lets-encrypt/ubuntuxenial-apache.html\">obtain free Let\u2019s Encrypt TLS certificates</a>, from the official Cerbot site.</p><p><img data-lazyloaded=\"1\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1MjQiIGhlaWdodD0iMjgzIiB2aWV3Qm94PSIwIDAgNTI0IDI4MyI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iI2NmZDRkYiIvPjwvc3ZnPg==\" loading=\"lazy\" class=\"\" data-src=\"https://i.imgur.com/qdNgtch.png\" alt=\"\" width=\"524\" height=\"283\"></p><p>Execute the following set of commands:</p><pre><code>sudo apt-get update\nsudo apt-get install software-properties-common\nsudo add-apt-repository universe\nsudo add-apt-repository ppa:certbot/certbot\nsudo apt-get update\n</code></pre><p>Now let us install Certbot:</p><pre><code>sudo apt-get install certbot python-certbot-apache \n</code></pre><p>Run this command to get a certificate and have Certbot edit your Apache configuration automatically to serve it, turning on HTTPS access in a single step.</p><pre><code>sudo certbot --apache\n</code></pre><p>It will ask for your email address in case of emergency, then another two questions that you may answer however you like and then the most important question \u2014 which names would you like to activate HTTPS for?</p><p><img data-lazyloaded=\"1\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1NjkiIGhlaWdodD0iMjYzIiB2aWV3Qm94PSIwIDAgNTY5IDI2MyI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iI2NmZDRkYiIvPjwvc3ZnPg==\" loading=\"lazy\" class=\"\" data-src=\"https://i.imgur.com/U0S6gQX.png\" alt=\"\" width=\"569\" height=\"263\"></p><p>I chose 4 and 5 as these are the only real domains and subdomains that I have DNS addresses for:</p><ul><li><em>demo1.duskosavic.com</em></li><li><em>demo2.duskosavic.com</em></li></ul><p>The last question will be whether do you want HTTPS access or not. You, of course, do so choose 2. This finishes the installation of CertBot so let us now try it out:</p><p><img data-lazyloaded=\"1\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0MDIiIGhlaWdodD0iODgiIHZpZXdCb3g9IjAgMCA0MDIgODgiPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9IiNjZmQ0ZGIiLz48L3N2Zz4=\" loading=\"lazy\" class=\"\" data-src=\"https://i.imgur.com/xraN6EJ.png\" alt=\"\" width=\"402\" height=\"88\"></p><p>We have entered the HTTP address and the site automatically turns it into a HTTPS address:</p><p><img data-lazyloaded=\"1\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzNDEiIGhlaWdodD0iOTciIHZpZXdCb3g9IjAgMCAzNDEgOTciPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9IiNjZmQ0ZGIiLz48L3N2Zz4=\" loading=\"lazy\" class=\"\" data-src=\"https://i.imgur.com/8s0p2m2.png\" alt=\"\" width=\"341\" height=\"97\"></p><h2 id=\"whatcanyoudonext\">What Can You Do Next</h2><p>We have shown how to share one IP address to one, two, three or dozens or hundreds of independent sites. You can now use this knowledge to host all your sites on one low cost VPS box.</p><p>Dusko Savic is a technical writer and programmer.</p><p><a href=\"https://duskosavic.com/blog/\">duskosavic.com</a></p><p class=\"dpsp-share-text\"></p><div id=\"dpsp-content-bottom\" class=\"dpsp-content-wrapper dpsp-shape-rounded dpsp-column-auto dpsp-has-spacing dpsp-no-labels dpsp-show-on-mobile dpsp-button-style-1 dpsp-has-icon-background dpsp-has-button-background dpsp-show-total-share-count dpsp-show-total-share-count-after\"><ul class=\"dpsp-networks-btns-wrapper dpsp-networks-btns-content dpsp-has-button-icon-animation\"><li><a rel=\"nofollow\" href=\"https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Flowendbox.com%2Fblog%2Fhow-to-set-up-apache-virtual-hosts-on-ubuntu-16-04%2F&amp;t=How%20To%20Set%20Up%20Apache%20Virtual%20Hosts%20on%20Ubuntu%20%2016.04\" class=\"dpsp-network-btn dpsp-facebook dpsp-no-label dpsp-first\" title=\"Share on Facebook\"><span class=\"dpsp-network-icon\"></span><span class=\"dpsp-network-label-wrapper\"></span></a></li><li><a rel=\"nofollow\" href=\"https://twitter.com/intent/tweet?text=How%20To%20Set%20Up%20Apache%20Virtual%20Hosts%20on%20Ubuntu%20%2016.04&amp;url=https%3A%2F%2Flowendbox.com%2Fblog%2Fhow-to-set-up-apache-virtual-hosts-on-ubuntu-16-04%2F&amp;via=LowEndNetwork\" class=\"dpsp-network-btn dpsp-twitter dpsp-no-label\" title=\"Share on Twitter\"><span class=\"dpsp-network-icon\"></span><span class=\"dpsp-network-label-wrapper\"></span></a></li><li><a rel=\"nofollow\" href=\"https://www.linkedin.com/shareArticle?url=https%3A%2F%2Flowendbox.com%2Fblog%2Fhow-to-set-up-apache-virtual-hosts-on-ubuntu-16-04%2F&amp;title=How%20To%20Set%20Up%20Apache%20Virtual%20Hosts%20on%20Ubuntu%20%2016.04&amp;mini=true\" class=\"dpsp-network-btn dpsp-linkedin dpsp-no-label dpsp-last\" title=\"Share on LinkedIn\"><span class=\"dpsp-network-icon\"></span><span class=\"dpsp-network-label-wrapper\"></span></a></li></ul><div class=\"dpsp-total-share-wrapper\"><span class=\"dpsp-icon-total-share\"></span><span class=\"dpsp-total-share-count\">0</span><span>shares</span></div></div><div class=\"relpost-thumb-wrapper\"><div class=\"relpost-thumb-container\"><h3>Related posts:</h3><div style=\"clear: both\"></div><div style=\"clear: both\"></div><div class=\"relpost-block-container\"><a class=\"relpost-block-single\" href=\"https://lowendbox.com/blog/nginx-vs-openlitespeed-vs-apache/\"><div style=\"width: 150px; height: 215px;\"><div class=\"relpost-block-single-image\" alt=\"Nginx vs. OpenLiteSpeed vs. Apache\" style=\"background: transparent url(https://lowendbox.com/wp-content/uploads/2020/04/nginx-vs-openlitespeed-vs-apache-150x150.png) no-repeat scroll 0% 0%; width: 150px; height: 150px;\"></div><div class=\"relpost-block-single-text\" style=\"font-family: Arial;  font-size: 12px;  color: #333333;\">Nginx vs. OpenLiteSpeed vs. Apache</div></div></a><a class=\"relpost-block-single\" href=\"https://lowendbox.com/blog/how-to-secure-apache-with-lets-encrypt-on-ubuntu-18-04/\"><div style=\"width: 150px; height: 215px;\"><div class=\"relpost-block-single-image\" alt=\"How To Secure Apache with Let's Encrypt on Ubuntu 18.04\" style=\"background: transparent url(https://lowendbox.com/wp-content/uploads/2020/04/leb-centered-small.jpg) no-repeat scroll 0% 0%; width: 150px; height: 150px;\"></div><div class=\"relpost-block-single-text\" style=\"font-family: Arial;  font-size: 12px;  color: #333333;\">How To Secure Apache with Let's Encrypt on Ubuntu 18.04</div></div></a><a class=\"relpost-block-single\" href=\"https://lowendbox.com/blog/how-to-set-up-apache-virtual-hosts-on-centos-7/\"><div style=\"width: 150px; height: 215px;\"><div class=\"relpost-block-single-image\" alt=\"How To Set Up Apache Virtual Hosts on CentOS 7\" style=\"background: transparent url(https://lowendbox.com/wp-content/uploads/2020/04/leb-centered-small.jpg) no-repeat scroll 0% 0%; width: 150px; height: 150px;\"></div><div class=\"relpost-block-single-text\" style=\"font-family: Arial;  font-size: 12px;  color: #333333;\">How To Set Up Apache Virtual Hosts on CentOS 7</div></div></a><a class=\"relpost-block-single\" href=\"https://lowendbox.com/blog/lemp-stack-installation-on-ubuntu-16-04/\"><div style=\"width: 150px; height: 215px;\"><div class=\"relpost-block-single-image\" alt=\"LEMP Stack Installation on Ubuntu 16.04\" style=\"background: transparent url(https://lowendbox.com/wp-content/uploads/2020/04/leb-centered-small.jpg) no-repeat scroll 0% 0%; width: 150px; height: 150px;\"></div><div class=\"relpost-block-single-text\" style=\"font-family: Arial;  font-size: 12px;  color: #333333;\">LEMP Stack Installation on Ubuntu 16.04</div></div></a></div><div style=\"clear: both\"></div></div></div><div id=\"author-bio-box\" style=\"background: #f8f8f8; border-top: 2px solid #cccccc; border-bottom: 2px solid #cccccc; color: #333333\"><h3><a style=\"color: #555555;\" href=\"https://lowendbox.com/blog/author/dusko/\" title=\"All posts by Dusko Savic\" rel=\"author\">Dusko Savic</a></h3><div class=\"bio-gravatar\"><img data-lazyloaded=\"1\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3MCIgaGVpZ2h0PSI3MCIgdmlld0JveD0iMCAwIDcwIDcwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjY2ZkNGRiIi8+PC9zdmc+\" alt=\"\" data-src=\"https://secure.gravatar.com/avatar/42872b609daecf21764ca315bcf13c04?s=70&amp;d=retro&amp;r=pg\" data-srcset=\"https://secure.gravatar.com/avatar/42872b609daecf21764ca315bcf13c04?s=140&amp;d=retro&amp;r=pg 2x\" class=\"avatar avatar-70 photo\" height=\"70\" width=\"70\" loading=\"lazy\"></div><a target=\"_blank\" rel=\"nofollow noopener noreferrer\" href=\"https://duskosavic.com\" class=\"bio-icon bio-icon-website\"></a><a target=\"_blank\" rel=\"nofollow noopener noreferrer\" href=\"https://www.linkedin.com/in/dusko-savic-741487149/\" class=\"bio-icon bio-icon-linkedin\"></a><p class=\"bio-description\"></p></div></div><div class=\"feedback\"></div></div>"}