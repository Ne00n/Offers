{"id": "23749", "post": "<div class=\"post-23749 post type-post status-publish format-standard hentry category-tutorials tag-google-tcp-bbr tag-setup-google-tcp-bbr-on-your-vps tag-tcp-bbr tag-tutorial\" id=\"post-23749\"><h2 class=\"storytitle\"><a href=\"https://lowendbox.com/blog/how-to-enable-googles-tcp-bbr-on-a-linux-vps/\" rel=\"bookmark\">How to Enable Google\u2019s TCP BBR on a Linux VPS</a></h2><div class=\"meta\"><img data-lazyloaded=\"1\" src=\"data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=\" data-src=\"/media/icons/tag_green.png\" alt=\"Tags: \"> <a href=\"https://lowendbox.com/tag/google-tcp-bbr/\" rel=\"tag\">google tcp bbr</a>, <a href=\"https://lowendbox.com/tag/setup-google-tcp-bbr-on-your-vps/\" rel=\"tag\">setup google tcp bbr on your vps</a>, <a href=\"https://lowendbox.com/tag/tcp-bbr/\" rel=\"tag\">tcp bbr</a>, <a href=\"https://lowendbox.com/tag/tutorial/\" rel=\"tag\">tutorial</a> <img data-lazyloaded=\"1\" src=\"data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=\" data-src=\"https://lowendbox.com/media/icons/calendar.png\" alt=\"Date/Time: \"> July 14, 2020 @ 12:00 pm, by Jon Biloh</div><div class=\"storycontent tablelook\"><p><a><img data-lazyloaded=\"1\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0MTAiIGhlaWdodD0iMjM4IiB2aWV3Qm94PSIwIDAgNDEwIDIzOCI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0iI2NmZDRkYiIvPjwvc3ZnPg==\" loading=\"lazy\" class=\"screenshot\" title=\"How to enable Google's TCP BBR on a Linux VPS\" data-src=\"https://lowendbox.com/wp-content/uploads/2020/06/how-to-enable-google-tcp-bbr.jpg.webp\" alt=\"How to enable Google's TCP BBR on a Linux VPS\" width=\"410\" height=\"238\"></a></p><p><span style=\"font-weight: 400;\">This article was contributed by Dustin B. Cisneros of </span><a href=\"https://www.racknerd.com/\"><span style=\"font-weight: 400;\">RackNerd</span></a><span style=\"font-weight: 400;\"> \u2013 LowEndBox appreciates your contribution as always! Be sure to check out </span><a href=\"https://lowendbox.com/?s=racknerd&amp;searchsubmit=Find\"><span style=\"font-weight: 400;\">RackNerd\u2019s latest LowEndBox specials</span></a><span style=\"font-weight: 400;\"> if you are looking for a KVM VPS.</span></p><p><span style=\"font-weight: 400;\">Google\u2019s TCP BBR, or \u201cBottleneck Bandwidth and Round-trip propagation time,\u201d is a congestion control system based on cutting-edge technology. It is the same system used for traffic through Google.com, as well as YouTube. It was the reason that YouTube\u2019s network throughput was increased by 4% annually. Moreover, Google\u2019s BBR also significantly reduces latency as the querying, and queuing delays are minimized.</span></p><p><span style=\"font-weight: 400;\">We have written this guide for you so that you can enable Google\u2019s BBR on your Linux virtual private server.</span></p><p><span style=\"font-weight: 400;\">There would be two steps in the guide, where step 1 can be optional in some instances. Let us start!</span></p><p><span id=\"more-23749\"></span></p><p><b>Step 1. Check and upgrade your kernel</b></p><p><span style=\"font-weight: 400;\">We need Linux kernel version 4.9.0 or higher to support Google\u2019s BBR. We will guide you on how to update it for both CentOS 7 and Ubuntu.&nbsp;</span></p><p><span style=\"font-weight: 400;\">To check your current kernel version, run this command:</span></p><blockquote><p><i><span style=\"font-weight: 400;\">uname -r</span></i></p></blockquote><p><span style=\"font-weight: 400;\">If this command returns a kernel version higher than 4.9.0, then you can skip step 1.</span></p><p><b>CentOS 7 Based Systems:</b><b><br>\n</b><span style=\"font-weight: 400;\">1) Install Elrepo repo</span></p><p><span style=\"font-weight: 400;\">To update the CentOS kernel, we need to install the Elrepo repo via the following commands:</span></p><blockquote><p><i><span style=\"font-weight: 400;\">sudo rpm \u2013import https://www.elrepo.org/RPM-GPG-KEY-elrepo.org</span></i></p><p><i><span style=\"font-weight: 400;\">sudo rpm -Uvh</span></i><a href=\"http://www.elrepo.org/elrepo-release-7.0-2.el7.elrepo.noarch.rpm\"> <i><span style=\"font-weight: 400;\">http://www.elrepo.org/elrepo-release-7.0-2.el7.elrepo.noarch.rpm</span></i></a></p></blockquote><p><span style=\"font-weight: 400;\">2) Update your kernel</span></p><p><span style=\"font-weight: 400;\">To install the updated kernel, run the following two commands:</span></p><blockquote><p><i><span style=\"font-weight: 400;\">sudo yum \u2013enablerepo=elrepo-kernel install kernel-ml -y</span></i></p><p><i><span style=\"font-weight: 400;\">yum list installed kernel</span></i></p></blockquote><p><span style=\"font-weight: 400;\">3) Set default boot entry</span></p><p><span style=\"font-weight: 400;\">Run this command to see the list of kernels:</span></p><blockquote><p><i><span style=\"font-weight: 400;\">sudo egrep ^menuentry /etc/grub2.cfg | cut -f 2 -d \\\u2019</span></i></p></blockquote><p><span style=\"font-weight: 400;\">You should find your newly installed kernel at the top of the list. Then run the following command:</span></p><blockquote><p><i><span style=\"font-weight: 400;\">sudo grub2-set-default 0</span></i></p></blockquote><p><span style=\"font-weight: 400;\">4) Reboot and verify</span></p><p><span style=\"font-weight: 400;\">Now reboot your VPS, and after it turns back on, rerun the following command to verify the install:</span></p><blockquote><p><i><span style=\"font-weight: 400;\">uname -r</span></i></p></blockquote><p><b>Ubuntu 18.04 Based Systems</b></p><p><span style=\"font-weight: 400;\">The kernel version should be compatible with Google\u2019s BBR if you are running Ubuntu 18.04. However, you can still upgrade the kernel using the following commands.</span></p><blockquote><p><i><span style=\"font-weight: 400;\">cd /tmp/</span></i></p><p><i><span style=\"font-weight: 400;\">wget https://kernel.ubuntu.com/~kernel-ppa/mainline/v5.4.13/linux-headers-5.4.13-050413_5.4.13-050413.202001171431_all.deb</span></i></p><p><i><span style=\"font-weight: 400;\">wget https://kernel.ubuntu.com/~kernel-ppa/mainline/v5.4.13/linux-headers-5.4.13-050413-generic_5.4.13-050413.202001171431_amd64.deb</span></i></p><p><i><span style=\"font-weight: 400;\">wget https://kernel.ubuntu.com/~kernel-ppa/mainline/v5.4.13/linux-headers-5.4.13-050413-lowlatency_5.4.13-050413.202001171431_amd64.deb</span></i></p><p><i><span style=\"font-weight: 400;\">wget https://kernel.ubuntu.com/~kernel-ppa/mainline/v5.4.13/linux-image-unsigned-5.4.13-050413-generic_5.4.13-050413.202001171431_amd64.deb</span></i></p><p><i><span style=\"font-weight: 400;\">wget https://kernel.ubuntu.com/~kernel-ppa/mainline/v5.4.13/linux-image-unsigned-5.4.13-050413-lowlatency_5.4.13-050413.202001171431_amd64.deb</span></i></p><p><i><span style=\"font-weight: 400;\">wget https://kernel.ubuntu.com/~kernel-ppa/mainline/v5.4.13/linux-modules-5.4.13-050413-generic_5.4.13-050413.202001171431_amd64.deb</span></i></p><p><i><span style=\"font-weight: 400;\">wget https://kernel.ubuntu.com/~kernel-ppa/mainline/v5.4.13/linux-modules-5.4.13-050413-lowlatency_5.4.13-050413.202001171431_amd64.deb</span></i></p><p><i><span style=\"font-weight: 400;\">sudo dpkg -i *.deb</span></i></p></blockquote><p><span style=\"font-weight: 400;\">After running the commands, reboot your VPS by running the \u201creboot\u201d command.</span></p><p><b>Step 2. Enable Google\u2019s TCP BBR</b></p><p><span style=\"font-weight: 400;\">The instructions below are the same for both CentOS and Ubuntu.</span></p><p><span style=\"font-weight: 400;\">To start, open \u201c/etc/sysctl.conf\u201d in any text editor, or run the command to open it in vim or nano (your preferred text editor):</span></p><blockquote><p><i><span style=\"font-weight: 400;\">sudo vim /etc/sysctl.conf</span></i></p></blockquote><p><span style=\"font-weight: 400;\">At the end of the config file, add the following lines:</span></p><blockquote><p><span style=\"font-weight: 400;\">net.core.default_qdisc=fq</span></p><p><span style=\"font-weight: 400;\">net.ipv4.tcp_congestion_control=bbr</span></p></blockquote><p><span style=\"font-weight: 400;\">Then save the file, and refresh your configuration using this command:</span></p><blockquote><p><i><span style=\"font-weight: 400;\">sudo sysctl -p</span></i></p></blockquote><p><span style=\"font-weight: 400;\">Google\u2019s BBR congestion control system has now been enabled on your VPS, to verify this, run this command:</span></p><blockquote><p><i><span style=\"font-weight: 400;\">sysctl net.ipv4.tcp_congestion_control</span></i></p></blockquote><p><span style=\"font-weight: 400;\">If the enabling process were successful, the output would be:</span></p><blockquote><p><span style=\"font-weight: 400;\">net.ipv4.tcp_congestion_control = bbr</span></p></blockquote><p><span style=\"font-weight: 400;\">You have now successfully enabled Google\u2019s TCP BBR on your VPS!</span></p><p><b>Have you enabled Google\u2019s TCP BBR on your Linux VPS? Have you seen any performance benefits? Please leave your questions or feedback in the comments section below!</b></p><p class=\"dpsp-share-text\"></p><div id=\"dpsp-content-bottom\" class=\"dpsp-content-wrapper dpsp-shape-rounded dpsp-column-auto dpsp-has-spacing dpsp-no-labels dpsp-show-on-mobile dpsp-button-style-1 dpsp-has-icon-background dpsp-has-button-background dpsp-show-total-share-count dpsp-show-total-share-count-after\"><ul class=\"dpsp-networks-btns-wrapper dpsp-networks-btns-content dpsp-has-button-icon-animation\"><li><a rel=\"nofollow\" href=\"https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Flowendbox.com%2Fblog%2Fhow-to-enable-googles-tcp-bbr-on-a-linux-vps%2F&amp;t=How%20to%20Enable%20Google%27s%20TCP%20BBR%20on%20a%20Linux%20VPS\" class=\"dpsp-network-btn dpsp-facebook dpsp-no-label dpsp-first\" title=\"Share on Facebook\"><span class=\"dpsp-network-icon\"></span><span class=\"dpsp-network-label-wrapper\"></span></a></li><li><a rel=\"nofollow\" href=\"https://twitter.com/intent/tweet?text=How%20to%20Enable%20Google%27s%20TCP%20BBR%20on%20a%20Linux%20VPS&amp;url=https%3A%2F%2Flowendbox.com%2Fblog%2Fhow-to-enable-googles-tcp-bbr-on-a-linux-vps%2F&amp;via=LowEndNetwork\" class=\"dpsp-network-btn dpsp-twitter dpsp-no-label\" title=\"Share on Twitter\"><span class=\"dpsp-network-icon\"></span><span class=\"dpsp-network-label-wrapper\"></span></a></li><li><a rel=\"nofollow\" href=\"https://www.linkedin.com/shareArticle?url=https%3A%2F%2Flowendbox.com%2Fblog%2Fhow-to-enable-googles-tcp-bbr-on-a-linux-vps%2F&amp;title=How%20to%20Enable%20Google%27s%20TCP%20BBR%20on%20a%20Linux%20VPS&amp;mini=true\" class=\"dpsp-network-btn dpsp-linkedin dpsp-no-label dpsp-last\" title=\"Share on LinkedIn\"><span class=\"dpsp-network-icon\"></span><span class=\"dpsp-network-label-wrapper\"></span></a></li></ul><div class=\"dpsp-total-share-wrapper\"><span class=\"dpsp-icon-total-share\"></span><span class=\"dpsp-total-share-count\">6</span><span>shares</span></div></div><div class=\"relpost-thumb-wrapper\"><div class=\"relpost-thumb-container\"><h3>Related posts:</h3><div style=\"clear: both\"></div><div style=\"clear: both\"></div><div class=\"relpost-block-container\"><a class=\"relpost-block-single\" href=\"https://lowendbox.com/blog/managing-your-lowendempire-with-ansible-part-1/\"><div style=\"width: 150px; height: 215px;\"><div class=\"relpost-block-single-image\" alt=\"Managing Your LowEndEmpire With Ansible, Part 1\" style=\"background: transparent url(https://lowendbox.com/wp-content/uploads/2020/03/leb-banner-150x150.png) no-repeat scroll 0% 0%; width: 150px; height: 150px;\"></div><div class=\"relpost-block-single-text\" style=\"font-family: Arial;  font-size: 12px;  color: #333333;\">Managing Your LowEndEmpire With Ansible, Part 1</div></div></a><a class=\"relpost-block-single\" href=\"https://lowendbox.com/blog/setup-a-dns-nameserver-using-nsd/\"><div style=\"width: 150px; height: 215px;\"><div class=\"relpost-block-single-image\" alt=\"Setup a DNS Nameserver Using NSD\" style=\"background: transparent url(https://lowendbox.com/wp-content/uploads/2020/03/leb-banner-150x150.png) no-repeat scroll 0% 0%; width: 150px; height: 150px;\"></div><div class=\"relpost-block-single-text\" style=\"font-family: Arial;  font-size: 12px;  color: #333333;\">Setup a DNS Nameserver Using NSD</div></div></a><a class=\"relpost-block-single\" href=\"https://lowendbox.com/blog/keeping-a-logwatchful-eye-on-your-vps-with-logwatch/\"><div style=\"width: 150px; height: 215px;\"><div class=\"relpost-block-single-image\" alt=\"Keeping A (log)Watchful Eye on Your VPS With logwatch\" style=\"background: transparent url(https://lowendbox.com/wp-content/uploads/2020/04/logwatch-150x150.png) no-repeat scroll 0% 0%; width: 150px; height: 150px;\"></div><div class=\"relpost-block-single-text\" style=\"font-family: Arial;  font-size: 12px;  color: #333333;\">Keeping A (log)Watchful Eye on Your VPS With logwatch</div></div></a><a class=\"relpost-block-single\" href=\"https://lowendbox.com/blog/nginx-vs-openlitespeed-vs-apache/\"><div style=\"width: 150px; height: 215px;\"><div class=\"relpost-block-single-image\" alt=\"Nginx vs. OpenLiteSpeed vs. Apache\" style=\"background: transparent url(https://lowendbox.com/wp-content/uploads/2020/04/nginx-vs-openlitespeed-vs-apache-150x150.png) no-repeat scroll 0% 0%; width: 150px; height: 150px;\"></div><div class=\"relpost-block-single-text\" style=\"font-family: Arial;  font-size: 12px;  color: #333333;\">Nginx vs. OpenLiteSpeed vs. Apache</div></div></a></div><div style=\"clear: both\"></div></div></div><div id=\"author-bio-box\" style=\"background: #f8f8f8; border-top: 2px solid #cccccc; border-bottom: 2px solid #cccccc; color: #333333\"><h3><a style=\"color: #555555;\" href=\"https://lowendbox.com/blog/author/jbiloh/\" title=\"All posts by Jon Biloh\" rel=\"author\">Jon Biloh</a></h3><div class=\"bio-gravatar\"><img data-lazyloaded=\"1\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3MCIgaGVpZ2h0PSI3MCIgdmlld0JveD0iMCAwIDcwIDcwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjY2ZkNGRiIi8+PC9zdmc+\" alt=\"\" data-src=\"https://secure.gravatar.com/avatar/f766d6dc4b5f406b9f3cb0339d48de95?s=70&amp;d=retro&amp;r=pg\" data-srcset=\"https://secure.gravatar.com/avatar/f766d6dc4b5f406b9f3cb0339d48de95?s=140&amp;d=retro&amp;r=pg 2x\" class=\"avatar avatar-70 photo\" height=\"70\" width=\"70\" loading=\"lazy\"></div><a target=\"_blank\" rel=\"nofollow noopener noreferrer\" href=\"https://www.lowendtalk.com/profile/jbiloh\" class=\"bio-icon bio-icon-website\"></a><a target=\"_blank\" rel=\"nofollow noopener noreferrer\" href=\"http://Jbiloh\" class=\"bio-icon bio-icon-twitter\"></a><a target=\"_blank\" rel=\"nofollow noopener noreferrer\" href=\"https://www.linkedin.com/in/jon-biloh-4b32598/\" class=\"bio-icon bio-icon-linkedin\"></a><p class=\"bio-description\">I'm Jon Biloh and I own LowEndBox and LowEndTalk. I've spent my nearly 20 year career in IT building companies and now I'm excited to focus on building and enhancing the community at LowEndBox and LowEndTalk.</p></div></div><div class=\"feedback\"></div></div>"}