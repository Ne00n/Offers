{"id": "333", "post": "<div class=\"post-333 post type-post status-publish format-standard hentry category-editorial tag-xenvz-co-uk\" id=\"post-333\"><h2 class=\"storytitle\"><a href=\"https://lowendbox.com/blog/xenvz-99-pence-openvz-vps-quick-review/\" rel=\"bookmark\">XenVZ \u00a30.99 OpenVZ VPS Quick Review</a></h2><div class=\"meta\"><img data-lazyloaded=\"1\" src=\"/media/icons/tag_green.png\" data-src=\"/media/icons/tag_green.png\" alt=\"Tags: \" class=\"litespeed-loaded\" data-was-processed=\"true\"> <a href=\"https://lowendbox.com/tag/xenvz-co-uk/\" rel=\"tag\">xenvz.co.uk</a> <img data-lazyloaded=\"1\" src=\"https://lowendbox.com/media/icons/calendar.png\" data-src=\"https://lowendbox.com/media/icons/calendar.png\" alt=\"Date/Time: \" class=\"litespeed-loaded\" data-was-processed=\"true\"> August 23, 2009 @ 3:57 pm, by LowEndAdmin</div><div class=\"storycontent tablelook\"><p>Marcus wrote to me a few days ago regarding <a href=\"/blog/xenvz-0-99-gbp-openvz-vps/\">this VPS offer from XenVZ</a> \u2014 a 32MB guaranteed/48MB burstable OpenVZ VPS for 0.99 British Pound. That could very well be the <em>cheapest</em> virtual server available (a time limited promotion though). However, working with merely 32MB of memory could be tricky (especially on an OpenVZ VPS). At the end Marcus wrote:</p><blockquote><p>THANKS IN ADVANCE, I hope with your help, be able to create the world est tiny server ever made :)</p></blockquote><p>Well. Challenge taken :)</p><p><span id=\"more-333\"></span></p><h3>Signing Up</h3><p>VPS provisioning at <a href=\"http://www.xenvz.co.uk/\">XenVZ</a> is almost instantaneous. After submitting the form, within minutes the invoice with payment options was received. I paid with PayPal, and again within a minute my tiny VPS was built and activated. Perfect score here.</p><p>I am running Debian 5 Lenny 32bit on this VPS (which is <a href=\"/blog/stick-to-32-bit-for-your-low-end-box/\">quite a lot lighter than 64bit</a>).</p><h3>VPS Specification</h3><p>Basically, you get what you pay for.</p><ul><li>32MB guaranteed/48MB burstable memory</li><li>1.5GB disk storage</li><li>10GB/month data transfer</li></ul><p>The CPU on the physical box is not too bad either:</p><pre class=\"code\"># cat /proc/cpuinfo\nprocessor       : 0\nvendor_id       : GenuineIntel\ncpu family      : 6\nmodel           : 23\nmodel name      : Intel(R) Xeon(R) CPU           L5410  @ 2.33GHz\nstepping        : 10\ncpu MHz         : 874.999\ncache size      : 6144 KB\n...\nprocessor       : 1\nvendor_id       : GenuineIntel\ncpu family      : 6\nmodel           : 23\nmodel name      : Intel(R) Xeon(R) CPU           L5410  @ 2.33GHz\nstepping        : 10\n...\n</pre><p>You get access to two Xeon L5410 CPU cores, but both of them has been throttled to 875MHz. However it does feel quite snappy when I navigate around and tried a few commands. Let\u2019s now look at the dreaded <code>user_beancounters</code> settings on this OpenVZ VPS:</p><pre class=\"code\"># cat /proc/user_beancounters\nVersion: 2.5\n       uid  resource     ...   barrier                limit\n     1950:  kmemsize     ...   3276800              3604480\n            lockedpages  ...        64                   64\n            privvmpages  ...     12288                12288\n            shmpages     ...      8192                 8192\n            dummy        ...         0                    0\n            numproc      ...        64                   64\n            physpages    ...         0  9223372036854775807\n            vmguarpages  ...      8192  9223372036854775807\n            oomguarpages ...      8192  9223372036854775807\n            numtcpsock   ...        96                   96\n            numflock     ...       100                  100\n            numpty       ...         8                    8\n            numsiginfo   ...       500                  500\n            tcpsndbuf    ...    167772               335544\n            tcprcvbuf    ...    167772               335544\n            othersockbuf ...    167772               335544\n            dgramrcvbuf  ...     83886               167772\n            numothersock ...        96                   96\n            dcachesize   ...    524288               539648\n            numfile      ...      1024                 1024\n            dummy        ...         0                    0\n            dummy        ...         0                    0\n            dummy        ...         0                    0\n            numiptent    ...       250                  250\n</pre><p>From what I can tell, the user beancounters parameters <em>severely</em> limits what this VPS can do. Well, you do not expect to serve millions of pages a month from just 32MB of memory, but some of the settings make it not even usable as a private proxy or VPN.</p><ul><li>3.2MB of kernel memory <em>is not a lot</em> when you start adding some iptable rules.</li><li>164k of <code>tcpsndbuf</code> and <code>tcprcvbuf</code> means it could be very difficult to stream big chunk of data over TCP connections. I had hit the limit of <code>tcprcvbuf</code> a couple of times myself.</li><li>Maximum 96 TCP sockets and 1024 opened files. I can think of quite a few apps breaking these params.</li></ul><p>Anyway. It\u2019s a tiny VPS with limited applications. Shell server? IRC node? Backup NS or MX? Now I have this VPS for 6 months (you have to prepay 6 months). What can I do with it?</p><p>I guess I will run it like what most people would use a VPS for \u2014 turn it into a web server to host websites!</p><h3>Lightweight Web Server</h3><p>When I first got the VPS, it runs <em>almost nothing</em> \u2014 not even syslog or cron. Here are the software I removed and then installed to turn it into a small web server.</p><ul><li>Removed:<ul><li>DenyHost (memory-heavy as it\u2019s coded in Python. Some iptables rules should be sufficient)</li><li>Removed: rsyslogd (allocates <em>lots</em> of memory \u2014 20+MB!)</li></ul></li><li>Installed:<ul><li>dropbear (to replace openssh)</li><li>nginx (as web server)</li><li>php5-cgi (to serve dynamic content)</li><li>dash (to replace bash as scripting shell)</li><li>pdksh (to replace bash as interactive shell)</li><li>inetutils-syslogd (to replace rsyslogd)</li></ul></li></ul><p>Please see <a href=\"/blog/yes-you-can-run-18-static-sites-on-a-64mb-link-1-vps/\">my previous Debian 5 setup guide</a> for more details. I am running a single process of php-cgi talking to Nginx using FastCGI protocol. The plan is to run some kind of CMS using PHP. However I do not wish to run MySQL because of its memory requirement \u2014 I am opting for something using flat files instead. At the end, <a href=\"http://www.dokuwiki.org/\">DokuWiki</a> was chosen because it\u2019s quite flexible and uses only flat files to store all its data.</p><p>I am also cheating here \u2014 I don\u2019t run a MTA. Instead, I use ssmtp to forward email to my other VPS for delivery.</p><p>End result?</p><p><strong style=\"font-size:150%\"><a href=\"http://wiki.lowendbox.com/\">Low End Box Wiki</a></strong>!!!</p><p>Yup \u2014 the entire wiki site runs on a VPS with only 32MB of memory, and the performance feels okay as well. There is only one PHP backend so there can only be one page-generation request at the same time. Not a big deal I guess judging by how many visitors that wiki might get.</p><pre class=\"code\"># free\n             total       used       free     shared    buffers     cached\nMem:         49152      17236      31916          0          0          0\n-/+ buffers/cache:      17236      31916\nSwap:            0          0          0\n\n# df -h\nFilesystem            Size  Used Avail Use% Mounted on\n/dev/simfs            1.5G  339M  1.2G  23% /\ntmpfs                 2.0G     0  2.0G   0% /lib/init/rw\ntmpfs                 2.0G     0  2.0G   0% /dev/shm\n</pre><p>I am heading to sleep now. Hopefully it is still alive when I wake up tomorrow morning :)</p><p><b>Updates</b>: I am up! Trying to set up <code>iptables</code> and found quite a few modules are missing.</p><ul><li>No LOG target</li><li>No state module</li></ul><p>That certainly makes implementing a stateful firewall a bit trickier\u2026</p><p class=\"dpsp-share-text\"></p><div id=\"dpsp-content-bottom\" class=\"dpsp-content-wrapper dpsp-shape-rounded dpsp-column-auto dpsp-has-spacing dpsp-no-labels dpsp-show-on-mobile dpsp-button-style-1 dpsp-has-icon-background dpsp-has-button-background dpsp-show-total-share-count dpsp-show-total-share-count-after\"><ul class=\"dpsp-networks-btns-wrapper dpsp-networks-btns-content dpsp-has-button-icon-animation\"><li><a rel=\"nofollow\" href=\"https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Flowendbox.com%2Fblog%2Fxenvz-99-pence-openvz-vps-quick-review%2F&amp;t=XenVZ%20%C2%A30.99%20OpenVZ%20VPS%20Quick%20Review\" class=\"dpsp-network-btn dpsp-facebook dpsp-no-label dpsp-first\" title=\"Share on Facebook\"><span class=\"dpsp-network-icon\"></span><span class=\"dpsp-network-label-wrapper\"></span></a></li><li><a rel=\"nofollow\" href=\"https://twitter.com/intent/tweet?text=XenVZ%20%C2%A30.99%20OpenVZ%20VPS%20Quick%20Review&amp;url=https%3A%2F%2Flowendbox.com%2Fblog%2Fxenvz-99-pence-openvz-vps-quick-review%2F&amp;via=LowEndNetwork\" class=\"dpsp-network-btn dpsp-twitter dpsp-no-label\" title=\"Share on Twitter\"><span class=\"dpsp-network-icon\"></span><span class=\"dpsp-network-label-wrapper\"></span></a></li><li><a rel=\"nofollow\" href=\"https://www.linkedin.com/shareArticle?url=https%3A%2F%2Flowendbox.com%2Fblog%2Fxenvz-99-pence-openvz-vps-quick-review%2F&amp;title=XenVZ%20%C2%A30.99%20OpenVZ%20VPS%20Quick%20Review&amp;mini=true\" class=\"dpsp-network-btn dpsp-linkedin dpsp-no-label dpsp-last\" title=\"Share on LinkedIn\"><span class=\"dpsp-network-icon\"></span><span class=\"dpsp-network-label-wrapper\"></span></a></li></ul><div class=\"dpsp-total-share-wrapper\"><span class=\"dpsp-icon-total-share\"></span><span class=\"dpsp-total-share-count\">0</span><span>shares</span></div></div><div class=\"relpost-thumb-wrapper\"><div class=\"relpost-thumb-container\"><h3>Related posts:</h3><div style=\"clear: both\"></div><div style=\"clear: both\"></div><div class=\"relpost-block-container\"><a class=\"relpost-block-single\" href=\"https://lowendbox.com/blog/openitc-4-00-6-501024mb-kvm-in-maidenhead-uk/\"><div style=\"width: 150px; height: 215px;\"><div class=\"relpost-block-single-image\" alt=\"openitc\" style=\"background: transparent url(https://lowendbox.com/wp-content/uploads/2013/01/openitc-150x150.jpeg) no-repeat scroll 0% 0%; width: 150px; height: 150px;\"></div><div class=\"relpost-block-single-text\" style=\"font-family: Arial;  font-size: 12px;  color: #333333;\">OpenITC - \u00a34.00 ($6.50)1024MB KVM in Maidenhead, UK</div></div></a><a class=\"relpost-block-single\" href=\"https://lowendbox.com/blog/xenvz-1-30-128mb-xen-vps-in-uk/\"><div style=\"width: 150px; height: 215px;\"><div class=\"relpost-block-single-image\" alt=\"XenVZ - \u00a31.30 128MB Xen VPS in UK\" style=\"background: transparent url(https://lowendbox.com/wp-content/uploads/2020/04/leb-centered-small.jpg) no-repeat scroll 0% 0%; width: 150px; height: 150px;\"></div><div class=\"relpost-block-single-text\" style=\"font-family: Arial;  font-size: 12px;  color: #333333;\">XenVZ - \u00a31.30 128MB Xen VPS in UK</div></div></a><a class=\"relpost-block-single\" href=\"https://lowendbox.com/blog/xenvz-openvz-xen-uk/\"><div style=\"width: 150px; height: 215px;\"><div class=\"relpost-block-single-image\" alt=\"XenVZ - \u00a36/6 months 96MB OpenVZ/Xen VPS in UK\" style=\"background: transparent url(https://lowendbox.com/wp-content/uploads/2020/04/leb-centered-small.jpg) no-repeat scroll 0% 0%; width: 150px; height: 150px;\"></div><div class=\"relpost-block-single-text\" style=\"font-family: Arial;  font-size: 12px;  color: #333333;\">XenVZ - \u00a36/6 months 96MB OpenVZ/Xen VPS in UK</div></div></a><a class=\"relpost-block-single\" href=\"https://lowendbox.com/blog/xenvz-3-gbp-192mb-xen-vps-in-uk/\"><div style=\"width: 150px; height: 215px;\"><div class=\"relpost-block-single-image\" alt=\"XenVZ - \u00a33 192MB Xen VPS in UK\" style=\"background: transparent url(https://lowendbox.com/wp-content/uploads/2020/04/leb-centered-small.jpg) no-repeat scroll 0% 0%; width: 150px; height: 150px;\"></div><div class=\"relpost-block-single-text\" style=\"font-family: Arial;  font-size: 12px;  color: #333333;\">XenVZ - \u00a33 192MB Xen VPS in UK</div></div></a></div><div style=\"clear: both\"></div></div></div><div id=\"author-bio-box\" style=\"background: #f8f8f8; border-top: 2px solid #cccccc; border-bottom: 2px solid #cccccc; color: #333333\"><h3><a style=\"color: #555555;\" href=\"https://lowendbox.com/blog/author/admin/\" title=\"All posts by LowEndAdmin\" rel=\"author\">LowEndAdmin</a></h3><div class=\"bio-gravatar\"><img data-lazyloaded=\"1\" src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI3MCIgaGVpZ2h0PSI3MCIgdmlld0JveD0iMCAwIDcwIDcwIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjY2ZkNGRiIi8+PC9zdmc+\" alt=\"\" data-src=\"https://secure.gravatar.com/avatar/11a4d9191634a9374eeca7d0e8982ba2?s=70&amp;d=retro&amp;r=pg\" data-srcset=\"https://secure.gravatar.com/avatar/11a4d9191634a9374eeca7d0e8982ba2?s=140&amp;d=retro&amp;r=pg 2x\" class=\"avatar avatar-70 photo\" height=\"70\" width=\"70\" loading=\"lazy\"></div><p class=\"bio-description\">The original owner of LowEndBox known as \"LowEndAdmin\" or \"LEA\" for short founded LowEndBox in 2008 and created the concept of hosting applications on low resource \"Low End Boxes\". After creating the roots of the community that we know today, \"LEA\" stepped aside and allowed others to carry the torch forward.</p></div></div><div class=\"feedback\"></div></div>"}